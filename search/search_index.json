{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"<p>Documentation Status</p> <p>This documentation is partially AI-generated and may contain hallucinations or inaccuracies.  We are actively working to review and correct these issues. If you encounter incorrect information,  please report it at https://github.com/cpcsdk/rust.cpclib/issues.</p> <p>cpclib is a rust library that aims at helping to develop Amstrad CPC demos.  Maybe it could be usefull for other z80 platform or even games.  Most functionalities are still in beta state; I have only implemented the subset I need for my current Amstrad CPC demo projects.  Several tools are provided in addition to library.</p> <p>There are more are less able to do:</p> <ul> <li>assemble z80 source code.</li> <li>Mainly interesting for auto-generated code, not for handcrafted one.</li> <li>Not all opcodes are managed.</li> <li>Functionalities not available in other assemblers:<ul> <li>Injection of basic source code (WIP)</li> <li>Function able to provided the opcode value of an instruction or its standard duration</li> </ul> </li> <li>manipulate .sna files</li> <li>Minimal support of chunks at the moment</li> <li>convert images to CPC format. Usable for standard resolutions/modes</li> <li>manipulate DSK (trying to mimick iDSK or dskmanager). Able to format and add files</li> <li>communicate with cpcwifi board</li> <li>Replication of xfer utility.</li> <li>Only reset and run file have been coded at the moment</li> <li>In opposite to the original xfer tool, cpclib one is able to start snapshots V3 (there are simply converted as snapshot v2 on the fly)</li> <li>create basic tokens from basic source (WIP)</li> </ul>"},{"location":"CLI_HELP_REFERENCE/","title":"Command Line Help Reference","text":"<p>This page provides the help output for all cpclib tools and their subcommands.</p>"},{"location":"CLI_HELP_REFERENCE/#table-of-contents","title":"Table of Contents","text":"<ul> <li>basm - Z80 Assembler</li> <li>bdasm - Z80 Disassembler </li> <li>catalog - DSK File Manager</li> <li>fade - Color Fade Generator</li> <li>img2cpc - Image to CPC Converter</li> <li>cpc2img - CPC to Image Converter</li> <li>xfertool - M4 Transfer Tool</li> <li>snapshot - SNA File Tool</li> </ul>"},{"location":"CLI_HELP_REFERENCE/#basm","title":"basm","text":"<pre><code>{{RUN: cargo run --release -p cpclib-asm -- --help}}\n</code></pre>"},{"location":"CLI_HELP_REFERENCE/#bdasm","title":"bdasm","text":"<pre><code>{{RUN: cargo run --release -p cpclib-bdasm -- --help}}\n</code></pre>"},{"location":"CLI_HELP_REFERENCE/#catalog","title":"catalog","text":"<pre><code>{{RUN: cargo run --release -p cpclib-catalog -- --help}}\n</code></pre>"},{"location":"CLI_HELP_REFERENCE/#catalog-subcommands","title":"catalog Subcommands","text":""},{"location":"CLI_HELP_REFERENCE/#build","title":"build","text":"<pre><code>{{RUN: cargo run --release -p cpclib-catalog -- build --help}}\n</code></pre>"},{"location":"CLI_HELP_REFERENCE/#cat","title":"cat","text":"<pre><code>{{RUN: cargo run --release -p cpclib-catalog -- cat --help}}\n</code></pre>"},{"location":"CLI_HELP_REFERENCE/#dir","title":"dir","text":"<pre><code>{{RUN: cargo run --release -p cpclib-catalog -- dir --help}}\n</code></pre>"},{"location":"CLI_HELP_REFERENCE/#fade","title":"fade","text":"<pre><code>{{RUN: cargo run --release -p cpclib-imgconverter --bin fade -- --help}}\n</code></pre>"},{"location":"CLI_HELP_REFERENCE/#fade-rgb","title":"fade rgb","text":"<pre><code>{{RUN: cargo run --release -p cpclib-imgconverter --bin fade -- rgb --help}}\n</code></pre>"},{"location":"CLI_HELP_REFERENCE/#img2cpc","title":"img2cpc","text":"<pre><code>{{RUN: cargo run --release -p cpclib-imgconverter --bin img2cpc -- --help}}\n</code></pre>"},{"location":"CLI_HELP_REFERENCE/#img2cpc-subcommands","title":"img2cpc Subcommands","text":""},{"location":"CLI_HELP_REFERENCE/#sna","title":"sna","text":"<pre><code>{{RUN: cargo run --release -p cpclib-imgconverter --bin img2cpc -- sna --help}}\n</code></pre>"},{"location":"CLI_HELP_REFERENCE/#dsk","title":"dsk","text":"<pre><code>{{RUN: cargo run --release -p cpclib-imgconverter --bin img2cpc -- dsk --help}}\n</code></pre>"},{"location":"CLI_HELP_REFERENCE/#scr","title":"scr","text":"<pre><code>{{RUN: cargo run --release -p cpclib-imgconverter --bin img2cpc -- scr --help}}\n</code></pre>"},{"location":"CLI_HELP_REFERENCE/#exec","title":"exec","text":"<pre><code>{{RUN: cargo run --release -p cpclib-imgconverter --bin img2cpc -- exec --help}}\n</code></pre>"},{"location":"CLI_HELP_REFERENCE/#cpc2img","title":"cpc2img","text":"<pre><code>{{RUN: cargo run --release -p cpclib-imgconverter --bin cpc2img -- --help}}\n</code></pre>"},{"location":"CLI_HELP_REFERENCE/#cpc2img-subcommands","title":"cpc2img Subcommands","text":""},{"location":"CLI_HELP_REFERENCE/#palette","title":"palette","text":"<pre><code>{{RUN: cargo run --release -p cpclib-imgconverter --bin cpc2img -- palette --help}}\n</code></pre>"},{"location":"CLI_HELP_REFERENCE/#screen","title":"screen","text":"<pre><code>{{RUN: cargo run --release -p cpclib-imgconverter --bin cpc2img -- screen --help}}\n</code></pre>"},{"location":"CLI_HELP_REFERENCE/#sprite","title":"sprite","text":"<pre><code>{{RUN: cargo run --release -p cpclib-imgconverter --bin cpc2img -- sprite --help}}\n</code></pre>"},{"location":"CLI_HELP_REFERENCE/#xfertool","title":"xfertool","text":"<pre><code>{{RUN: cargo run --release -p cpclib-xfertool -- --help}}\n</code></pre>"},{"location":"CLI_HELP_REFERENCE/#snapshot","title":"snapshot","text":"<pre><code>{{RUN: cargo run --release -p cpclib-sna --bin snapshot -- --help}}\n</code></pre>"},{"location":"CLI_HELP_REFERENCE/#snapshot-subcommands","title":"snapshot Subcommands","text":""},{"location":"CLI_HELP_REFERENCE/#chunk","title":"chunk","text":"<pre><code>{{RUN: cargo run --release -p cpclib-sna --bin snapshot -- chunk --help}}\n</code></pre>"},{"location":"CLI_HELP_REFERENCE/#header","title":"header","text":"<pre><code>{{RUN: cargo run --release -p cpclib-sna --bin snapshot -- header --help}}\n</code></pre>"},{"location":"basm/","title":"BASM documentation - WIP","text":""},{"location":"basm/#basm","title":"BASM","text":"<p>Benediction ASsembler (<code>BASM</code> in short) is a modern Z80 assembler. He has taken its inspiration from various Z80 assembler (Maxam/Winape, sjasmplus, rasm, vasm, BRASS, glass, zasm) as well as assemblers from other platforms (asm11, sarcasm). It is tailored for Amstrad CPC demomaking and  has been successfully used to develop the Amstrad CPC demo Can Robots Take Control?. It has been still improved since and will serve for futur productions too.</p> <p>The documentation is quite minimal at the moment, but included example code should be still valid and assembled propetly. The user base being quite small, lots of bugs can remain. Do note hesitate to fill issues https://github.com/cpcsdk/rust.cpclib/issues or propose fixes.</p>"},{"location":"basm/#features-of-interest","title":"Features of Interest","text":"<ul> <li>Possibility to assemble fake instructions (e.g. <code>ld hl, de</code>).</li> <li>Possibility to use standard directives (e.g. <code>incbin 'file.asm</code>).</li> <li>Rare directives and functions (e.g. <code>ld a, opcode(xor a)</code>).</li> <li>Macros definition and usage (e.g. <code>MY_MACRO_WITH_TWO_ARGS 1, \"string\"</code>).</li> <li>Function definition and usage (e.g. <code>db 5, my_function(3)</code>).</li> <li>Expressions able to handle numbers, strings, lists, matrices - see expression types.</li> <li>Handling of Amstrad CPC snapshots.</li> <li>Possibility to execute directly the assembled project in the Amstrad CPC thanks to the M4/CPC WIFI card.</li> <li>Multi-pass (in fact, <code>BASM</code> uses as many passes as needed).</li> <li>Multiplatform (mainly tested on Linux and Windows).</li> <li>Embedding of various ASM source files inside <code>BASM</code> that can be used by the users.</li> <li>Possibility to write LOCOMOTIVE BASIC for easily writting Amstrad CPC bootstrap loaders.</li> </ul>"},{"location":"basm/#hello-world","title":"Hello World","text":"<p>An hello world representative of the functionalities of <code>BASM</code> would be: <pre><code>    snainit \"../cpclib-sna/src/cpc6128.sna\" ; should be uneeded by properly specifying sna properties\n\n    org 0x4000\n    run $\n\n\n\n    ld hl, text_content\nloop\n        ld a, (hl)\n        or a\n        jp z, finished\n\n        call TXT_OUTPUT\n        inc hl\n        jp loop\n\nfinished\n    jp $\n\ntext_content\n    db \"Hello, world!\", 0\n    include \"inner://firmware/txtvdu.asm\"\n</code></pre></p>"},{"location":"basm/#download-last-version","title":"Download last version","text":""},{"location":"basm/#integration-with-bndbuild","title":"Integration with BndBuild","text":"<p>BASM is available as a standalone <code>basm</code> binary but can also be used within BndBuild build scripts using the <code>basm</code> or <code>assemble</code> command aliases. See BndBuild Commands for integration details.</p>"},{"location":"basm/#download-last-version_1","title":"Download last version","text":"<p>Prefer to compile yourself <code>basm</code>. But you can still download latest versions here:</p> <ul> <li>Linux </li> <li>Windows </li> </ul> <p>Failure</p> <p>Continuous delivery system for Linux is broken. The executables are outdated of few years...</p>"},{"location":"basm/#differences-with-rasm","title":"Differences with RASM","text":"<ul> <li>slower on the parsing side</li> <li>more buggy because not enough tested ;)</li> <li><code>MODULE</code> directive must be closed by <code>ENDMODULE</code></li> <li><code>REPEAT</code> counter is not accessible by using the variable <code>counter</code> but <code>{counter}</code> as in a <code>MACRO</code></li> <li>It is possible to name a <code>MACRO</code> using the label before the <code>MACRO</code> directive</li> <li>More data types (list, matrix, int, float, boolean)</li> <li>As <code>basm</code> can use an unlimited number of pass (warning there is not infinite loop check ATM), it can assemble  code that would not be assembled with <code>rasm</code> because labels have to be known at this moment</li> <li>Weak support of <code>DSK``, no support of</code>TAPE<code>and `CPR</code>. <code>HFE</code> is usable on Linux with the appropriate compilation option. <code>AMSDOS</code> support is buggy <code>ATM</code></li> <li><code>SNA</code> should be ok</li> <li>Possibility to add some <code>BASIC</code> tokens to create loaders that do not clear the screen when launched</li> </ul>"},{"location":"basm/cmdline/","title":"Command line arguments","text":"<p>Here is the help provided by <code>basm</code>.</p> <pre><code>Profile release compiled: Tue, 6 Jan 2026 19:53:38 +0000\n\nBenediction ASM -- z80 assembler that mainly targets Amstrad CPC\n\nUsage: basm [OPTIONS] [INPUT]\n\nArguments:\n  [INPUT]  Input file to read.\n\nOptions:\n      --inline &lt;INLINE&gt;                Z80 code is provided inline\n      --db                             Write a db list on screen (usefull to get the value of an opcode)\n      --lst &lt;LISTING_OUTPUT&gt;           Filename of the listing output.\n      --remu &lt;REMU_OUTPUT&gt;             Filename to store the remu file used by Ace to import label and debug information\n      --wabp &lt;WABP_OUTPUT&gt;             Filename to stare the WABP file use to provide Winape breakpoints\n      --breakpoint-as-opcode           Breakpoints are stored as opcodes (mainly interesting for winape emulation)\n      --sym &lt;SYMBOLS_OUTPUT&gt;           Filename of the output symbols file.\n      --sym_kind &lt;SYMBOLS_KIND&gt;        Format of the output symbols file [default: basm] [possible values: winape, basm]\n  -o, --output &lt;OUTPUT&gt;                Filename of the output.\n      --basic                          Request a Basic header (the very first instruction has to be the LOCOMOTIVE directive).\n      --binary                         Request a binary header\n      --cartridge                      Generate a CPR\n      --snapshot                       Generate a snapshot\n      --nochunk &lt;CODE&gt;                 Deactivate some snapshot chunks (comma separated) [possible values: BRKC, BRKS, REMU, SYMB]\n  -i, --case-insensitive               Configure the assembler to be case insensitive.\n      --disable-warnings               Do not generate warnings\n  -d, --directives-prefixed-by-dot     Expect directives to by prefixed with a dot\n  -I, --include &lt;INCLUDE_DIRECTORIES&gt;  Provide additional directories used to search files\n  -D, --define &lt;DEFINE_SYMBOL&gt;         Provide a symbol with its value (default set to 1)\n      --no-forced-void                 By default (void) is mandatory on macro without parameters. This option disable this behavior\n      --debug                          Trace more information to help debug\n      --override                       Override file when already stored in a disc\n      --backup                         Backup an existing file when saved on disc\n      --orgams                         Main source is at ORGAMS format\n      --m4 &lt;TO_M4&gt;                     Provide the IP address of the M4\n  -l &lt;LOAD_SYMBOLS&gt;                    Load symbols from the given file\n      --Werror                         Warning are considered to be errors\n      --progress                       Show a progress bar.\n      --list-embedded                  List the embedded files\n      --view-embedded &lt;VIEW_EMBEDDED&gt;  Display one specific embedded file [possible values: inner://crtc.asm, inner://deexo.asm, inner://deshrink.asm, inner://dzx0_fast.asm, inner://dzx0_standard.asm, inner://firmware/amsdos.asm, inner://firmware/casmng.asm, inner://firmware/gfxvdu.asm, inner://firmware/highkern.asm, inner://firmware/indirect.asm, inner://firmware/kernel.asm, inner://firmware/keymng.asm, inner://firmware/lowkern.asm, inner://firmware/machine.asm, inner://firmware/math6128.asm, inner://firmware/mathnot464.asm, inner://firmware/mathnot6xx.asm, inner://firmware/not464.asm, inner://firmware/scrpack.asm, inner://firmware/sound.asm, inner://firmware/txtvdu.asm, inner://ga.asm, inner://lz48decrunch.asm, inner://lz49decrunch.asm, inner://lz4_docent.asm, inner://opcodes_first_byte.asm, inner://pixels-routs.asm, inner://unaplib.asm, inner://unaplib_fast.asm, inner://uncrunch/dzx0_mega_back.asm, inner://uncrunch/dzx0_standard_back.asm, inner://uncrunch/dzx0_turbo_back.asm, inner://uncrunch/dzx7_turbo.asm, inner://uncrunch/upkr.asm, inner://unlzsa1_fast.asm, inner://unlzsa1_small.asm, inner://unlzsa2_fast.asm, inner://unlzsa2_small.asm]\n  -h, --help                           Print help\n  -V, --version                        Print version\n\nStill a Work In Progress assembler\n</code></pre>"},{"location":"basm/directives/","title":"Directives","text":"<p>Failure</p> <p>Most content is IA generated and not yet proofreaded. However all examples are unit-tested</p>"},{"location":"basm/directives/#listing-related","title":"Listing related","text":""},{"location":"basm/directives/#list-nolist","title":"LIST, NOLIST","text":"<p>Synopsis:</p> <pre><code>LIST\nNOLIST\n</code></pre> <p>Description: Control assembly listing output. LIST enables listing generation, NOLIST disables it. Useful for hiding macro expansions or repetitive code from listings.</p> <p>Example:</p> <pre><code>    ; LIST/NOLIST directives\n    list        ; Enable listing\n\n    org $4000\n    ld a, 5\n\n    nolist      ; Disable listing\n    ld b, 10\n    list        ; Re-enable listing\n\n    ret\n</code></pre>"},{"location":"basm/directives/#memory-related","title":"Memory related","text":""},{"location":"basm/directives/#align","title":"ALIGN","text":"<p>Synopsis:</p> <pre><code>ALIGN boundary [, FILL]\n</code></pre> <p>Description: Align the assembly address to the specified boundary. Pads with zeros until the address is a multiple of the boundary value.</p> <p>Example:</p> <pre><code>    ; ALIGN directive\n    org $4000\n\n    db 1, 2, 3\n\n    align 256   ; Align to next 256-byte boundary\n\n    db 4, 5, 6\n    ret\n</code></pre>"},{"location":"basm/directives/#even","title":"EVEN","text":"<p>Synopsis:</p> <pre><code>EVEN\n</code></pre> <p>Description: Align to an even address. Shorthand for ALIGN 2. Ensures the next byte is at an even memory address.</p> <p>Example:</p> <pre><code>    ; Test EVEN directive\n    ; EVEN aligns to the next even address (equivalent to ALIGN 2)\n\n    org 0x4000\n\n    ; Start at even address\n    assert $ == 0x4000\n    db 1         ; $ is now 0x4001 (odd)\n\n    ; EVEN should align to 0x4002\n    EVEN\n    assert $ == 0x4002\n\n    ; Already at even address\n    db 2, 3      ; $ is now 0x4004 (even)\n    EVEN\n    assert $ == 0x4004    ; No change needed\n\n    ; Test with odd address\n    db 5         ; $ is now 0x4005 (odd)\n    EVEN\n    assert $ == 0x4006\n\n    ; Test comparison with ALIGN 2\n    org 0x5000\n    db 1\n    ALIGN 2\nalign_result = $\n\n    org 0x5000\n    db 1\n    EVEN\neven_result = $\n\n    ; Both should give same result\n    assert align_result == even_result\n</code></pre>"},{"location":"basm/directives/#confined","title":"CONFINED","text":"<p>Synopsis:</p> <pre><code>CONFINED\n  ... code/data ...\nENDCONFINED\n</code></pre> <p>Description: Confine a memory area of 256 bytes maximum in such a way that it is always possible to navigate in the data by only modifying the low byte address (i.e INC L always works).</p> <p>Example:</p> <pre><code>    ; CONFINED directive\n    org $4000\n\n    confined\n        ; This data is confined to 256 bytes\n        ; Can navigate with INC L without overflow\n        db 0, 1, 2, 3, 4, 5, 6, 7, 8, 9\n    endconfined\n\n    ret\n</code></pre>"},{"location":"basm/directives/#org","title":"ORG","text":"<p>Synopsis:</p> <pre><code>ORG address\n</code></pre> <p>Description: Set the assembly address. Code will be placed at this address in memory.</p> <p>Example:</p> <pre><code>    ; ORG directive - set assembly address\n    org $4000\n    ld a, 5\n    ret\n\n    ; Move to another address\n    org $8000\n    ld b, 10\n    ret\n</code></pre>"},{"location":"basm/directives/#limit","title":"LIMIT","text":"<p>Synopsis:</p> <pre><code>LIMIT address\n</code></pre> <p>Description: Set an upper limit for the assembly address. Assembly will fail if code exceeds this address. Works on the code space ($), not physical space ($$).</p> <p>Example:</p> <pre><code>    ; LIMIT directive\n    org $4000\n    limit $4100  ; Fail if code exceeds this address\n\n    ; This code fits within the limit\n    ld a, 5\n    ld b, 10\n    ret\n</code></pre>"},{"location":"basm/directives/#phase-dephase","title":"PHASE, DEPHASE","text":"<p>Synopsis:</p> <pre><code>PHASE address\n  ... code ...\nDEPHASE\n</code></pre> <p>Description: Assemble code as if it were at a different address (relocation). Code is written to current $ but assembled as if at the PHASE address.</p> <p>Example:</p> <pre><code>; https://k1.spdns.de/Develop/Projects/zasm/Documentation/z71.htm\n    org 0x100\n\nlabel_100\n    nop\nlabel_101\n\n    assert $$ == 0x101\n    assert $ == 0x101\n\n    phase 0x200\n\n    assert $$ == 0x101\n    assert $ == 0x200\n\nlabel_200\n    nop\nlabel_201\n\n    dephase\nlabel_102\n\n    assert label_100 == 0x100\n    assert label_101 == 0x101\n    assert label_102 == 0x102\n    assert label_200 == 0x200\n    assert label_201 == 0x201\n</code></pre>"},{"location":"basm/directives/#rorg","title":"RORG","text":"<p>Synopsis:</p> <pre><code>RORG address\n...\nREND\n</code></pre> <p>Description: Relocatable ORG. Similar to PHASE but for relocatable code. Sets both physical and logical address. RORG must be closed with REND to return to normal addressing mode.</p> <p>Example:</p> <pre><code>    org $4000\n\n    ; Code assembled at $4000\n    ld a, 1\n\n    ; Use RORG to relocate\n    rorg $8000\n        ld b, 2\n\n    rend\n</code></pre>"},{"location":"basm/directives/#protect","title":"PROTECT","text":"<p>Synopsis: <pre><code>PROTECT START, STOP\n</code></pre> Description: Mark the memory between START and STOP as protected against write. Assembler fails when writting there.</p> <p>On the code space ($), not physical space ($$)</p> <p>Example: <pre><code>    org 0x4000\n\n    protect 0x8000, 0xbfff\n\n    defb \"No memory issue\"\n</code></pre></p>"},{"location":"basm/directives/#rangedefsection","title":"RANGE/DEFSECTION","text":"<p>Synopsis:</p> <pre><code>RANGE start, stop, name\nDEFSECTION start, stop, name    ; alias for RANGE\n</code></pre> <p>Description: RANGE (and its alias DEFSECTION) allows to define named portions of the memory. Takes start address, stop address, and section name.</p> <p>Example with DEFSECTION: <pre><code>    ; DEFSECTION is an alias for RANGE - Syntax: DEFSECTION start, stop, name\n    defsection $4000, $8000, code_section\n    defsection $8000, $9000, data_section\n\n    ; Now use the sections\n    section code_section\n    ld a, 5\n    ret\n\n    section data_section\n    db 1, 2, 3, 4, 5\n</code></pre></p>"},{"location":"basm/directives/#section","title":"SECTION","text":"<p>Synopsis:</p> <pre><code>SECTION name\n</code></pre> <p>Description: SECTION allows to choose which portion of memory to use. The section must have been previously defined with RANGE or DEFSECTION.</p> <p>Example: <pre><code>; sarcasm inspiration https://www.ecstaticlyrics.com/electronics/Z80/sarcasm/\n\nrange $0080, $3FFF, code\nrange $4000, $7FFF, data\n\nsection code\n  ld hl, message_1\n  call print_message\n\nsection data\nmessage_1: db \"This is message #1.\", $00\n\nsection code\n  ld hl, message_2\n  call print_message\n\nsection data\nmessage_2: db \"This is message #2.\", $00\n\nsection code\n  print_message: \n    ld a, (hl)\n    or a\n    ret z\n    call 0xbb5a\n    inc hl\n    jr print_message\n\n    assert section_start(\"data\") ==  0x4000\n    assert section_length(\"data\") == 0x4000\n    assert section_used(\"data\") == 40\n</code></pre></p>"},{"location":"basm/directives/#bank","title":"BANK","text":"<p>Description:</p> <p>When used with no argument, a bank corresponds to a memory area outside of the snapshot. All things read&amp;write in memory are thus uncorrelated to the snapshot. Sections do not apply in a bank.</p> <p><code>BANK page</code> is similar to <code>WRITE DIRECT -1 -1 page</code></p> <p>Synopsis:</p> <pre><code>BANK [EXPRESSION]\n</code></pre> <p>Example: <pre><code>    ; Set up a unique value in various banks\n    BANK 0xc0\n    org 0x4000 + 0\n    db 0xc0\n\n    BANK 0xc4\n    org 0x4000 + 1\n    db 0xc4\n\n\n    BANK 0xc5\n    org 0x4000 + 2\n    db 0xc5\n\n    BANK 0xc6\n    org 0x4000 + 3\n    db 0xc6\n\n\n    BANK 0xc7\n    org 0x4000 + 4\n    db 0xc7\n\n\n    BANKSET 0\n    assert memory(0x4000 + 0) == 0xC0 \n\n    BANKSET 1\n    assert memory(0x4000 + 2) == 0xC5\n    assert memory(0x8000 + 3) == 0xC6\n    assert memory(0xC000 + 4) == 0xC7\n</code></pre></p>"},{"location":"basm/directives/#bankset","title":"BANKSET","text":"<p>Synopsis:</p> <pre><code>BANKSET EXPRESSION\n</code></pre> <p>Example: <pre><code>    BANKSET 0\n\n    org 0x0000\n    db 1,2,3,4\n\n    org 0x4000\n    db 5,6,7,8\n\n    org 0x8000\n    db 9,10,11,12\n\n    org 0xc000\n    db 13, 14, 15, 16\n\n\n    BANKSET 1\n    org 0x0000\n    db 10,20,30,40\n\n    org 0x4000\n    db 50,60,70,80\n\n    org 0x8000\n    db 90,100,110,120\n\n    org 0xc000\n    db 130, 140, 150, 160\n\n\n    BANKSET 0\n    assert memory(0x0000) == 1\n    assert memory(0x4000) == 5\n    assert memory(0x8000) == 9\n    assert memory(0xc000) == 13\n\n    save \"good_bankset_0_0.o\", 0x0000, 4\n    save \"good_bankset_0_1.o\", 0x4000, 4\n    save \"good_bankset_0_2.o\", 0x8000, 4\n    save \"good_bankset_0_3.o\", 0xc000, 4\n\n    BANKSET 1\n    assert memory(0x0000) == 10\n    assert memory(0x4000) == 50\n    assert memory(0x8000) == 90\n    assert memory(0xc000) == 130\n\n    save \"good_bankset_1_0.o\", 0x0000, 4\n    save \"good_bankset_1_1.o\", 0x4000, 4\n    save \"good_bankset_1_2.o\", 0x8000, 4\n    save \"good_bankset_1_3.o\", 0xc000, 4\n</code></pre></p>"},{"location":"basm/directives/#write-direct","title":"WRITE DIRECT","text":"<p>Description: WRITE DIRECT is a directive from Winape that we have not fully reproduced. It's two first arguments need to be -1.</p> <p>Example: <pre><code>    WRITE DIRECT -1, -1, 0xc0\n    org 0x4000+0\n    db 0xc0\n\n    WRITE DIRECT -1, -1,  0xc4\n    org 0x4000+1\n    db 0xc4\n\n\n    WRITE DIRECT -1, -1,  0xc5\n    org 0x4000+2\n    db 0xc5\n\n    WRITE DIRECT -1, -1,  0xc6\n    org 0x4000+3\n    db 0xc6\n\n\n    WRITE DIRECT -1, -1,  0xc7\n    org 0x4000+4\n    db 0xc7\n\n\n    BANKSET 0\n    assert memory(0x4000 + 0) == 0xC0 \n\n    BANKSET 1\n    assert memory(0x4000 + 2) == 0xC5\n    assert memory(0x8000 + 3) == 0xC6\n    assert memory(0xC000 + 4) == 0xC7\n</code></pre></p>"},{"location":"basm/directives/#labels-related","title":"Labels related","text":""},{"location":"basm/directives/#set","title":"=, SET","text":"<p>Description:</p> <p>Assign an expression to a label. Assignement can be repeated  several times.</p> <p>Synopsis: <pre><code>LABEL = EXPRESSION\n</code></pre></p> <p>Example: <pre><code>label = 1\nlabel =3\n.label=2\n\n    assert label == 3\n\n\nlabel = 5\n    assert label == 5\n\nlabel &lt;&lt;= 1\n    assert label == 10\n</code></pre></p>"},{"location":"basm/directives/#equ","title":"EQU","text":"<p>Description: Assign an expression to a label. Assignement cannot be repeated  several times.</p> <p>Synopsis: <pre><code>LABEL = EXPRESSION\n</code></pre></p> <p>Example: <pre><code>label = 1\nlabel =3\n.label=2\n\n    assert label == 3\n\n\nlabel = 5\n    assert label == 5\n\nlabel &lt;&lt;= 1\n    assert label == 10\n</code></pre></p>"},{"location":"basm/directives/#let","title":"LET","text":"<p>Synopsis:</p> <pre><code>LET label = expression\n</code></pre> <p>Description: Explicit variable assignment. Equivalent to <code>label = expression</code> but with explicit LET keyword (BASIC-style).</p> <p>Example:</p> <pre><code>    ; LET directive for explicit variable assignment\n    let value = 42\n    let address = $4000\n\n    ; Use the variables\n    org address\n    ld a, value\n    ret\n</code></pre>"},{"location":"basm/directives/#map","title":"MAP","text":"<p>Synopsis:</p> <pre><code>MAP VALUE\nlabel #increment\n</code></pre> <p>Description: <code>MAP VALUE</code> defines a map counter to the required value. <code>#</code> is used to assign the value to a given label and increment it of the appropriate amount.</p> <p>Example:</p> <pre><code>    ; MAP directive\n    map $4000\n\nlabel1  #1      ; label1 = $4000, increment by 1\nlabel2  #2      ; label2 = $4001, increment by 2\nlabel3  #1      ; label3 = $4003, increment by 1\n\n    db label1, label2, label3\n    ret\n</code></pre>"},{"location":"basm/directives/#setn-next","title":"SETN, NEXT","text":"<p>Synopsis:</p> <pre><code>SETN value\nlabel NEXT increment\n</code></pre> <p>Description: Legacy directive for sequential label assignment. <code>MAP</code> directive is probably easier to use.</p> <p>Example:</p> <pre><code> ; http://www.aspisys.com/asm11man.htm\n\n org 0x100\n\n\ndata set $\n    assert data == 0x100\n\ndata1 setn  data ; data1 could be modified\ndata2 next data, 2 ; data2 cannot be modified\ndata3 next data\n\n    assert data1 == 0x100\n    assert data2 == 0x101\n    assert data3 == 0x103\n    assert data == 0x104\n</code></pre>"},{"location":"basm/directives/#undef","title":"UNDEF","text":"<p>Synopsis:</p> <pre><code>UNDEF label\n</code></pre> <p>Description: Undefine a previously defined label, allowing it to be redefined.</p> <p>Example:</p> <pre><code>    ; UNDEF directive\n    value = 42\n    db value\n\n    undef value  ; Undefine the label\n\n    value = 100  ; Can redefine now\n    db value\n\n    ret\n</code></pre>"},{"location":"basm/directives/#data-related","title":"Data related","text":""},{"location":"basm/directives/#byte-text-db-defb-dm-defm","title":"BYTE, TEXT, DB, DEFB, DM, DEFM","text":"<p>Synopsis:</p> <pre><code>DB|DEFB|BYTE|TEXT expression [, expression]*\nDM|DEFM string [, string]*\n</code></pre> <p>Description: Define byte(s) in memory. Can accept integers, characters, strings, or expressions.</p> <p>Example:</p> <pre><code>    ; defb tests\n    org 0x200\n\n    defb 1, 2, 3, 4\n    defb \"hello\", ' ', \"world\"\n    defb $, $ ; should generate 2 different values\n    db \"Hello world\", 0\n</code></pre>"},{"location":"basm/directives/#word-dw-defw","title":"WORD, DW, DEFW","text":"<p>Synopsis:</p> <pre><code>DW|DEFW|WORD expression [, expression]*\n</code></pre> <p>Description: Define 16-bit word(s) in memory (little-endian format).</p> <p>Example:</p> <pre><code>    ; WORD/DW/DEFW directive - define 16-bit words\n    org $4000\n\n    dw $1234\n    defw $ABCD\n    word $5678, $9ABC\n\n    ret\n</code></pre>"},{"location":"basm/directives/#ds-defs-fill-rmem","title":"DS, DEFS, FILL, RMEM","text":"<p>Synopsis:</p> <pre><code>DS|DEFS|FILL|RMEM size [, value]\n</code></pre> <p>Description: Reserve space in memory. If value is specified, fills the space with that value.</p> <p>Example:</p> <pre><code>    org 0x100\n\n\n    defs 5\n    defs 5, 8, 4\n    defs 5, 8, 4, 1\n</code></pre>"},{"location":"basm/directives/#abyte","title":"ABYTE","text":"<p>Synopsis:</p> <pre><code>ABYTE expression\n</code></pre> <p>Description: Define a byte and align it at the specified address or boundary.</p> <p>Example:</p> <pre><code>    ; ABYTE directive\n    org $4000\n\n    abyte 10, 100, 200\n\n    assert memory(0x4000) == 100+10\n    assert memory(0x4001) == 200+10\n    ret\n</code></pre>"},{"location":"basm/directives/#str","title":"STR","text":"<p>Description: STR encodes string in AMSDOS format (i.e., adds 0x80 to the last char) and stores its bytes in memory.</p> <p>Example:</p> <pre><code>    org 0x1000\n    defb \"hell\"\n    defb 'o' + 0x80\n\n    org 0x2000\n    str \"hello\"\n\n    org 0x3000\n    db \"Next one will be more complex\"\n    db \"   \\\" et voila\"\n    db \" \\\" et voila\"\n    db \"\\\" et voila\"\n\n    assert memory(0x1000) == memory(0x2000)\n    assert memory(0x1001) == memory(0x2001)\n    assert memory(0x1002) == memory(0x2002)\n    assert memory(0x1003) == memory(0x2003)\n</code></pre>"},{"location":"basm/directives/#charset","title":"CHARSET","text":"<p>Synopsis:</p> <pre><code>CHARSET \"filename\"\n</code></pre> <p>Description: Load a character set definition from a file for use in subsequent character encoding.</p> <p>Example:</p> <pre><code> org 0x100\n\n charset \"abcdefghijklmnopqrstuvwxyz\", 0\n charset \"AB\", 100\n db \"aA\"\n ASSERT memory(0x100) == 0x00\n ASSERT memory(0x101) == 100\n\n org 0x200\n charset\n db \"aA\"\n ASSERT memory(0x200) == 'a'\n ASSERT memory(0x201) == 'A' \n</code></pre>"},{"location":"basm/directives/#startingindex","title":"STARTINGINDEX","text":"<p>Synopsis:</p> <pre><code>STARTINGINDEX value\n</code></pre> <p>Description: Set the starting index for character encoding when using custom charsets.</p> <p>Example:</p> <pre><code>    ; STARTINGINDEX directive\n    startingindex 32\n\n    db 'A'  ; Will use starting index\n\n    ret\n</code></pre>"},{"location":"basm/directives/#module-and-namespace-directives","title":"Module and Namespace Directives","text":""},{"location":"basm/directives/#module-endmodule","title":"MODULE, ENDMODULE","text":"<p>Synopsis:</p> <pre><code>MODULE name\n  ... code ...\nENDMODULE\n</code></pre> <p>Description: Define a namespace module. Labels inside are prefixed with the module name.</p> <p>Example:</p> <pre><code>    MODULE graphics\nstart:\n    ld a, 0\n    ret\n    ENDMODULE\n\n    ; Access label from module\n    call graphics.start\n</code></pre>"},{"location":"basm/directives/#conditional-directives","title":"Conditional directives","text":""},{"location":"basm/directives/#if-else-endif","title":"IF, ELSE, ENDIF","text":"<p>Synopsis:</p> <pre><code>IF condition\n  ... code if true ...\n[ELSE\n  ... code if false ...]\nENDIF\n</code></pre> <p>Description: Conditional assembly based on expression evaluation at assembly time.</p> <p>Example:</p> <pre><code>    ; IF/ELSE/ENDIF directive\n    value = 1\n\n    if value == 1\n        ld a, 1\n    else\n        ld a, 0\n    endif\n\n    ret\n</code></pre>"},{"location":"basm/directives/#ifnot","title":"IFNOT","text":"<p>Synopsis:</p> <pre><code>IFNOT condition\n  ... code if false ...\nENDIF\n</code></pre> <p>Description: Opposite of IF - executes block if condition is false.</p> <p>Example:</p> <pre><code>    ; IFNOT directive\n    value = 0\n\n    ifnot value\n        ld a, 1  ; Executed because value is 0 (false)\n    endif\n\n    ret\n</code></pre>"},{"location":"basm/directives/#ifdef-ifndef","title":"IFDEF, IFNDEF","text":"<p>Synopsis:</p> <pre><code>IFDEF label\n  ... code if defined ...\nENDIF\n\nIFNDEF label\n  ... code if not defined ...\nENDIF\n</code></pre> <p>Description: Check if a label has ALREADY been defined before reading this directive.</p> <p>Example:</p> <pre><code>    ; IFDEF/IFNDEF directive\n    DEBUG = 1\n\n    ifdef DEBUG\n        db \"Debug mode\"\n    endif\n\n    ifndef RELEASE\n        db \"Not release\"\n    endif\n\n    ret\n</code></pre>"},{"location":"basm/directives/#ifusedifexist","title":"IFUSED/IFEXIST","text":"<p>Synopsis:</p> <pre><code>IFUSED label\nIFEXIST label    ; alias for IFUSED\n  ... code if label is used ...\nENDIF\n</code></pre> <p>Description: Check if a label is referenced anywhere in the code. IFEXIST is an alias for IFUSED. Useful for conditional inclusion of code.</p> <p>Example: <pre><code>    org 0x1000\n; 3 passes are needed there\n\n    ifused toto\ntoto\n        ret\n    endif\n\n    call toto\n\n; test\n</code></pre></p>"},{"location":"basm/directives/#ifnused","title":"IFNUSED","text":"<p>Synopsis:</p> <pre><code>IFNUSED label\n  ... code if label is NOT used ...\nENDIF\n</code></pre> <p>Description: Opposite of IFUSED. Executes block if label is never referenced.</p> <p>Example:</p> <pre><code>    ; Define a label\nunused_label:\n    nop\n\nused_label:\n    nop\n\n    ; This block is assembled because unused_label is not referenced\n    ifnused unused_label\n        ld a, 1\n    endif\n\n    ; This block is NOT assembled because used_label is referenced below\n    ifnused used_label\n        ld b, 2\n    endif\n\n    ; Use one of the labels\n    jp used_label\n</code></pre>"},{"location":"basm/directives/#elseif-elseifdef-elseifndef-elseifnot-elseifusedelseifexist","title":"ELSEIF, ELSEIFDEF, ELSEIFNDEF, ELSEIFNOT, ELSEIFUSED/ELSEIFEXIST","text":"<p>Synopsis:</p> <pre><code>IF condition1\n  ... code ...\nELSE IF condition2        ; or ELSEIF\n  ... code ...\nELSE IFDEF label          ; or ELSEIFDEF\n  ... code ...\nELSE IFNDEF label         ; or ELSEIFNDEF\n  ... code ...\nELSE IFUSED label         ; or ELSEIFUSED\n  ... code ...\nELSE IFNOT condition      ; or ELSEIFNOT\n  ... code ...\nELSE\n  ... code ...\nENDIF\n</code></pre> <p>Description: Chained conditional directives. Allow multiple conditions without nesting. Can be written as two words (ELSE IF) or one word (ELSEIF). Available variants:</p> <ul> <li>ELSEIF - else + if combined</li> <li>ELSEIFDEF - else + ifdef combined  </li> <li>ELSEIFNDEF - else + ifndef combined</li> <li>ELSEIFNOT - else + ifnot combined</li> <li>ELSEIFUSED/ELSEIFEXIST - else + ifused combined (ELSEIFEXIST is an alias)</li> </ul> <p>Example:</p> <pre><code>    ; Chained conditionals with ELSEIF\n    value = 2\n\n    if value == 1\n        db 1\n    elseif value == 2\n        db 2\n    elseif value == 3\n        db 3\n    else\n        db 0\n    endif\n</code></pre>"},{"location":"basm/directives/#nested-conditions","title":"Nested conditions","text":"<p>Conditions can be nested.</p> <p>Example:</p> <pre><code>    org 0x100\n\n    if 0 == 1\n        fail \"not reachable\"\n    else ifdef toto\n        fail \"not reachable\"\n    else ifndef toto\n        print \"reached\"\n        db 1\n    else\n        fail \"not reachable\"\n    endif\n</code></pre>"},{"location":"basm/directives/#breakpoint","title":"BREAKPOINT","text":"<p>Synopsis:</p> <pre><code>BREAKPOINT [expression]\n</code></pre> <p>Description: Insert a breakpoint in the generated snapshot for debugging. Optional expression can specify a condition.</p> <p>Example:</p> <pre><code>    ; BREAKPOINT directive\n    org $4000\n\n    ld a, 5\n    breakpoint  ; Debugger will stop here\n    ld b, 10\n\n    ret\n</code></pre>"},{"location":"basm/directives/#fail","title":"FAIL","text":"<p>Synopsis:</p> <pre><code>FAIL [message]\n</code></pre> <p>Description: Force assembly to fail with an optional error message. Useful for compile-time validation.</p> <p>Example:</p> <pre><code>    ; Example of FAIL directive\n    ; This file demonstrates the syntax but would fail if assembled\n    ; Uncomment the following lines to test failure:\n\n    ; IFDEF DEBUG\n    ; FAIL \"Debug mode not supported\"\n    ; ENDIF\n\n    ; This code assembles successfully\n    nop\n</code></pre>"},{"location":"basm/directives/#warning","title":"WARNING","text":"<p>Synopsis:</p> <pre><code>WARNING [message [, expressions...]]\n</code></pre> <p>Description: Emit a warning message without stopping assembly. Unlike FAIL, assembly continues after a WARNING. Useful for highlighting potential issues or deprecated features while still producing output.</p> <p>Example:</p> <pre><code>    ; Test WARNING directive\n    ; WARNING emits a warning message without stopping assembly\n\n    org 0x4000\n\n    ; Basic warning\n    WARNING \"This is a test warning\"\n\n    ; Warning with expressions\nvalue = 42\n    WARNING \"Value is \", value\n\n    ; Warning with formatted expressions\n    WARNING \"Value in hex: \", {HEX} value\n    WARNING \"Value in binary: \", {BIN} value\n\n    ; Conditional warning\n    IF value &gt; 40\n        WARNING \"Value exceeds threshold\"\n    ENDIF\n\n    ; Warning vs FAIL comparison\n    ; WARNING continues assembly\n    WARNING \"This is just a warning\"\n    ld a, 1    ; This instruction will be assembled\n\n    ; FAIL would stop assembly\n    ; FAIL \"This would stop assembly\"    ; Commented out\n\n    ; Test multiple warnings\n    REPEAT 3, i\n        WARNING \"Iteration \", {i}\n    ENDREPEAT\n\n    ld b, 2\n</code></pre>"},{"location":"basm/directives/#stop-end","title":"STOP, END","text":"<p>Synopsis:</p> <pre><code>STOP\nEND\n</code></pre> <p>Description: Stop assembly processing at this point. Useful for conditional assembly or debugging.</p> <p>Example:</p> <pre><code>    ; STOP/END directive\n    org $4000\n\n    ld a, 5\n    ret\n\n    stop  ; Assembly stops here\n\n    ; This code is never assembled\n    ld b, 10\n</code></pre>"},{"location":"basm/directives/#switch-endswitch","title":"SWITCH, ENDSWITCH","text":"<p>Synopsis:</p> <pre><code>SWITCH expression\nCASE value1\n  ... code for value1 ...\n  [BREAK]\nCASE value2\n  ... code for value2 ...\n  [BREAK]\nDEFAULT\n  ... code if no match ...\nENDSWITCH\n</code></pre> <p>Description: Multi-way conditional based on expression value. CASE defines match values, DEFAULT handles unmatched cases. BREAK exits the switch early.</p> <p>Example: <pre><code>    org 0x100\n\n    switch 3\n    ; one comment\n    case 1\n        db 1\n        break\n    case 3\n        db 3\n    ; another comment\n    case 4\n        db 4\n        break\n    case 5\n        db 5\n    default\n        db 6\n    endswitch\n\n\n\n        switch 5\n    case 1\n        db 1\n        break\n    case 3\n        db 3\n    case 4\n        db 4\n        break\n    case 5\n        db 5\n    default\n        db 6\n    endswitch\n</code></pre></p>"},{"location":"basm/directives/#code-duplication-directives","title":"Code duplication directives","text":""},{"location":"basm/directives/#for","title":"FOR","text":"<p>Synopsis:</p> <pre><code>FOR &lt;variable&gt;, EXPRESSION [, EXPRESSION]*\n  ... LISTING ...\nENDFOR|FEND\n</code></pre> <p>Description: Iterate over a list of values, executing the block for each value. The variable takes on each value in the list.</p> <p>Example:</p> <pre><code>    ; Takes inspiration from BRASS assembler\n\n    for count, 0, 10, 3\n        db {count}\n    endfor\n\n    for x, 0, 3\n        for y, 0, 3\n            db {x}*4 + {y}\n        fend\n    endfor\n</code></pre>"},{"location":"basm/directives/#while","title":"WHILE","text":"<p>Synopsis:</p> <pre><code>WHILE condition\n  ... LISTING ...\nENDWHILE|WEND\n</code></pre> <p>Description: Repeat a block of code while the condition is true. Condition is evaluated before each iteration.</p> <p>Example:</p> <pre><code>    ; WHILE directive\n    counter = 0\n\n    while counter &lt; 5\n        db counter\ncounter = counter + 1\n    endwhile\n\n    ret\n</code></pre>"},{"location":"basm/directives/#repeat-rep-rept","title":"REPEAT, REP, REPT","text":"<p>Synopsis:</p> <pre><code>REPEAT count [, counter [, start]]\n  ... inner listing ...\nREND|ENDR|ENDREPEAT\n</code></pre> <p>Description: Repeat a block of code a fixed number of times. Optional counter variable tracks iteration (0-based by default, or from start value).</p> <p>Aliases: REP, REPT (same as REPEAT)</p> <p>Example:</p> <pre><code>start\n    repeat 3, count\n        incbin 'AZERTY{{count}}.TXT'\n    rend\n\n\n    assert char(memory(start+0)) == 'A'\n    assert char(memory(start+1)) == 'Z'\n    assert char(memory(start+2)) == 'E'\n    assert char(memory(start+3)) == 'R'\n    assert char(memory(start+4)) == 'T'\n    assert char(memory(start+5)) == 'Y'\n    assert char(memory(start+6)) == 'U'\n    assert char(memory(start+7)) == 'I'\n    assert char(memory(start+8)) == 'O'\n    assert char(memory(start+9)) == 'P'\n\n    assert char(memory(start+10)) == 'Q'\n    assert char(memory(start+11)) == 'S'\n    assert char(memory(start+12)) == 'D'\n    assert char(memory(start+13)) == 'F'\n    assert char(memory(start+14)) == 'G'\n    assert char(memory(start+15)) == 'H'\n    assert char(memory(start+16)) == 'J'\n    assert char(memory(start+17)) == 'K'\n    assert char(memory(start+18)) == 'L'\n    assert char(memory(start+19)) == 'M'\n\n\n    assert char(memory(start+20)) == 'W'\n    assert char(memory(start+21)) == 'X'\n    assert char(memory(start+22)) == 'C'\n    assert char(memory(start+23)) == 'V'\n    assert char(memory(start+24)) == 'B'\n    assert char(memory(start+25)) == 'N'\n</code></pre>"},{"location":"basm/directives/#iterate","title":"ITERATE","text":"<p>Synopsis:</p> <pre><code>ITERATE COUNTER, EXPR [, EXPR]*\n  ... INNER LISTING ...\nIEND|ENDITERATE\n</code></pre> <p>Description: Iterate over expressions, evaluating each expression after having generated the code of the previous one. Take that into account if expressions use $.</p> <p>Example:</p> <pre><code>    iterate idx, $4000, $4010, $4020, $4030\n        dw {idx}\n    iend\n\n    ret\n</code></pre>"},{"location":"basm/directives/#code-and-data-generation-directives","title":"Code and data generation directives","text":""},{"location":"basm/directives/#macro","title":"MACRO","text":"<p>Synopsis:</p> <pre><code>MACRO name [param1, param2, ...]\n  ... macro body ...\nENDMACRO|ENDM\n\n; Call macro\nname [arg1, arg2, ...]\n</code></pre> <p>Description: Define a reusable block of code that can be called with parameters. Macros are expanded inline at each call site.</p> <p>Example:</p> <pre><code>    macro add_to_a value\n        add a, {value}\n    endm\n\n    ld a, 5\n    add_to_a(10)\n    add_to_a(3)\n</code></pre>"},{"location":"basm/directives/#struct","title":"STRUCT","text":"<p>Synopsis:</p> <pre><code>STRUCT &lt;name&gt;\n  &lt;field1&gt; DB|DW|STR|&lt;other struct&gt; [&lt;value&gt;]\n  ...\n  &lt;fieldn&gt; DB|DW|&lt;other struct&gt; [&lt;value&gt;]\nENDSTRUCT\n\n; Create instance\n[&lt;label&gt;:] &lt;name&gt; &lt;arg1&gt;, ... , &lt;argn&gt;\n</code></pre> <p>Description: Structures allow to define data blocks with semantics. In practice, they replace bunches of <code>DEFB</code>, <code>DEFW</code> directives and enforce checks at assembling (you cannot add more data than expected or forget some). If a label is used before the use of a struct, it is necessary to postfix it by <code>:</code>. Otherwise the assembler thinks the label is a macro or structure call.</p> <p>Example:</p> <pre><code>    ; STRUCT directive\n    struct Point\n        x db\n        y db\n    endstruct\n\n    Point 10, 20    ; Create instance with x=10, y=20\n    Point 30, 40    ; Another instance\n\n    ret\n</code></pre>"},{"location":"basm/directives/#data-loading-and-transformation-directives","title":"Data loading and transformation directives","text":"<p>Filenames are stored in a string. These string can do expansion of formulas embedded in {}.</p> <p>basm embeds some files in its executable, they are access under the name \"inner://\" :</p>"},{"location":"basm/directives/#lzapu-lz4-lz48-lz49-lzexo-lzsa1-lzsa2-lzupkr-lzshrinkler-lzx0-lzx0_backward-lzx7-incshrinkler-incupkr-inczx0-inczx0_backward","title":"LZAPU, LZ4, LZ48, LZ49, LZEXO, LZSA1, LZSA2, LZUPKR, LZSHRINKLER, LZX0, LZX0_BACKWARD, LZX7, INCSHRINKLER, INCUPKR, INCZX0, INCZX0_BACKWARD","text":"<p>Synopsis (as block directives):</p> <pre><code>LZ4|LZ48|LZ49|LZAPU|LZEXO|LZX0|LZX7|LZSHRINKLER\n  ... data to crunch ...\nLZCLOSE\n</code></pre> <p>Synopsis (as include directives):</p> <pre><code>INCAPU|INCLZ4|INCL48|INCL49|INCEXO|INCLZSA1|INCLZSA2|INCUPKR|INCSHRINKLER|INCZX0 \"filename\" [[, SKIP], AMOUNT]\nINCZX0_BACKWARD \"filename\" [[, SKIP], AMOUNT]\n</code></pre> <p>Description: Crunch (compress) data using various compression algorithms. Can be used as block directives (crunch inline data) or include directives (load and crunch file).</p> <p>Supported crunchers:</p> <ul> <li>LZ4 - LZ4 compression</li> <li>LZ48 - LZ4 variant optimized for Z80</li> <li>LZ49 - Another LZ4 variant</li> <li>LZAPU / INCAPU - Aplib compression</li> <li>LZEXO / INCEXO - Exomizer compression  </li> <li>LZSA1 / INCLZSA1 - LZSA1 compression</li> <li>LZSA2 / INCLZSA2 - LZSA2 compression</li> <li>LZUPKR / INCUPKR - Upkr compression</li> <li>LZSHRINKLER / INCSHRINKLER - Shrinkler compression</li> <li>LZX0 / INCZX0 - ZX0 compression (forward)</li> <li>LZX0_BACKWARD / INCZX0_BACKWARD - ZX0 compression (backward)</li> <li>LZX7 - ZX7 compression</li> </ul> <p>Example: <pre><code>    org 0x100\n\n\n    ld hl, CS_START\n    ld de, 0xc000\n    call aplib.depack\n    jp $\n\nCS_START\n    LZAPU\nINNER_START\n        defs 100\nINNER_STOP\n    LZCLOSE\nCS_STOP\n\n    assert INNER_STOP - INNER_START == 100\n    assert CS_STOP - CS_START &lt; 100\n\n    include \"inner://unaplib.asm\" namespace \"aplib\"\n</code></pre></p> <p><code>basm</code> automatically replaces the content of some automatic variables after crunching data. They can help in the uncrunch process for some uncrunchers (mainly the backward ones):</p> <ul> <li><code>BASM_LATEST_CRUNCH_INPUT_DATA_SIZE</code> contains the size of the data BEFORE crunching.</li> <li><code>BASM_LATEST_CRUNCH_OUTPUT_DATA_SIZE</code> contains the size of the data AFTER crunching.</li> <li><code>BASM_LATEST_CRUNCH_DELTA</code> contains the delta value of the compressor. -1 if does not exist</li> </ul>"},{"location":"basm/directives/#incbin-binclude","title":"INCBIN, BINCLUDE","text":"<p>Synopsis:</p> <pre><code>INCBIN|BINCLUDE \"fname\" [[, SKIP], AMOUNT]\n</code></pre> <p>Description: Include binary file content. Fname can be built with variables. File is loaded fully in memory before being sliced depending on arguments.</p> <p>Example:</p> <pre><code>    ; INCBIN/BINCLUDE directive\n    org $4000\n\n    ; Include binary file\n    incbin \"good_all.bin\"\n\n    ret\n</code></pre>"},{"location":"basm/directives/#include-read","title":"INCLUDE, READ","text":"<p>Synopsis:</p> <pre><code>INCLUDE|READ [ONCE] \"&lt;fname&gt;\" [AS|MODULE|NAMESPACE \"&lt;module&gt;\"]\n</code></pre> <p>Description: Include another source file. Fname can be built with variables. Files prefixed by <code>inner://</code> are embedded by <code>BASM</code>. In case of conditional assembling, inclusion are only done in the executed branch.</p> <p>Example:</p> <pre><code>    ; INCLUDE/READ directive\n    org $4000\n\n    ; Include another source file\n    include \"good_db.asm\"\n\n    ret\n</code></pre>"},{"location":"basm/directives/#data-saving-and-export","title":"Data saving and export","text":""},{"location":"basm/directives/#output","title":"OUTPUT","text":"<p>Synopsis:</p> <pre><code>OUTPUT \"filename\"\n</code></pre> <p>Description: Set the output filename for the assembled code. This directive allows you to specify where the assembled binary should be written.</p> <p>Example:</p> <pre><code>    ; Test OUTPUT directive\n    ; OUTPUT sets the output filename for the assembled code\n\n    ; Set output file\n    OUTPUT \"testoutput.bin\"\n\n    org 0x4000\n\n    ld a, 1\n    ld b, 2\n    ld c, 3\n\n    ; The assembled code should go to testoutput.bin\n    ; instead of the default output file\n</code></pre>"},{"location":"basm/directives/#export-noexport","title":"EXPORT, NOEXPORT","text":"<p>Synopsis:</p> <pre><code>EXPORT [label]\nNOEXPORT\n</code></pre> <p>Description: Control which symbols are exported to external files. EXPORT makes labels visible externally, NOEXPORT hides them.</p> <p>Example:</p> <pre><code>    ; EXPORT/NOEXPORT directive\n    export start\n    export my_data\n\n    org $4000\nstart:\n    ld a, 5\n\nnoexport\nmy_private_label:\n    nop\n\n    export\nmy_data:\n    db 1, 2, 3\n\n    ret\n</code></pre>"},{"location":"basm/directives/#save-write","title":"SAVE, WRITE","text":"<p>Synopsis:</p> <pre><code>SAVE \"&lt;fname&gt;\", [[[START], [SIZE]], AMSDOS|BASIC|TAPE]\nSAVE \"&lt;fname&gt;\", START, SIZE, DSK, \"&lt;fname.dsk&gt;\" [, SIDE]\nSAVE \"&lt;fname&gt;\", START, SIZE, HFE, \"&lt;fname.hfe&gt;\" [, SIDE]\nSAVE \"&lt;fname&gt;\", START, SIZE, DISC, \"&lt;fname.hfe&gt;\"|\"&lt;fname.dsk&gt;\" [, SIDE]\n</code></pre> <p>Description: Save assembled data to a file in various formats (AMSDOS, DSK, HFE). TAPE option is not coded. Other options are not intensively tested.</p> <p>Example:</p> <pre><code>    ; SAVE/WRITE directive\n    org $4000\n\nstart:\n    ld a, 5\n    ret\n\n    save \"output.bin\", start, 10, amsdos\n</code></pre>"},{"location":"basm/directives/#debug-directives","title":"Debug directives","text":""},{"location":"basm/directives/#pause","title":"PAUSE","text":"<p>Synopsis:</p> <pre><code>PAUSE\n</code></pre> <p>Description: Insert a pause during assembly. Can be useful for interactive debugging or inspection during multi-pass assembly.</p> <p>Example:</p> <pre><code>    ; PAUSE directive example\n    ; Note: PAUSE may halt assembly for user interaction\n    ; Commented out to allow automatic testing\n\n    org $4000\n    ld a, 5\n\n    ; pause\n\n    ld b, 10\n    ret\n</code></pre>"},{"location":"basm/directives/#assert","title":"ASSERT","text":"<p>Synopsis:</p> <pre><code>ASSERT BOOLEAN_EXPRESSION [, PRINTABLE_EXPRESSION]*\n</code></pre> <p>Description: Validate a condition at assembly time. If the condition is false, assembly fails with an optional message.</p> <p>Example:</p> <pre><code>    ; ASSERT directive\n    value = 42\n\n    assert value == 42, \"Value must be 42\"\n    assert value &gt; 0\n\n    db value\n    ret\n</code></pre>"},{"location":"basm/directives/#print","title":"PRINT","text":"<p>Synopsis:</p> <pre><code>PRINT expression [, expression]*\n</code></pre> <p>Description: Print expressions to the console during assembly. Useful for debugging and displaying assembly-time values.</p> <p>Example:</p> <pre><code>    ; PRINT directive\n    value = 42\n\n    print \"Value is: \", value\n    print \"Assembly complete\"\n\n    db value\n    ret\n</code></pre>"},{"location":"basm/directives/#amstrad-cpc-related-directives","title":"Amstrad CPC related directives","text":""},{"location":"basm/directives/#ticker","title":"TICKER","text":"<p>Synopsis:</p> <pre><code>TICKER START variable\n  ... instructions ...\nTICKER STOP\n</code></pre> <p>Description: Compute the execution duration of a block of code. The variable will contain the number of T-states (cycles) required to execute the code.</p> <p>Example:</p> <pre><code>    ; TICKER directive\n    org $4000\n\n    ticker start timing_var\n        ld a, 5\n        ld b, 10\n        add a, b\n    ticker stop\n\n    ; timing_var now contains execution time\n    db timing_var\n    ret\n</code></pre>"},{"location":"basm/directives/#waitnops","title":"WAITNOPS","text":"<p>Synopsis:</p> <pre><code>WAITNOPS count\n</code></pre> <p>Description: Generate instructions that wait for the specified number of NOPs without modifying registers or memory. Currently generates NOP instructions, but may use optimized instruction sequences in the future.</p> <p>Example:</p> <pre><code>    ; WAITNOPS directive\n    org $4000\n\n    ld a, 5\n    waitnops 100  ; Wait for 100 NOPs\n    ld b, 10\n\n    ret\n</code></pre>"},{"location":"basm/directives/#locomotive-endlocomotive","title":"LOCOMOTIVE, ENDLOCOMOTIVE","text":"<p>Synopsis:</p> <pre><code>LOCOMOTIVE\n  BASIC code lines\nENDLOCOMOTIVE\n</code></pre> <p>Description: Embed Locomotive BASIC code in the assembly. Useful for creating loaders or bootstrap code.</p> <p>Example: <pre><code>    LOCOMOTIVE start\n10 REM Basic loader of binary exec\n20 REM yeah !!\n30 call {start}\n    ENDLOCOMOTIVE\n\nstart\n        ld hl, txt\n.loop\n        ld a, (hl)\n        or a : jr z, .end\n        call #bb5a\n        inc hl\n        jr .loop\n.end\n        jp $\n\ntxt\n    db \"Hello world\", 0\n\n    print \"LOADER START IN \", {hex}start\n    save \"LOADER.BAS\",,,BASIC\n</code></pre></p>"},{"location":"basm/directives/#snaset","title":"SNASET","text":"<p>Synopsis:</p> <pre><code>SNASET FLAG, VALUE\n</code></pre> <p>Description: Set CPU register or hardware state values in the generated snapshot. All register names must be prefixed with <code>Z80_</code>.</p>"},{"location":"basm/directives/#z80-cpu-registers","title":"Z80 CPU Registers","text":"<p>Main registers: - <code>Z80_AF</code>, <code>Z80_BC</code>, <code>Z80_DE</code>, <code>Z80_HL</code> (16-bit register pairs) - <code>Z80_A</code>, <code>Z80_F</code>, <code>Z80_B</code>, <code>Z80_C</code>, <code>Z80_D</code>, <code>Z80_E</code>, <code>Z80_H</code>, <code>Z80_L</code> (8-bit registers)</p> <p>Alternate registers (shadow registers): - <code>Z80_AFX</code>, <code>Z80_BCX</code>, <code>Z80_DEX</code>, <code>Z80_HLX</code> (16-bit alternate pairs) - <code>Z80_AX</code>, <code>Z80_FX</code>, <code>Z80_BX</code>, <code>Z80_CX</code>, <code>Z80_DX</code>, <code>Z80_EX</code>, <code>Z80_HX</code>, <code>Z80_LX</code> (8-bit alternates)</p> <p>Index registers: - <code>Z80_IX</code>, <code>Z80_IY</code> (16-bit index registers) - <code>Z80_IXL</code>, <code>Z80_IXH</code>, <code>Z80_IYL</code>, <code>Z80_IYH</code> (8-bit index register halves)</p> <p>Special registers: - <code>Z80_SP</code> (Stack Pointer) - <code>Z80_PC</code> (Program Counter) - <code>Z80_I</code> (Interrupt Vector) - <code>Z80_R</code> (Memory Refresh) - <code>Z80_IFF0</code>, <code>Z80_IFF1</code> (Interrupt Flip-Flops) - <code>Z80_IM</code> (Interrupt Mode: 0, 1, or 2)</p>"},{"location":"basm/directives/#gate-array-registers","title":"Gate Array Registers","text":"<ul> <li><code>GA_PEN</code> - Selected pen number</li> <li><code>GA_PAL:n</code> - Palette color n (0-16), requires index</li> <li><code>GA_ROMCFG</code> - ROM/screen mode configuration</li> <li><code>GA_RAMCFG</code> - RAM configuration</li> <li><code>GA_MULTIMODE:n</code> - Multi-mode register n, requires index</li> <li><code>GA_VSC</code> - Vertical sync counter</li> <li><code>GA_ISC</code> - Interrupt sync counter</li> </ul>"},{"location":"basm/directives/#crtc-registers","title":"CRTC Registers","text":"<ul> <li><code>CRTC_SEL</code> - Selected CRTC register</li> <li><code>CRTC_REG:n</code> - CRTC register n (0-17), requires index</li> <li><code>CRTC_TYPE</code> - CRTC type (0=HD6845S/UM6845, 1=UM6845R, 2=MC6845, 3=AMS40489, 4=Pre-ASIC)</li> <li><code>CRTC_HCC</code> - Horizontal character counter</li> <li><code>CRTC_CLC</code> - Character line counter</li> <li><code>CRTC_RLC</code> - Raster line counter</li> <li><code>CRTC_VAC</code> - Vertical adjustment counter</li> <li><code>CRTC_VSWC</code> - Vertical sync width counter</li> <li><code>CRTC_HSWC</code> - Horizontal sync width counter</li> <li><code>CRTC_STATE</code> - CRTC state flags</li> </ul>"},{"location":"basm/directives/#ppi-8255-registers","title":"PPI (8255) Registers","text":"<ul> <li><code>PPI_A</code> - Port A</li> <li><code>PPI_B</code> - Port B</li> <li><code>PPI_C</code> - Port C</li> <li><code>PPI_CTL</code> - Control register</li> </ul>"},{"location":"basm/directives/#psg-ay-3-8912-registers","title":"PSG (AY-3-8912) Registers","text":"<ul> <li><code>PSG_SEL</code> - Selected PSG register</li> <li><code>PSG_REG:n</code> - PSG register n (0-15), requires index</li> </ul>"},{"location":"basm/directives/#other-hardware","title":"Other Hardware","text":"<ul> <li><code>ROM_UP</code> - Upper ROM number</li> <li><code>CPC_TYPE</code> - CPC type (0=464, 1=664, 2=6128, 3=464+, 4=6128+, 5=KC Compact, 6=Unknown)</li> <li><code>INT_NUM</code> - Interrupt number</li> <li><code>INT_REQ</code> - Interrupt request flag</li> <li><code>FDD_MOTOR</code> - Floppy disk motor state</li> <li><code>FDD_TRACK</code> - Floppy disk current track</li> <li><code>PRNT_DATA</code> - Printer data port</li> </ul> <p>Note: Flags with <code>:n</code> suffix (like <code>GA_PAL:0</code>, <code>CRTC_REG:1</code>, <code>PSG_REG:7</code>) require an index to specify which register.</p> <p>Example:</p> <pre><code>    ; Snapshot generation example\n    buildsna \n\n    org $8000\n    ld a, 42\n    ret\n\n    ; Set snapshot registers (must use Z80_ prefix)\n    snaset Z80_PC, $8000\n    snaset Z80_SP, $C000\n    snaset Z80_AF, $0000\n    snaset Z80_AFX, $0000  ; Alternate AF register\n\n    ; Set CRTC (display controller) registers\n    snaset CRTC_SEL, 1      ; Selected CRTC register index\n    snaset CRTC_REG:0, 63   ; CRTC register 0 (Horizontal Total)\n    snaset CRTC_REG:1, 40   ; CRTC register 1 (Horizontal Displayed)\n    snaset CRTC_HCC, 10     ; Horizontal character counter\n    snaset CRTC_CLC, 5      ; Character-line counter\n    snaset CRTC_TYPE, 0     ; CRTC type: 0 = HD6845S/UM6845\n    snaset CRTC_STATE, 255  ; CRTC internal state\n\n    ; Set Gate Array palette (indexed flags)\n    snaset GA_PAL:0, $54    ; Palette entry 0\n    snaset GA_PAL:1, $44    ; Palette entry 1\n\n    ; Build the snapshot\n</code></pre>"},{"location":"basm/directives/#snainit-snapinit","title":"SNAINIT, SNAPINIT","text":"<p>Synopsis:</p> <pre><code>SNAINIT \"template.sna\"\n</code></pre> <p>Description: Initialize snapshot generation from a template snapshot file. The template provides the initial memory and register state. Must be called before using SNASET or other snapshot directives.</p> <p>Example:</p> <pre><code>    ; SNAINIT/SNAPINIT directive\n    snainit \"../cpclib-sna/src/cpc6128.sna\" \n\n\n    org $4000\n    ld a, 5\n    ret\n</code></pre>"},{"location":"basm/directives/#buildsna","title":"BUILDSNA","text":"<p>Synopsis:</p> <pre><code>BUILDSNA \"filename.sna\"\n</code></pre> <p>Description: Generate an Amstrad CPC snapshot file with the assembled code and configured registers. See SNASET example for complete usage.</p>"},{"location":"basm/directives/#buildcpr","title":"BUILDCPR","text":"<p>Synopsis:</p> <pre><code>BUILDCPR \"filename.cpr\"\n</code></pre> <p>Description: Generate a cartridge (CPR) file for the CPC Plus/GX4000.</p> <p>Example:</p> <pre><code>    buildcpr\n\n    bank 0\n    print {hex}$\n    print {hex}$$\n    db 'A'\n\n\n    bank 1\n    org 0x8000\n    print {hex}$\n    print {hex}$$\n    db 'B'\n\n    ;assert 0 == 1 =&gt; msut raise an assertion failure when uncommented\n</code></pre>"},{"location":"basm/directives/#run","title":"RUN","text":"<p>Synopsis:</p> <pre><code>RUN address\n</code></pre> <p>Description: Set the execution address for the assembled program in a snapshot.</p> <p>Example:</p> <pre><code>    ; RUN directive\n    org $4000\n\n    ld a, 5\n    ret\n\n    run $4000  ; Set execution address\n</code></pre>"},{"location":"basm/directives/#ent","title":"ENT","text":"<p>Synopsis:</p> <pre><code>ENT address\n</code></pre> <p>Description: Set the entry point for AMSDOS files.</p> <p>Example:</p> <pre><code>    ; ENT directive\n    org $4000\n\n    ld a, 5\n    ret\n\n    ent $4000  ; Set entry point for AMSDOS\n</code></pre>"},{"location":"basm/directives/#assembler-control-directives","title":"Assembler Control Directives","text":""},{"location":"basm/directives/#asmcontrol","title":"ASMCONTROL","text":"<p>Synopsis:</p> <pre><code>ASMCONTROL PRINT_PARSE, expression [, expression]*\nASMCONTROL PRINT_ANY_PASS, expression [, expression]*\n</code></pre> <p>Description: Control assembler behavior during assembly. PRINT_PARSE prints expressions during the parsing pass. PRINT_ANY_PASS prints expressions during any assembly pass.</p> <p>Example:</p> <pre><code>    ; ASMCONTROL directive - print during parsing\n    org $4000\n    asmcontrol PRINT_PARSE, \"Assembling at address: \", $\n\n    ld a, 10\n    asmcontrol PRINT_ANY_PASS, \"Value loaded: \", 10\n    ret\n</code></pre>"},{"location":"basm/directives/#asmcontrolenv-endasmcontrolenv","title":"ASMCONTROLENV, ENDASMCONTROLENV","text":"<p>Synopsis:</p> <pre><code>ASMCONTROLENV SET_MAX_NB_OF_PASSES = expression\n  ... code with limited assembly passes ...\nENDASMCONTROLENV\n</code></pre> <p>Description: Create a block with a maximum number of assembly passes. This restricts the assembler to complete the enclosed code within the specified number of passes.</p> <p>Example:</p> <pre><code>    ; ASMCONTROLENV example - limit number of passes\n    org $4000\n\n    asmcontrolenv SET_MAX_NB_OF_PASSES = 2\n        ; Code that must assemble in 2 passes or fewer\n        nop\n        ld a, 5\n    endasmcontrolenv\n\n    ret\n</code></pre>"},{"location":"basm/directives/#import","title":"IMPORT","text":"<p>Synopsis:</p> <pre><code>IMPORT \"filename\"\n</code></pre> <p>Description: Import symbols from an external symbol file.</p> <p>Example:</p> <pre><code>    ; IMPORT directive example\n    ; Imports symbols from an external file\n    ; Note: This requires an actual symbol file to work\n    ; Commented out for testing\n\n    ; import \"symbols.sym\"\n\n    org $4000\n    nop\n    ret\n</code></pre>"},{"location":"basm/directives/#function-endfunction","title":"FUNCTION, ENDFUNCTION","text":"<p>Synopsis:</p> <pre><code>FUNCTION name(param1, param2, ...)\n  ... function body ...\n  RETURN result\nENDFUNCTION\n</code></pre> <p>Description: Define a custom function that can be called in expressions. Similar to macros but returns a value.</p> <p>Example:</p> <pre><code>    FUNCTION square, x\n        RETURN {x} * {x}\n    ENDFUNCTION\n\n    org $4000\n    ; Use the function\n    db square(5)\n    db square(10)\n\n    ; Verify with assertions\n    assert square(5) == 25\n    assert square(10) == 100\n    assert memory($4000) == 25\n    assert memory($4001) == 100\n</code></pre>"},{"location":"basm/directives/#return","title":"RETURN","text":"<p>Synopsis:</p> <pre><code>RETURN expression\n</code></pre> <p>Description: Return a value from a function definition. Can only be used within FUNCTION blocks, not in macros. The expression is evaluated and becomes the return value of the function.</p> <p>Example:</p> <pre><code>    ; RETURN directive in function\n    function get_value\n        return 42\n    endfunction\n\n    org $4000\n    db get_value()  ; Returns 42\n    ret\n</code></pre>"},{"location":"basm/expression-types/","title":"Expression Data Types","text":"<p>Basm supports several data types in expressions.</p>"},{"location":"basm/expression-types/#integer-types","title":"Integer Types","text":"<p>Integers can be written in multiple formats:</p> <ul> <li>Decimal: <code>42</code>, <code>255</code></li> <li>Hexadecimal: <code>$FF</code>, <code>#ABCD</code>, <code>&amp;CAFE</code>, <code>0x1234</code>, <code>0X5678</code></li> <li>Binary: <code>%11001100</code>, <code>0b10101010</code>, <code>0B11110000</code> </li> <li>Octal: <code>0o377</code>, <code>0O177</code>, <code>@377</code></li> <li>Character: <code>'A'</code> (evaluates to ASCII value 65)</li> </ul> <p>All numeric formats are demonstrated in the test file:</p> <pre><code>    ; Test various numeric base representations\n    ; All of these should represent the same values\n\n    org $4000\n\n    ; === Value 255 in different bases ===\ndecimal_255:\n    db 255              ; Decimal\n    assert memory(decimal_255) == 255\n\nhex_dollar_255:\n    db $FF              ; Hexadecimal with $\n    assert memory(hex_dollar_255) == 255\n\nhex_0x_255:\n    db 0xFF             ; Hexadecimal with 0x prefix\n    assert memory(hex_0x_255) == 255\n\nhex_hash_255:\n    db #FF              ; Hexadecimal with # prefix\n    assert memory(hex_hash_255) == 255\n\nhex_ampersand_255:\n    db &amp;FF              ; Hexadecimal with &amp; prefix\n    assert memory(hex_ampersand_255) == 255\n\nbinary_255:\n    db %11111111        ; Binary with %\n    assert memory(binary_255) == 255\n\nbinary_0b_255:\n    db 0b11111111       ; Binary with 0b prefix\n    assert memory(binary_0b_255) == 255\n\noctal_255:\n    db 0o377            ; Octal with 0o prefix\n    assert memory(octal_255) == 255\n\noctal_at_255:\n    db @377             ; Octal with @ prefix\n    assert memory(octal_at_255) == 255\n\n    ; Verify all representations are equal\n    assert 255 == $FF\n    assert 255 == 0xFF\n    assert 255 == #FF\n    assert 255 == &amp;FF\n    assert 255 == %11111111\n    assert 255 == 0b11111111\n    assert 255 == 0o377\n    assert 255 == @377\n\n\n    ; === Value 42 in different bases ===\ndecimal_42:\n    db 42               ; Decimal\n    assert memory(decimal_42) == 42\n\nhex_dollar_42:\n    db $2A              ; Hexadecimal\n    assert memory(hex_dollar_42) == 42\n\nhex_0x_42:\n    db 0x2A             ; Hexadecimal with 0x\n    assert memory(hex_0x_42) == 42\n\nbinary_42:\n    db %00101010        ; Binary\n    assert memory(binary_42) == 42\n\nbinary_0b_42:\n    db 0b101010         ; Binary (without leading zeros)\n    assert memory(binary_0b_42) == 42\n\noctal_42:\n    db 0o52             ; Octal\n    assert memory(octal_42) == 42\n\n    ; Verify all representations are equal\n    assert 42 == $2A\n    assert 42 == 0x2A\n    assert 42 == #2A\n    assert 42 == &amp;2A\n    assert 42 == %101010\n    assert 42 == 0b101010\n    assert 42 == 0o52\n    assert 42 == @52\n\n\n    ; === Value 4096 (16-bit) in different bases ===\ndecimal_4096:\n    dw 4096             ; Decimal\n    assert memory(decimal_4096) == 0x00  ; LSB\n    assert memory(decimal_4096+1) == 0x10  ; MSB\n\nhex_4096:\n    dw $1000            ; Hexadecimal\n    assert memory(hex_4096) == 0x00\n    assert memory(hex_4096+1) == 0x10\n\nbinary_4096:\n    dw %0001000000000000  ; Binary\n    assert memory(binary_4096) == 0x00\n    assert memory(binary_4096+1) == 0x10\n\noctal_4096:\n    dw 0o10000          ; Octal\n    assert memory(octal_4096) == 0x00\n    assert memory(octal_4096+1) == 0x10\n\n    ; Verify all representations are equal\n    assert 4096 == $1000\n    assert 4096 == 0x1000\n    assert 4096 == #1000\n    assert 4096 == &amp;1000\n    assert 4096 == %0001000000000000\n    assert 4096 == 0b1000000000000\n    assert 4096 == 0o10000\n    assert 4096 == @10000\n\n\n    ; === Edge cases ===\n\n    ; Zero in all bases\n    db 0, $0, 0x0, #0, &amp;0, %0, 0b0, 0o0, @0\n    assert 0 == $0\n    assert 0 == %0\n    assert 0 == 0o0\n\n    ; One in all bases\n    db 1, $1, 0x1, #1, &amp;1, %1, 0b1, 0o1, @1\n    assert 1 == $1\n    assert 1 == %1\n    assert 1 == 0o1\n\n    ; Powers of 2\n    assert 128 == $80\n    assert 128 == %10000000\n    assert 128 == 0o200\n\n    assert 256 == $100\n    assert 256 == %100000000\n    assert 256 == 0o400\n\n    ret\n</code></pre> <p>Negative integers use the unary minus: <code>-42</code></p>"},{"location":"basm/expression-types/#floats","title":"Floats","text":"<p>Floating point values support decimal notation and scientific notation:</p> <pre><code>    ; Test floating point values and operations\n    org $4000\n\nstart:\n    ; Basic floating point values\n    pi = 3.14159\n    half = 0.5\n    negative = -2.5\n\n    ; Assertions for basic floats\n    assert pi == 3.14159\n    assert half == 0.5\n    assert negative == -2.5\n\n    ; Scientific notation\n    micro = 1.0e-6\n    thousand = 1.5e3\n\n    assert micro == 0.000001\n    assert thousand == 1500.0\n\n    ; Float arithmetic\n    sum = 1.5 + 2.5\n    assert sum == 4.0\n\n    product = 2.0 * 3.5\n    assert product == 7.0\n\n    ; Comparison operators with floats\n    assert 3.5 &gt; 2.0\n    assert 2.0 &gt;= 2.0\n    assert 1.5 &lt; 2.5\n    assert 2.5 &lt;= 2.5\n    assert 2.5 == 2.5\n\n    ; Float functions (if supported)\n    abs_neg = abs(-3.5)\n    assert abs_neg == 3.5\n\n    min_val = min(1.5, 2.5)\n    assert min_val == 1.5\n\n    max_val = max(1.5, 2.5)\n    assert max_val == 2.5\n\n    ; Mixed integer and float arithmetic\n    mixed = 10 + 0.5\n    assert mixed == 10.5\n\n    ret\n</code></pre> <p>Examples:</p> <ul> <li><code>3.14159</code></li> <li><code>2.5</code></li> <li><code>-0.5</code></li> <li><code>1.0e-6</code> (scientific notation)</li> <li><code>1.5e3</code> equals 1500.0</li> </ul>"},{"location":"basm/expression-types/#strings","title":"Strings","text":"<p>String literals are enclosed in double quotes and are primarily used with the <code>DB</code> directive:</p> <pre><code>    ; Test string literals and functions\n    org $4000\n\nstart:\n    ; Basic string literals (used with db directive)\ndata_string1:\n    db \"Hello, World!\"\n\ndata_string2:\n    db \"CPC forever\"\n\ndata_string3:\n    db \"\"  ; empty string\n\n    ; String escape sequences\ndata_escapes:\n    db \"Line 1\\nLine 2\"     ; newline\n    db \"Tab\\there\"          ; tab\n    db \"Path\\\\file\"         ; backslash\n    db \"Say \\\"hello\\\"\"      ; quote\n\n    ; String length function\n    len1 = string_len(\"Hello\")\n    assert len1 == 5\n\n    len2 = string_len(\"CPC\")\n    assert len2 == 3\n\n    len3 = string_len(\"\")\n    assert len3 == 0\n\n    ; String concatenation\n    greeting = string_concat(\"Hello\", \" \", \"World\")\n    assert string_len(greeting) == 11\n\n    ; More complex concatenation\n    full_greeting = string_concat(\"Hello\", \", \", \"dear \", \"friend\", \"!\")\n    assert string_len(full_greeting) == 19\n\n    ret\n</code></pre> <p>Strings can contain escape sequences:</p> <ul> <li><code>\\n</code> - newline</li> <li><code>\\t</code> - tab</li> <li><code>\\\\</code> - backslash</li> <li><code>\\\"</code> - quote</li> </ul> <p>String functions:</p> <ul> <li><code>string_len(str)</code> - returns the length of a string</li> <li><code>string_concat(str1, str2, ...)</code> - concatenates multiple strings (2 or more arguments)</li> </ul>"},{"location":"basm/expression-types/#booleans","title":"Booleans","text":"<p>Boolean values for conditional expressions:</p> <ul> <li>True: <code>true</code>, <code>1</code></li> <li>False: <code>false</code>, <code>0</code></li> </ul> <p>Booleans are demonstrated in the test file:</p> <pre><code>    ; Test boolean values and operations\n    org $4000\n\nstart:\n    ; Basic boolean literals\n    true_val = true\n    false_val = false\n\n    ; Boolean assertions\n    assert true_val == true\n    assert false_val == false\n    assert true == true\n    assert false == false\n    assert true != false\n\n    ; Boolean in conditional expressions (ternary)\n    result1 = true ? 1 : 0\n    assert result1 == 1\n\n    result2 = false ? 1 : 0\n    assert result2 == 0\n\n    ; Comparison operations return booleans\n    is_greater = (10 &gt; 5)\n    assert is_greater == true\n\n    is_less = (10 &lt; 5)\n    assert is_less == false\n\n    is_equal = (42 == 42)\n    assert is_equal == true\n\n    is_not_equal = (42 != 43)\n    assert is_not_equal == true\n\n    ; Boolean logic with comparisons\n    assert (5 &gt; 3) == true\n    assert (5 &lt; 3) == false\n    assert (5 &gt;= 5) == true\n    assert (5 &lt;= 5) == true\n    assert (5 == 5) == true\n    assert (5 != 5) == false\n\n    ; Combined logical expressions\n    and_result = (true &amp;&amp; true)\n    assert and_result == true\n\n    and_false = (true &amp;&amp; false)\n    assert and_false == false\n\n    or_result = (true || false)\n    assert or_result == true\n\n    or_false = (false || false)\n    assert or_false == false\n\n    ; Negation - using NOT operator\n    assert !(true) == false\n    assert !(false) == true\n    assert NOT(true) == false\n    assert NOT(false) == true\n\n    ; Boolean in data generation\ndata_start:\n    db true ? 255 : 0\n    assert memory(data_start) == 255\n\n    db false ? 255 : 0\n    assert memory(data_start+1) == 0\n\n    ; Complex boolean expressions\n    complex1 = (10 &gt; 5) &amp;&amp; (20 &lt; 30)\n    assert complex1 == true\n\n    complex2 = (10 &gt; 5) &amp;&amp; (20 &gt; 30)\n    assert complex2 == false\n\n    complex3 = (10 &lt; 5) || (20 &lt; 30)\n    assert complex3 == true\n\n    complex4 = (10 &lt; 5) || (20 &gt; 30)\n    assert complex4 == false\n\n    ; Truthiness of non-boolean values\n    ; Non-zero is truthy\n    assert (5 ? true : false) == true\n    assert (1 ? true : false) == true\n    assert (-1 ? true : false) == true\n\n    ; Zero is falsy\n    assert (0 ? true : false) == false\n\n    ; Using booleans to control assembly\n    DEBUG_MODE = false\n    RELEASE_MODE = true\n\n    assert DEBUG_MODE == false\n    assert RELEASE_MODE == true\n\n    ret\n</code></pre> <p>Boolean operators include:</p> <ul> <li>Logical AND: <code>&amp;&amp;</code></li> <li>Logical OR: <code>||</code></li> <li>Logical NOT: <code>!</code>, <code>NOT</code></li> <li>Comparison: <code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code></li> </ul>"},{"location":"basm/expression-types/#labels","title":"Labels","text":"<p>Labels can be referenced in expressions and resolve to addresses:</p> <pre><code>    ; Labels example\n    org $4000\n\nstart:\n    LD A, 5\n    JP start     ; Label reference\n\n    ret\n</code></pre> <p>The special symbol <code>$</code> represents the current program counter.</p>"},{"location":"basm/expression-types/#lists","title":"Lists","text":"<p>Lists are heterogeneous collections enclosed in square brackets:</p> <pre><code>    ; Lists example\n    org $4000\n\n    ; Basic list creation\n    list1 = [1, 2, 3, 4, 5]\n    assert list1 == [1, 2, 3, 4, 5]\n\n    ; Empty list\n    list2 = []\n    assert list2 == []\n\n    ; list_len - get the length of a list\n    len1 = list_len(list1)\n    assert len1 == 5\n\n    len2 = list_len(list2)\n    assert len2 == 0\n\n    ; list_get - get element at index (0-based)\n    first = list_get(list1, 0)\n    assert first == 1\n\n    second = list_get(list1, 1)\n    assert second == 2\n\n    last = list_get(list1, 4)\n    assert last == 5\n\n    ; list_new - create a new list with n elements (all initialized to given value)\n    list3 = list_new(3, 0)\n    assert list_len(list3) == 3\n    assert list_get(list3, 0) == 0\n    assert list_get(list3, 1) == 0\n    assert list_get(list3, 2) == 0\n\n    ; list_new with non-zero initial value\n    list3b = list_new(2, 42)\n    assert list_get(list3b, 0) == 42\n    assert list_get(list3b, 1) == 42\n\n    ; list_set - set element at index\n    list4 = list_set(list3, 0, 10)\n    assert list_get(list4, 0) == 10\n    assert list_get(list4, 1) == 0\n    assert list_get(list4, 2) == 0\n\n    list4 = list_set(list4, 1, 20)\n    list4 = list_set(list4, 2, 30)\n    assert list4 == [10, 20, 30]\n\n    ; list_push - append an element to the end\n    list5 = list_push(list1, 6)\n    assert list_len(list5) == 6\n    assert list_get(list5, 5) == 6\n\n    ; list_sublist - extract a sublist (start_index, end_index - not included)\n    ; list1 = [1, 2, 3, 4, 5], extract from index 1 to 4 (not included) = [2, 3, 4]\n    sublist = list_sublist(list1, 1, 4)\n    assert list_len(sublist) == 3\n    assert list_get(sublist, 0) == 2\n    assert list_get(sublist, 1) == 3\n    assert list_get(sublist, 2) == 4\n\n    ; list_extend - concatenate two lists\n    list6 = [10, 20]\n    list7 = [30, 40]\n    combined = list_extend(list6, list7)\n    assert list_len(combined) == 4\n    assert combined == [10, 20, 30, 40]\n\n    ; list_sort - sort list in ascending order\n    unsorted = [5, 2, 8, 1, 9]\n    sorted = list_sort(unsorted)\n    assert sorted == [1, 2, 5, 8, 9]\n\n    ; list_argsort - return indices that would sort the list\n    indices = list_argsort(unsorted)\n    assert list_len(indices) == 5\n    ; indices should point to sorted order\n    assert list_get(unsorted, list_get(indices, 0)) == 1\n    assert list_get(unsorted, list_get(indices, 1)) == 2\n    assert list_get(unsorted, list_get(indices, 4)) == 9\n\n    ; Mixed types list\n    mixed = [1, 2.5, 3]\n    assert list_len(mixed) == 3\n    assert list_get(mixed, 0) == 1\n    assert list_get(mixed, 1) == 2.5\n    assert list_get(mixed, 2) == 3\n\n    ret\n</code></pre> <p>Lists support:</p> <ul> <li>Indexing: <code>list[0]</code> (0-based)</li> <li>Nesting: <code>[[1, 2], [3, 4]]</code></li> <li>Functions: <code>list_len()</code>, <code>list_get()</code>, etc.</li> </ul>"},{"location":"basm/expression-types/#matrices","title":"Matrices","text":"<p>Matrices are 2D arrays, created via <code>matrix_new()</code> or from nested lists:</p> <pre><code>list1 = [[5, 5, 5],[5, 5, 5],[5, 5, 5]]\n\nmat1 = matrix_new(3, 3, 5)\nmat2 = matrix_new([[5, 5, 5],[5, 5, 5],[5, 5, 5]])\nmat3 = matrix_new(list1)\n\nprint mat1\nprint mat2\nprint mat3\n\nassert mat1 == mat2\nassert mat1 == mat3\nassert mat2 == mat3\n</code></pre> <p>Matrices support various operations through built-in functions (see functions).</p> <p>Matrices support specialized access functions documented in the functions page.</p>"},{"location":"basm/expression-types/#operators","title":"Operators","text":""},{"location":"basm/expression-types/#binary-operators","title":"Binary Operators","text":"<p>Listed by precedence (highest to lowest):</p> <ol> <li>Multiplication/Division: <code>*</code>, <code>/</code>, <code>%</code> (modulo)</li> <li>Addition/Subtraction: <code>+</code>, <code>-</code></li> <li>Bitwise Shift: <code>&lt;&lt;</code>, <code>&gt;&gt;</code></li> <li>Relational: <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code></li> <li>Equality: <code>==</code>, <code>!=</code></li> <li>Bitwise AND: <code>&amp;</code></li> <li>Bitwise XOR: <code>^</code></li> <li>Bitwise OR: <code>|</code></li> <li>Logical AND: <code>&amp;&amp;</code></li> <li>Logical OR: <code>||</code></li> </ol>"},{"location":"basm/expression-types/#unary-operators","title":"Unary Operators","text":"<ul> <li>Negation: <code>-x</code> (arithmetic)</li> <li>Bitwise NOT: <code>~x</code></li> <li>Logical NOT: <code>!x</code></li> <li>Low byte: <code>&lt;x</code> (equivalent to <code>low(x)</code>)</li> <li>High byte: <code>&gt;x</code> (equivalent to <code>high(x)</code>)</li> </ul>"},{"location":"basm/expression-types/#operator-examples","title":"Operator Examples","text":"<pre><code>    ; Operators example\n    org $4000\n\n    value = (5 + 3) * 2       ; = 16\n    mask = $FF &amp; %00001111    ; = $0F\n    shifted = 1 &lt;&lt; 4          ; = 16\n    high_byte = high($1234)   ; = $12\n    low_byte = low($1234)     ; = $34\n\n    ret\n</code></pre>"},{"location":"basm/expression-types/#type-conversions","title":"Type Conversions","text":"<p>Implicit conversions occur in expressions:</p> <ul> <li>Integer to Float: automatic when mixed with floats</li> <li>Boolean to Integer: <code>true</code> \u2192 1, <code>false</code> \u2192 0</li> <li>Integer to Boolean: 0 \u2192 <code>false</code>, non-zero \u2192 <code>true</code></li> <li>Character to Integer: automatic (ASCII value)</li> </ul>"},{"location":"basm/expression-types/#function-calls","title":"Function Calls","text":"<p>Functions are called with parentheses:</p> <pre><code>    ; Function calls example\n    org $4000\n\n    ; Functions in expressions\n    ld a, high($ABCD)\n    ld b, low($ABCD)\n    ld c, max(10, 20, 30)\n\n    ret\n</code></pre> <p>See the functions page for a complete list of built-in functions.</p>"},{"location":"basm/expression-types/#special-symbols","title":"Special Symbols","text":"<ul> <li><code>$</code> - Current program counter (assembly address)</li> <li><code>$$</code> - Start of current section</li> <li><code>$-$$</code> - Offset within current section</li> </ul> <pre><code>    ; Special symbols example\n    org $4000\n\nstart:\n    ld a, ($ + 5)  ; Reference current address + 5\n    db $ - $$      ; Offset from section start\n\n    ret\n</code></pre>"},{"location":"basm/expression-types/#conditional-expressions","title":"Conditional Expressions","text":"<p>The ternary operator for inline conditionals:</p> <pre><code>    ; Ternary operator example\n    org $4000\n\nstart:\n    ; Ternary in instruction\n    ld a, (1 &gt; 0) ? 42 : 0\n    assert memory(start) == $3e     ; ld a, nn opcode\n    assert memory(start+1) == 42    ; Should be 42 (true branch)\n\n    ; Max using ternary\n    ld b, (10 &gt; 20) ? 10 : 20\n    assert memory(start+2) == $06   ; ld b, nn opcode\n    assert memory(start+3) == 20    ; Should be 20 (false branch, 10 &lt; 20)\n\n    ; Simple data bytes with ternary\ndata_start:\n    db (1 &gt; 0) ? 42 : 0\n    assert memory(data_start) == 42\n\n    db (0 &gt; 1) ? 42 : 0\n    assert memory(data_start+1) == 0\n\n    ; Nested ternary\n    db (1 &gt; 0) ? ((2 &gt; 1) ? 100 : 50) : 0\n    assert memory(data_start+2) == 100\n\n    ; With arithmetic\n    db (5 * 2 &gt; 8) ? (10 + 5) : (2 + 3)\n    assert memory(data_start+3) == 15\n\n    ; Boolean conditions\n    db true ? 1 : 0\n    assert memory(data_start+4) == 1\n\n    db false ? 1 : 0\n    assert memory(data_start+5) == 0\n\n    ; Edge case: zero condition (falsy)\n    db 0 ? 99 : 77\n    assert memory(data_start+6) == 77\n\n    ; Edge case: non-zero condition (truthy)\n    db 5 ? 99 : 77\n    assert memory(data_start+7) == 99\n\n    ret\n</code></pre>"},{"location":"basm/functions/","title":"Built-in Functions","text":"<p>This page documents all built-in functions available in basm expressions.</p>"},{"location":"basm/functions/#mathematical-functions","title":"Mathematical Functions","text":""},{"location":"basm/functions/#trigonometric-functions","title":"Trigonometric Functions","text":"<ul> <li><code>sin(x)</code> - Sine of x (x in radians)</li> <li><code>cos(x)</code> - Cosine of x (x in radians)  </li> <li><code>asin(x)</code> - Arc sine of x (returns radians)</li> <li><code>acos(x)</code> - Arc cosine of x (returns radians)</li> <li><code>atan2(y, x)</code> - Arc tangent of y/x (returns radians)</li> </ul>"},{"location":"basm/functions/#exponential-and-logarithmic-functions","title":"Exponential and Logarithmic Functions","text":"<ul> <li><code>exp(x)</code> - Exponential function (e^x)</li> <li><code>ln(x)</code> - Natural logarithm (base e)</li> <li><code>log10(x)</code> - Logarithm base 10</li> <li><code>pow(base, exponent)</code> - Power function (base^exponent)</li> <li><code>sqrt(x)</code> - Square root</li> </ul>"},{"location":"basm/functions/#rounding-and-modulo-functions","title":"Rounding and Modulo Functions","text":"<ul> <li><code>floor(x)</code> - Largest integer \u2264 x</li> <li><code>ceil(x)</code> - Smallest integer \u2265 x  </li> <li><code>int(x)</code> - Integer part (truncate towards zero)</li> <li><code>frac(x)</code> - Fractional part</li> <li><code>abs(x)</code> - Absolute value</li> <li><code>fmod(x, y)</code> - Floating point remainder of x/y</li> <li><code>remainder(x, y)</code> - IEEE remainder function</li> </ul>"},{"location":"basm/functions/#comparison-and-utility-functions","title":"Comparison and Utility Functions","text":"<ul> <li><code>min(a, b, ...)</code> - Minimum value (variadic)</li> <li><code>max(a, b, ...)</code> - Maximum value (variadic)  </li> <li><code>clamp(value, min, max)</code> - Clamp value between min and max</li> <li><code>fmin(a, b)</code> - Minimum of two floats</li> <li><code>fmax(a, b)</code> - Maximum of two floats</li> <li><code>fdim(x, y)</code> - Positive difference (max(x-y, 0))</li> <li><code>fstep(edge, x)</code> - Step function (0 if x&lt;edge, 1 if x\u2265edge)</li> <li><code>isgreater(x, y)</code> - Test if x &gt; y (returns 0 or 1)</li> <li><code>isless(x, y)</code> - Test if x &lt; y (returns 0 or 1)</li> <li><code>hypot(x, y)</code> - Euclidean distance sqrt(x\u00b2+y\u00b2)</li> <li><code>ldexp(x, exp)</code> - x * 2^exp</li> </ul>"},{"location":"basm/functions/#bit-manipulation-functions","title":"Bit Manipulation Functions","text":"<ul> <li><code>high(value)</code> / <code>hi(value)</code> - High byte of 16-bit value</li> <li><code>low(value)</code> / <code>lo(value)</code> - Low byte of 16-bit value</li> </ul>"},{"location":"basm/functions/#memory-access-functions","title":"Memory Access Functions","text":"<ul> <li><code>peek(address)</code> / <code>memory(address)</code> - Read byte from memory at address during assembly</li> </ul>"},{"location":"basm/functions/#string-functions","title":"String Functions","text":"<ul> <li><code>char(value)</code> - Convert integer to single character string</li> <li><code>string_new(length, filler)</code> - Create string of given length filled with filler  </li> <li><code>string_push(string, char_or_string)</code> - Append character or string</li> <li><code>string_concat(s1, s2, ...)</code> - Concatenate strings (variadic)</li> <li><code>string_from_list(list)</code> - Convert list of integers to string</li> <li><code>string_len(string)</code> - Length of string (same as <code>list_len</code>)</li> </ul>"},{"location":"basm/functions/#pixels","title":"Pixels","text":"<ul> <li><code>mode0_byte_to_pen_at(byte, position)</code> - Extract pen number at position (0 or 1) from mode 0 byte</li> <li><code>mode1_byte_to_pen_at(byte, position)</code> - Extract pen number at position (0-3) from mode 1 byte</li> <li><code>mode2_byte_to_pen_at(byte, position)</code> - Extract pen number at position (0-7) from mode 2 byte</li> <li><code>pen_at_mode0_byte(byte, position)</code> - Get pen at position in mode 0 byte</li> <li><code>pen_at_mode1_byte(byte, position)</code> - Get pen at position in mode 1 byte</li> <li><code>pen_at_mode2_byte(byte, position)</code> - Get pen at position in mode 2 byte</li> <li><code>pens_to_mode0_byte(pen0, pen1)</code> - Convert 2 pens to mode 0 byte</li> <li><code>pens_to_mode1_byte(pen0, pen1, pen2, pen3)</code> - Convert 4 pens to mode 1 byte</li> <li><code>pens_to_mode2_byte(pen0, ..., pen7)</code> - Convert 8 pens to mode 2 byte</li> </ul>"},{"location":"basm/functions/#list-functions","title":"List Functions","text":"<ul> <li><code>list_new(length, filler)</code> - Create list of given length filled with filler value</li> <li><code>list_get(list, index)</code> - Get element at index</li> <li><code>list_set(list, index, value)</code> - Set element at index (returns new list)</li> <li><code>list_len(list)</code> - Length of list</li> <li><code>list_sublist(list, start, end)</code> - Extract sublist (end is not included)</li> <li><code>list_sort(list)</code> - Sort list in ascending order (returns new list)</li> <li><code>list_argsort(list)</code> - Return indices that would sort the list</li> <li><code>list_push(list, element)</code> - Append element to list (returns new list)</li> <li><code>list_extend(list1, list2)</code> - Concatenate two lists (returns new list)</li> </ul>"},{"location":"basm/functions/#matrix-functions","title":"Matrix Functions","text":"<p>To be called on a matrix object or a list of list object (WIP).</p> <ul> <li><code>matrix_new(width, height, filler)</code> - Create matrix filled with value, or <code>matrix_new(list_of_lists)</code> to create from nested lists</li> <li><code>matrix_set(matrix, x, y, value)</code> - Set element at position (returns new matrix)</li> <li><code>matrix_get(matrix, x, y)</code> - Get element at position</li> <li><code>matrix_col(matrix, x)</code> - Get column as list</li> <li><code>matrix_row(matrix, y)</code> - Get row as list  </li> <li><code>matrix_set_col(matrix, x, list)</code> - Set column from list (returns new matrix)</li> <li><code>matrix_set_row(matrix, y, list)</code> - Set row from list (returns new matrix)</li> <li><code>matrix_width(matrix)</code> - Get matrix width</li> <li><code>matrix_height(matrix)</code> - Get matrix height</li> </ul>"},{"location":"basm/functions/#file-functions","title":"File Functions","text":"<ul> <li><code>load(\"filename\")</code> - Load file content as list of bytes</li> </ul>"},{"location":"basm/functions/#code-assembly-function","title":"Code Assembly Function","text":"<ul> <li><code>assemble(\"z80_code\")</code> - Assemble Z80 code string and return bytes as list</li> </ul> <p>Example:</p> <pre><code>bytes = assemble(\"LD A, 5\")  ; Returns list of assembled bytes\n</code></pre>"},{"location":"basm/functions/#binary-transformation-function","title":"Binary Transformation Function","text":"<ul> <li><code>binary_transform(data, \"crunch_type\")</code> - Compress data using specified cruncher</li> </ul> <p>Supported crunch types:</p> <ul> <li><code>\"LZEXO\"</code>, <code>\"LZ4\"</code>, <code>\"LZ48\"</code>, <code>\"LZ49\"</code></li> <li><code>\"LZSHRINKLER\"</code>, <code>\"LZX7\"</code>, <code>\"LZX0\"</code>, <code>\"LZAPU\"</code> </li> <li><code>\"LZSA1\"</code>, <code>\"LZSA2\"</code>, <code>\"LZUPKR\"</code></li> <li><code>\"BackwardZx0\"</code> (backward variant)</li> </ul> <p>Example:</p> <pre><code>data = [1, 2, 3, 4, 5]\ncompressed = binary_transform(data, \"LZ48\")\n</code></pre>"},{"location":"basm/functions/#section-functions","title":"Section Functions","text":"<ul> <li><code>section_start(\"section_name\")</code> - Get start address of named section</li> <li><code>section_stop(\"section_name\")</code> - Get stop address of named section  </li> <li><code>section_length(\"section_name\")</code> - Get length of named section</li> <li><code>section_used(\"section_name\")</code> - Get number of bytes actually used in section</li> <li><code>section_mmr(\"section_name\")</code> - Get memory mapper register value for section</li> </ul>"},{"location":"basm/orgams_directives/","title":"ORGAMS-Only Directives","text":"<p>This document lists directives that are only available when ORGAMS compatibility mode is enabled. These directives are not supported in standard basm mode.</p>"},{"location":"basm/orgams_directives/#skip","title":"SKIP","text":"<p>Synopsis:</p> <pre><code>SKIP &lt;count&gt;\n</code></pre> <p>Description: Advances both the code address (<code>$</code>) and output address by the specified number of bytes without writing any data to memory. This directive reserves space in memory by skipping over it.</p> <p>Note: SKIP is only available in ORGAMS compatibility mode and is not supported in standard basm.</p> <p>For standard basm, use <code>DEFS</code> or <code>DS</code> to reserve memory, though these directives fill the space with a value (default 0) rather than just advancing addresses.</p> <p>Example:</p> <pre><code>    ; SKIP directive example\n    ; Note: SKIP is ORGAMS-only and cannot be tested in standard basm\n    ; This demonstrates the intended behavior if ORGAMS mode were enabled:\n    ;\n    ; org $4000\n    ; db $AA          ; Write $AA at $4000\n    ; skip 5          ; Skip 5 bytes ($4001-$4005)\n    ; db $BB          ; Write $BB at $4006\n    ; assert memory($4000) == $AA\n    ; assert memory($4006) == $BB\n    ;\n    ; In standard basm, use DEFS/DS instead (though these fill with a value):\n    org $4000\n    db $AA          ; Write $AA at $4000\n    defs 5, 0       ; Reserve 5 bytes filled with 0\n    db $BB          ; Write $BB at $4006\n    assert memory($4000) == $AA\n    assert memory($4006) == $BB\n</code></pre>"},{"location":"basm/syntax/","title":"Z80 Syntax","text":""},{"location":"basm/syntax/#general-syntax","title":"General syntax","text":"<pre><code>LABEL OPCODE1\n      OPCODE2 : OPCODE3\n      DIRECTIVE\n</code></pre> <p>Warning</p> <p>There may be still some subtle parser bugs, but it is possible to span instructions and directives on several lines by ending the previous line with <code>\\</code></p>"},{"location":"basm/syntax/#labels-handling","title":"Labels handling","text":"<p><code>BASM</code> is quite lax on the z80 format: it does not impose to start a label at the very first char of a line and does not force an instruction or directive to not start at the very first line of a char (behavior stolen to <code>rasm</code>). As a consequence there can be ambiguities between labels and macros. If it fails in properly recognizing macros or label, you can guide it by suffixing label declaration by : or by using (void) for macros with no arguments. </p>"},{"location":"basm/syntax/#local-labels","title":"Local labels","text":"<pre><code>outer1\n    jp outer2\n    jp outer2.inner1\n\n\nouter2\n    jp .inner1\n.inner1\n\n    ifndef outer1\n        fail \"outer1 is wrongly undefined\"\n    endif\n\n    ifndef .inner1\n        fail \".inner1 is wrongly undefined\"\n    endif\n\n    ifndef outer2.inner1\n        fail \"outer2.inner1 is wrongly undefined\"\n    endif\n</code></pre>"},{"location":"basm/syntax/#module-handling","title":"module handling","text":"<p><pre><code>    module module1\nlabel1\n    jp module2.label1\n    endmodule\n\n\n\n    module module2\nlabel1 \n    jp module3.module31.label1\n    endmodule\n\n    module module3\n        module module31\nlabel1\n        jp ::label1\n        endmodule\n    endmodule\nlabel1\n</code></pre> would generate a binary similar to <pre><code>    jp label1\nlabel1\n    jp label2\nlabel2\n    jp label3\nlabel3\n</code></pre></p>"},{"location":"basm/syntax/#labels-generation","title":"Labels generation","text":"<p>Labels can be generated thanks to the content of other ones. <pre><code>value=5\nlabel{value+2}\n\n    ifndef label7\n        fail \"unable to build label with expression\"\n    endif\n</code></pre></p>"},{"location":"basm/syntax/#instructions","title":"Instructions","text":"<p>Here is the list of instructions used to validate <code>BASM</code>:</p> <pre><code>; Test of assembling of z80 instructions.\n    LIST\n\n    org $0\n\ndes equ $05\nn   equ $20\nnn  equ $0584\n\n    ; Documented instructions\n;   ADC\n    adc a,(hl)\n    adc a,(ix + des)\n    adc a,(iy + des)\n    adc a,a\n    adc a,b\n    adc a,c\n    adc a,d\n    adc a,e\n    adc a,h\n    adc a,l\n    adc a,n\n\n    adc hl,bc\n    adc hl,de\n    adc hl,hl\n    adc hl,sp\n\n;   ADD\n    add a,(hl)\n    add a,(ix + des)\n    add a,(iy + des)\n    add a,a\n    add a,b\n    add a,c\n    add a,d\n    add a,e\n    add a,h\n    add a,l\n    add a,n\n\n    add hl,bc\n    add hl,de\n    add hl,hl\n    add hl,sp\n\n    add ix,bc\n    add ix,de\n    add ix,ix\n    add ix,sp\n\n    add iy,bc\n    add iy,de\n    add iy,iy\n    add iy,sp\n\n;   AND\n    and (hl)\n    and (ix + des)\n    and (iy + des)\n    and a\n    and b\n    and c\n    and d\n    and e\n    and h\n    and l\n    and n\n\n;   BIT\n    bit 0,(hl)\n    bit 0,(ix + des)\n    bit 0,(iy + des)\n    bit 0,a\n    bit 0,b\n    bit 0,c\n    bit 0,d\n    bit 0,e\n    bit 0,h\n    bit 0,l\n\n    bit 1,(hl)\n    bit 1,(ix + des)\n    bit 1,(iy + des)\n    bit 1,a\n    bit 1,b\n    bit 1,c\n    bit 1,d\n    bit 1,e\n    bit 1,h\n    bit 1,l\n\n    bit 2,(hl)\n    bit 2,(ix + des)\n    bit 2,(iy + des)\n    bit 2,a\n    bit 2,b\n    bit 2,c\n    bit 2,d\n    bit 2,e\n    bit 2,h\n    bit 2,l\n\n    bit 3,(hl)\n    bit 3,(ix + des)\n    bit 3,(iy + des)\n    bit 3,a\n    bit 3,b\n    bit 3,c\n    bit 3,d\n    bit 3,e\n    bit 3,h\n    bit 3,l\n\n    bit 4,(hl)\n    bit 4,(ix + des)\n    bit 4,(iy + des)\n    bit 4,a\n    bit 4,b\n    bit 4,c\n    bit 4,d\n    bit 4,e\n    bit 4,h\n    bit 4,l\n\n    bit 5,(hl)\n    bit 5,(ix + des)\n    bit 5,(iy + des)\n    bit 5,a\n    bit 5,b\n    bit 5,c\n    bit 5,d\n    bit 5,e\n    bit 5,h\n    bit 5,l\n\n    bit 6,(hl)\n    bit 6,(ix + des)\n    bit 6,(iy + des)\n    bit 6,a\n    bit 6,b\n    bit 6,c\n    bit 6,d\n    bit 6,e\n    bit 6,h\n    bit 6,l\n\n    bit 7,(hl)\n    bit 7,(ix + des)\n    bit 7,(iy + des)\n    bit 7,a\n    bit 7,b\n    bit 7,c\n    bit 7,d\n    bit 7,e\n    bit 7,h\n    bit 7,l\n\n;   CALL\n    call nn\n\n    call nz,nn\n    call z,nn\n    call nc,nn\n    call c,nn\n    call po,nn\n    call pe,nn\n    call p,nn\n    call m,nn\n\n;   CCF\n    ccf\n\n;   CP\n    cp (hl)\n    cp (ix + des)\n    cp (iy + des)\n    cp a\n    cp b\n    cp c\n    cp d\n    cp e\n    cp h\n    cp l\n    cp n\n\n    cpd\n    cpdr\n    cpir\n    cpi\n\n;   CPL\n    cpl\n\n;   DAA\n    daa\n\n;   DEC\n    dec (hl)\n    dec (ix + des)\n    dec (iy + des)\n    dec a\n    dec b\n    dec c\n    dec d\n    dec e\n    dec h\n    dec l\n\n    dec bc\n    dec de\n    dec hl\n    dec ix\n    dec iy\n    dec sp\n\n;   DI\n    di\n\n;   DJNZ\nl1  djnz l1\n\n;   EI\n    ei\n\n;   EX\n    ex af,af'\n\n    ex de,hl\n\n    ex (sp),hl\n    ex (sp),ix\n    ex (sp),iy\n\n    exx\n\n;   HALT\n    halt\n\n;   IM\n    im 0\n    im 1\n    im 2\n\n;   IN\n    in a,(c)\n    in b,(c)\n    in c,(c)\n    in d,(c)\n    in e,(c)\n    in h,(c)\n    in l,(c)\n\n    in a,(n)\n\n    ind\n    indr\n    ini\n    inir\n\n;   INC\n    inc (hl)\n    inc (ix + des)\n    inc (iy + des)\n    inc a\n    inc b\n    inc c\n    inc d\n    inc e\n    inc h\n    inc l\n\n    inc bc\n    inc de\n    inc hl\n    inc ix\n    inc iy\n    inc sp\n\n;   JP\n    jp nn\n\n    jp (hl)\n    jp (ix)\n    jp (iy)\n\n    jp nz,nn\n    jp z,nn\n    jp nc,nn\n    jp c,nn\n    jp po,nn\n    jp pe,nn\n    jp p,nn\n    jp m,nn\n\n;   JR\n    jr $ + $22\n\n    jr nz,$ + $22\n    jr z,$ + $22\n    jr nc,$ + $22\n    jr c,$ + $22\n\n;   LD\n    ld (bc),a\n    ld (de),a\n\n    ld (hl),a\n    ld (hl),b\n    ld (hl),c\n    ld (hl),d\n    ld (hl),e\n    ld (hl),h\n    ld (hl),l\n    ld (hl),n\n\n    ld (ix + des),a\n    ld (ix + des),b\n    ld (ix + des),c\n    ld (ix + des),d\n    ld (ix + des),e\n    ld (ix + des),h\n    ld (ix + des),l\n    ld (ix + des),n\n\n    ld (iy + des),a\n    ld (iy + des),b\n    ld (iy + des),c\n    ld (iy + des),d\n    ld (iy + des),e\n    ld (iy + des),h\n    ld (iy + des),l\n    ld (iy + des),n\n\n    ld (nn),a\n\n    ld (nn),bc\n    ld (nn),de\n    ld (nn),hl\n    ld (nn),ix\n    ld (nn),iy\n\n    ld (nn),sp\n\n    ld a,(bc)\n    ld a,(de)\n    ld a,(hl)\n    ld a,(ix + des)\n    ld a,(iy + des)\n    ld a,(nn)\n    ld a,a\n    ld a,b\n    ld a,c\n    ld a,d\n    ld a,e\n    ld a,h\n    ld a,l\n    ld a,n\n\n    ld b,(hl)\n    ld b,(ix + des)\n    ld b,(iy + des)\n    ld b,a\n    ld b,b\n    ld b,c\n    ld b,d\n    ld b,e\n    ld b,h\n    ld b,l\n    ld b,n\n\n    ld c,(hl)\n    ld c,(ix + des)\n    ld c,(iy + des)\n    ld c,a\n    ld c,b\n    ld c,c\n    ld c,d\n    ld c,e\n    ld c,h\n    ld c,l\n    ld c,n\n\n    ld d,(hl)\n    ld d,(ix + des)\n    ld d,(iy + des)\n    ld d,a\n    ld d,b\n    ld d,c\n    ld d,d\n    ld d,e\n    ld d,h\n    ld d,l\n    ld d,n\n\n    ld e,(hl)\n    ld e,(ix + des)\n    ld e,(iy + des)\n    ld e,a\n    ld e,b\n    ld e,c\n    ld e,d\n    ld e,e\n    ld e,h\n    ld e,l\n    ld e,n\n\n    ld h,(hl)\n    ld h,(ix + des)\n    ld h,(iy + des)\n    ld h,a\n    ld h,b\n    ld h,c\n    ld h,d\n    ld h,e\n    ld h,h\n    ld h,l\n    ld h,n\n\n    ld l,(hl)\n    ld l,(ix + des)\n    ld l,(iy + des)\n    ld l,a\n    ld l,b\n    ld l,c\n    ld l,d\n    ld l,e\n    ld l,h\n    ld l,l\n    ld l,n\n\n    ld a,i\n    ld i,a\n\n    ld a,r\n    ld r,a\n\n    ld bc,(nn)\n    ld de,(nn)\n    ld hl,(nn)\n    ld ix,(nn)\n    ld iy,(nn)\n    ld sp,(nn)\n\n    ld bc,nn\n    ld de,nn\n    ld hl,nn\n    ld ix,nn\n    ld iy,nn\n\n\n    ld sp,hl\n    ld sp,ix\n    ld sp,iy\n    ld sp,nn\n\n    ldd\n    lddr\n    ldi\n    ldir\n\n;   NEG\n    neg\n\n;   NOP\n    nop\n\n;   OR\n    or (hl)\n    or (ix + des)\n    or (iy + des)\n    or a\n    or b\n    or c\n    or d\n    or e\n    or h\n    or l\n    or n\n\n\n;   OUT\n    out (c),a\n    out (c),b\n    out (c),c\n    out (c),d\n    out (c),e\n    out (c),h\n    out (c),l\n    out (n),a\n\n    outd\n    otdr\n    outi\n    otir\n\n;   POP\n    pop af\n    pop bc\n    pop de\n    pop hl\n    pop ix\n    pop iy\n\n;   PUSH\n    push af\n    push bc\n    push de\n    push hl\n    push ix\n    push iy\n\n;   RES\n    res 0,(hl)\n    res 0,(ix + des)\n    res 0,(iy + des)\n    res 0,a\n    res 0,b\n    res 0,c\n    res 0,d\n    res 0,e\n    res 0,h\n    res 0,l\n\n    res 1,(hl)\n    res 1,(ix + des)\n    res 1,(iy + des)\n    res 1,a\n    res 1,b\n    res 1,c\n    res 1,d\n    res 1,e\n    res 1,h\n    res 1,l\n\n    res 2,(hl)\n    res 2,(ix + des)\n    res 2,(iy + des)\n    res 2,a\n    res 2,b\n    res 2,c\n    res 2,d\n    res 2,e\n    res 2,h\n    res 2,l\n\n    res 3,(hl)\n    res 3,(ix + des)\n    res 3,(iy + des)\n    res 3,a\n    res 3,b\n    res 3,c\n    res 3,d\n    res 3,e\n    res 3,h\n    res 3,l\n\n    res 4,(hl)\n    res 4,(ix + des)\n    res 4,(iy + des)\n    res 4,a\n    res 4,b\n    res 4,c\n    res 4,d\n    res 4,e\n    res 4,h\n    res 4,l\n\n    res 5,(hl)\n    res 5,(ix + des)\n    res 5,(iy + des)\n    res 5,a\n    res 5,b\n    res 5,c\n    res 5,d\n    res 5,e\n    res 5,h\n    res 5,l\n\n    res 6,(hl)\n    res 6,(ix + des)\n    res 6,(iy + des)\n    res 6,a\n    res 6,b\n    res 6,c\n    res 6,d\n    res 6,e\n    res 6,h\n    res 6,l\n\n    res 7,(hl)\n    res 7,(ix + des)\n    res 7,(iy + des)\n    res 7,a\n    res 7,b\n    res 7,c\n    res 7,d\n    res 7,e\n    res 7,h\n    res 7,l\n\n;   RET\n    ret\n\n    ret z\n    ret nz\n    ret c\n    ret nc\n    ret po\n    ret pe\n    ret p\n    ret m\n\n    reti\n    retn\n\n;   RL\n    rl (hl)\n    rl (ix + des)\n    rl (iy + des)\n    rl a\n    rl b\n    rl c\n    rl d\n    rl e\n    rl h\n    rl l\n\n;   RLA\n    rla\n\n;   RLC\n    rlc (hl)\n    rlc (ix + des)\n    rlc (iy + des)\n    rlc a\n    rlc b\n    rlc c\n    rlc d\n    rlc e\n    rlc h\n    rlc l\n\n;   RLCA\n    rlca\n\n;   RLD\n    rld\n\n;   RR\n    rr (hl)\n    rr (ix + des)\n    rr (iy + des)\n    rr a\n    rr b\n    rr c\n    rr d\n    rr e\n    rr h\n    rr l\n\n;   RRA\n    rra\n\n;   RRC\n    rrc (hl)\n    rrc (ix + des)\n    rrc (iy + des)\n    rrc a\n    rrc b\n    rrc c\n    rrc d\n    rrc e\n    rrc h\n    rrc l\n\n;   RRCA\n    rrca\n\n;   RRD\n    rrd\n\n;   RST\n    rst $00\n    rst $08\n    rst $10\n    rst $18\n    rst $20\n    rst $28\n    rst $30\n    rst $38\n\n;   SBC\n    sbc a,(hl)\n    sbc a,(ix + des)\n    sbc a,(iy + des)\n    sbc a,a\n    sbc a,b\n    sbc a,c\n    sbc a,d\n    sbc a,e\n    sbc a,h\n    sbc a,l\n    sbc a,n\n\n    sbc hl,bc\n    sbc hl,de\n    sbc hl,hl\n    sbc hl,sp\n\n;   SCF\n    scf\n\n;   SET\nlabel    set 0,(hl)\n    set 0,(ix + des)\n    set 0,(iy + des)\n    set 0,a\n    set 0,b\n    set 0,c\n    set 0,d\n    set 0,e\n    set 0,h\n    set 0,l\n\n    set 1,(hl)\n    set 1,(ix + des)\n    set 1,(iy + des)\n    set 1,a\n    set 1,b\n    set 1,c\n    set 1,d\n    set 1,e\n    set 1,h\n    set 1,l\n\n    set 2,(hl)\n    set 2,(ix + des)\n    set 2,(iy + des)\n    set 2,a\n    set 2,b\n    set 2,c\n    set 2,d\n    set 2,e\n    set 2,h\n    set 2,l\n\n    set 3,(hl)\n    set 3,(ix + des)\n    set 3,(iy + des)\n    set 3,a\n    set 3,b\n    set 3,c\n    set 3,d\n    set 3,e\n    set 3,h\n    set 3,l\n\n    set 4,(hl)\n    set 4,(ix + des)\n    set 4,(iy + des)\n    set 4,a\n    set 4,b\n    set 4,c\n    set 4,d\n    set 4,e\n    set 4,h\n    set 4,l\n\n    set 5,(hl)\n    set 5,(ix + des)\n    set 5,(iy + des)\n    set 5,a\n    set 5,b\n    set 5,c\n    set 5,d\n    set 5,e\n    set 5,h\n    set 5,l\n\n    set 6,(hl)\n    set 6,(ix + des)\n    set 6,(iy + des)\n    set 6,a\n    set 6,b\n    set 6,c\n    set 6,d\n    set 6,e\n    set 6,h\n    set 6,l\n\n    set 7,(hl)\n    set 7,(ix + des)\n    set 7,(iy + des)\n    set 7,a\n    set 7,b\n    set 7,c\n    set 7,d\n    set 7,e\n    set 7,h\n    set 7,l\n\n;   SLA\n    sla (hl)\n    sla (ix + des)\n    sla (iy + des)\n    sla a\n    sla b\n    sla c\n    sla d\n    sla e\n    sla h\n    sla l\n\n;   SRA\n    sra (hl)\n    sra (ix + des)\n    sra (iy + des)\n    sra a\n    sra b\n    sra c\n    sra d\n    sra e\n    sra h\n    sra l\n\n;   SRL\n    srl (hl)\n    srl (ix + des)\n    srl (iy + des)\n    srl a\n    srl b\n    srl c\n    srl d\n    srl e\n    srl h\n    srl l\n\n;   SUB\n    sub (hl)\n    sub (ix + des)\n    sub (iy + des)\n    sub a\n    sub b\n    sub c\n    sub d\n    sub e\n    sub h\n    sub l\n    sub n\n\n;   XOR\n    xor (hl)\n    xor (ix + des)\n    xor (iy + des)\n    xor a\n    xor b\n    xor c\n    xor d\n    xor e\n    xor h\n    xor l\n    xor n\n\n    ; Undocumented instructions\n; IN\n    in (c)      ; DEFB $ED,$70\n    in f,(c)    ; DEFB $ED,$70\n\n; OUT\n    out (c)     ; DEFB $ED,$71\n    out (c),f   ; DEFB $ED,$71\n\n; SLL\n    sll (hl)\n    sll (ix+des)\n    sll (iy+des)\n    sll a\n    sll b\n    sll c\n    sll d\n    sll e\n    sll h\n    sll l\n\n; IX and IY 8 bits halfs\n    add a,ixh\n    add a,ixl\n    add a,iyh\n    add a,iyl\n\n    adc a,ixh\n    adc a,ixl\n    adc a,iyh\n    adc a,iyl\n\n    and ixh\n    and ixl\n    and iyh\n    and iyl\n\n    cp ixh\n    cp ixl\n    cp iyh\n    cp iyl\n\n    dec ixh\n    dec ixl\n    dec iyh\n    dec iyl\n\n    inc ixh\n    inc ixl\n    inc iyh\n    inc iyl\n\n    ld a,ixh\n    ld b,ixh\n    ld c,ixh\n    ld d,ixh\n    ld e,ixh\n    ;ld h,ixh\n    ;ld l,ixh\n\n    ld a,ixl\n    ld b,ixl\n    ld c,ixl\n    ld d,ixl\n    ld e,ixl\n    ;ld h,ixl\n    ;ld l,ixl\n\n    ld a,iyh\n    ld b,iyh\n    ld c,iyh\n    ld d,iyh\n    ld e,iyh\n    ;ld h,iyh\n    ;ld l,iyh\n\n    ld a,iyl\n    ld b,iyl\n    ld c,iyl\n    ld d,iyl\n    ld e,iyl\n    ;ld h,iyl\n    ;ld l,iyl\n\n    ld ixh,a\n    ld ixh,b\n    ld ixh,c\n    ld ixh,d\n    ld ixh,e\n    ld ixh,ixh\n    ld ixh,ixl\n    ld ixh,n\n\n    ld ixl,a\n    ld ixl,b\n    ld ixl,c\n    ld ixl,d\n    ld ixl,e\n    ld ixl,ixh\n    ld ixl,ixl\n    ld ixl,n\n\n    ld iyh,a\n    ld iyh,b\n    ld iyh,c\n    ld iyh,d\n    ld iyh,e\n    ld iyh,iyh\n    ld iyh,iyl\n    ld iyh,n\n\n    ld iyl,a\n    ld iyl,b\n    ld iyl,c\n    ld iyl,d\n    ld iyl,e\n    ld iyl,iyh\n    ld iyl,iyl\n    ld iyl,n\n\n    or ixh\n    or ixl\n    or iyh\n    or iyl\n\n    sbc a,ixh\n    sbc a,ixl\n    sbc a,iyh\n    sbc a,iyl\n\n    sub ixh\n    sub ixl\n    sub iyh\n    sub iyl\n\n    xor ixh\n    xor ixl\n    xor iyh\n    xor iyl\n\n\n    end\n</code></pre>"},{"location":"basm/syntax/#fake-instructions","title":"Fake instructions","text":"<p>To ease coding, several fake instructions are allowed by <code>BASM</code>. It replaces them by the combination of true instructions.</p> <p>Here is a subset of the possibilities.</p> <p>Failure</p> <p>Most accepted fake instructions are missing from the listing</p> <pre><code>    ld hl, de\n    jp hl\n    jp ix\n    jp iy\n    push hl, de, bc\n    pop bc, de, hl\n\n\n    SRL BC\n    SRL DE\n    SRL HL\n\n    SRA BC \n    SRA DE \n    SRA HL\n\n    SLL BC\n    SLL DE\n    SLL HL\n\n    SLA BC\n    SLA DE\n    SLA HL\n\n    RR BC\n    RR DE\n    RR HL\n\n    RL BC\n    RL DE\n    RL HL\n\n\n    RLC BC \n    RLC DE\n    RLC HL\n\n    RRC BC \n    RRC DE\n    RRC HL\n\n\n    RST Z,#38\n    RST NZ,#38\n    RST C,#38\n    RST NC,#38\n\n    ld hl, sp\n</code></pre>"},{"location":"basm/syntax/#comments","title":"Comments","text":""},{"location":"basm/syntax/#one-line-comment","title":"One line comment","text":"<pre><code>; This is a comment\n</code></pre>"},{"location":"basm/syntax/#multiline-comment","title":"Multiline comment","text":"<p><pre><code>/*\n this is \n another\n comment */\n\n\n## Expressions\n\n### Types\n\n- int\n- char, string\n- list, matrix\n\n### Filenames\n\nA normal file is represented by a string.\n</code></pre> \"standard.filename\" <pre><code>A file insided a disk is represented in a string that contains the dsk name, followed by `#` then the file of interest within the dsk\n</code></pre> \"image.dsk#filename\" <pre><code>## Special variables\n\n - $: get the current code address\n - $$: get the current output address\n\n\nExample:\n```z80\n    assert $ == 0\n    assert $$ == 0\n\n    org 0x100\n    assert $ == 0x100\n    assert $$ == 0x100\n    nop\n    assert $ == 0x101\n    assert $$ == 0x101\n\n\n    org 0x200, 0x300\n    assert $ == 0x200\n    assert $$ == 0x300\n    nop\n    assert $ == 0x201\n    assert $$ == 0x301\n</code></pre></p>"},{"location":"basm/syntax/#provided-functions","title":"Provided functions","text":"<p>Failure</p> <p>Need to document all functions</p>"},{"location":"basm/syntax/#z80-related-functions","title":"Z80 related functions","text":""},{"location":"basm/syntax/#assemble","title":"assemble","text":"<p><code>assemble(str)</code> consider the string <code>str</code> to be a list of instructions (no directives) and returns the list of bytes corresponding to the assembled version of the given string.</p> <pre><code>    assert list_len(assemble(\" nop\")) == 1\n    assert list_len(assemble(\" nop : nop \")) == 2\n    assert list_len(assemble(\"\")) == 0\n</code></pre>"},{"location":"basm/syntax/#duration","title":"duration","text":"<ul> <li><code>duration(instruction)</code> returns the number of nop of the instruction</li> </ul>"},{"location":"basm/syntax/#opcode","title":"opcode","text":"<pre><code>    ld a, opcode(inc e)\n    ld a, opcode(dec e)\n</code></pre>"},{"location":"basm/syntax/#amstrad-cpc-video-handling","title":"Amstrad CPC video handling","text":"<ul> <li>mode0_byte_to_pen_at</li> <li>mode1_byte_to_pen_at</li> <li>mode2_byte_to_pen_at</li> <li>pen_at_mode0_byte</li> <li>pen_at_mode1_byte</li> <li>pen_at_mode2_byte</li> <li>pens_to_mode0_byte</li> <li>pens_to_mode1_byte</li> <li>pens_to_mode2_byte</li> </ul>"},{"location":"basm/syntax/#list-handling","title":"List handling","text":"<ul> <li>list_new</li> <li>list_get(LIST, INDEX)</li> <li>list_set</li> <li>list_len</li> <li><code>list_sublist(list, start, end)</code> -&gt; list: Return a new list from start until end not included </li> <li>list_sort</li> <li>list_argsort</li> <li>list_push</li> </ul>"},{"location":"basm/syntax/#string-handling","title":"String handling","text":"<ul> <li>string_new</li> <li>string_push</li> <li>string_concat</li> <li>string_from_list</li> </ul>"},{"location":"basm/syntax/#matrix-handling","title":"Matrix handling","text":"<ul> <li>matrix_new</li> <li>matrix_set</li> <li>matrix_get</li> <li>matrix_col</li> <li>matrix_row</li> <li>matrix_set_row</li> <li>matrix_set_col</li> <li>matrix_width</li> <li>matrix_height</li> </ul>"},{"location":"basm/syntax/#file-handing","title":"File handing","text":"<ul> <li><code>load(fname) -&gt; list of bytes</code>: return the bytes from the given file name</li> </ul>"},{"location":"basm/syntax/#memory-handling","title":"Memory handling","text":""},{"location":"basm/syntax/#memoryaddr","title":"memory(addr)","text":"<pre><code>    org 0x4000\n    assert memory(label2) == 4\n\nlabel1\n    db 1, 2, 3\n\nlabel2\n    db 4, 5, 6\n\n    assert memory(label1) == 1\n    assert memory(label1+2) == 3\n</code></pre>"},{"location":"basm/syntax/#user-defined-functions","title":"User defined functions","text":"<p><code>BASM</code> allows to define functions that can be used in any expression. The functions are fed with parameters and execute conditional directives as well as directives able to handle variables. They finish at the execution of the <code>RETURN</code> directive.</p> <pre><code>FUNCTION [ARG1 [, ARGN]]\n    INSTRUCTIONS\n    RETURN VALUE\nENDFUNCTION\n</code></pre> <p>Failure</p> <p>Better explain how to build function</p> <p>Example of the fibonacci function:</p> <pre><code>    function fibo nb\n        if {nb} == 0\n            return 0\n        else if {nb} == 1\n            return 1\n        else\n            return fibo({nb}-1) + fibo({nb}-2)\n        endif\n\n    endfunction\n\n    assert fibo(0) == 0\n    assert fibo(1) == 1\n    assert fibo(2) == 1\n\n    assert fibo(5) == 5\n\n    assert fibo(10) == 55\n</code></pre> <p>Example of function to handle lists: <pre><code>    ; Skip the {start} first element of list {l}\n    FUNCTION SKIP, l, start\n        len = list_len({l})\n        if {start} &lt; len\n            return list_sublist({l}, {start}, len)\n        else\n            return []\n        endif\n    ENDFUNCTION\n\n    ; Take the {amount} first element of list {l}\n    FUNCTION TAKE, l, amount\n        assert {amount} &gt; 0\n        len = list_len({l})\n        start = 0\n        finish = start + min({amount}, len) ; seems to not work for un unknown reason\n        if {amount} &gt; len\n            finish = len\n        else\n            finish = {amount}\n        endif\n        return list_sublist({l}, start, finish)\n    ENDFUNCTION\n\n    ; Reverse list {l}\n    FUNCTION REVERT, l\n        new = []\n        nb = list_len({l})\n        for idx, 0, nb-1\n            new = list_push(new, list_get({l}, nb-1-{idx}))\n        endfor\n        return new\n    ENDFUNCTION\n\n    assert list_len([1, 2, 3, 4]) == 4\n    assert list_sublist([1, 2, 3, 4], 0, 2) == [1,2]\n    assert list_sublist([1, 2, 3, 4], 0, 4) == [1, 2, 3, 4]\n\n\n    ; Various test to check appropriate behavior\n    assert SKIP([1, 2, 3, 4], 2) == [3, 4]\n    assert SKIP([1, 2, 3, 4], 5) == []\n\n    assert TAKE([1, 2, 3, 4], 2) == [1, 2]\n    assert min(4,5) == 4\n    assert TAKE([1, 2, 3, 4], 4) == [1, 2, 3, 4]\n    assert TAKE([1, 2, 3, 4], 10) == [1, 2, 3, 4]\n\n    assert REVERT([1, 2, 3, 4]) == [4, 3, 2, 1]\n    assert list_len(load(\"hello.sna\")) == 4674\n\n    assert list_len(TAKE(load(\"hello.sna\"), 8)) == 8\n\n\n\n    assert string_from_list(TAKE(load(\"hello.sna\"), 8)) == \"MV - SNA\"\n\n    ; Write in memory 8 bytes from the given file\n    snapshot = load(\"hello.sna\")\n    header_id = TAKE(snapshot, 8)\n    db header_id\n\n    ; Check that memory is correctly set\n    assert peek(0) == \"M\"\n    assert peek(7) == \"A\"\n</code></pre></p>"},{"location":"basmdoc/","title":"Overview","text":"<p><code>basmdoc</code> aims at generating a HTML page that represents the documentation of a z80 assembler project. As z80 source could we written on oldschool platform we have chosen to no use a verbose way to comment (such as <code>@param</code>). Maybe we'll change that in the future if there are no users in for native code.</p>"},{"location":"basmdoc/#integration-with-bndbuild","title":"Integration with BndBuild","text":"<p>Basmdoc is available as a standalone <code>basmdoc</code> binary but can also be used within BndBuild build scripts using the <code>basmdoc</code> or <code>doc</code> command aliases. See BndBuild Commands for integration details.</p>"},{"location":"basmdoc/#usage","title":"Usage","text":"<pre><code>basmdoc [OPTIONS] --output &lt;OUTPUT&gt; &lt;INPUT&gt;...\n</code></pre>"},{"location":"basmdoc/#arguments","title":"Arguments","text":"<ul> <li><code>&lt;INPUT&gt;...</code> \u2014 Input assembly file(s) or folder(s) (recursively searches for <code>.asm</code> files in folders)</li> </ul>"},{"location":"basmdoc/#options","title":"Options","text":"<ul> <li><code>-o, --output &lt;OUTPUT&gt;</code> \u2014 Output markdown file (required)</li> <li><code>-w, --wildcards</code> \u2014 Enable wildcard expansion on input files</li> <li><code>-u, --undocumented</code> \u2014 Include all undocumented symbols (macros, functions, labels, equs)</li> <li><code>--undocumented-macros</code> \u2014 Include undocumented macros</li> <li><code>--undocumented-functions</code> \u2014 Include undocumented functions</li> <li><code>--undocumented-labels</code> \u2014 Include undocumented labels</li> <li><code>--undocumented-equs</code> \u2014 Include undocumented equs</li> <li><code>-t, --title &lt;TITLE&gt;</code> \u2014 Output title</li> <li><code>--no-minify</code> \u2014 Disable HTML minification (enabled by default)</li> <li><code>-h, --help</code> \u2014 Print help</li> </ul>"},{"location":"basmdoc/#comment-syntax","title":"Comment Syntax","text":"<p>There are two kinds of comments:</p> <ul> <li><code>;;;</code> represents a file comment</li> <li> <p><code>;;</code> represents a standard comment and serves to comment a following z80 token. Documentable tokens are:</p> </li> <li> <p>labels</p> </li> <li>EQU</li> <li>macro definitions</li> <li>function definitions</li> </ul>"},{"location":"basmdoc/cmdline/","title":"BASMDOC Command Line Reference","text":""},{"location":"basmdoc/cmdline/#synopsis","title":"Synopsis","text":"<pre><code>basmdoc [OPTIONS] --output &lt;OUTPUT&gt; &lt;INPUT&gt;...\n</code></pre>"},{"location":"basmdoc/cmdline/#description","title":"Description","text":"<p>BASMDOC generates HTML documentation from Z80 assembly source files by extracting structured comments.</p>"},{"location":"basmdoc/cmdline/#arguments","title":"Arguments","text":""},{"location":"basmdoc/cmdline/#input","title":"<code>&lt;INPUT&gt;...</code>","text":"<p>One or more assembly source files (.asm) or folders. When folders are provided, recursively searches for .asm files.</p>"},{"location":"basmdoc/cmdline/#options","title":"Options","text":""},{"location":"basmdoc/cmdline/#-o-output-output-required","title":"<code>-o, --output &lt;OUTPUT&gt;</code> (required)","text":"<p>Output file path for generated HTML documentation.</p>"},{"location":"basmdoc/cmdline/#-w-wildcards","title":"<code>-w, --wildcards</code>","text":"<p>Enable wildcard expansion on input files.</p>"},{"location":"basmdoc/cmdline/#-u-undocumented","title":"<code>-u, --undocumented</code>","text":"<p>Include all undocumented symbols (macros, functions, labels, equs).</p>"},{"location":"basmdoc/cmdline/#-undocumented-macros","title":"<code>--undocumented-macros</code>","text":"<p>Include undocumented macros in the output.</p>"},{"location":"basmdoc/cmdline/#-undocumented-functions","title":"<code>--undocumented-functions</code>","text":"<p>Include undocumented functions in the output.</p>"},{"location":"basmdoc/cmdline/#-undocumented-labels","title":"<code>--undocumented-labels</code>","text":"<p>Include undocumented labels in the output.</p>"},{"location":"basmdoc/cmdline/#-undocumented-equs","title":"<code>--undocumented-equs</code>","text":"<p>Include undocumented equs in the output.</p>"},{"location":"basmdoc/cmdline/#-t-title-title","title":"<code>-t, --title &lt;TITLE&gt;</code>","text":"<p>Set documentation title.</p>"},{"location":"basmdoc/cmdline/#-no-minify","title":"<code>--no-minify</code>","text":"<p>Disable HTML minification (minification is enabled by default).</p>"},{"location":"basmdoc/cmdline/#-h-help","title":"<code>-h, --help</code>","text":"<p>Print help information.</p>"},{"location":"basmdoc/cmdline/#see-also","title":"See Also","text":""},{"location":"basmdoc/examples/","title":"BASMDOC Examples","text":"<p>This page intentionally left blank. Please refer to the main basmdoc documentation for usage information.</p>"},{"location":"bdasm/","title":"BDASM - Z80 Disassembler","text":"<p>BDASM is a Z80 disassembler for Amstrad CPC that converts binary machine code back into assembly language.</p>"},{"location":"bdasm/#features","title":"Features","text":"<ul> <li>Disassemble Z80 machine code into assembly syntax</li> <li>Support for various input formats (binary files, SNA snapshots, etc.)</li> <li>Configurable output options</li> <li>Label injection from symbol tables</li> <li>Memory range selection</li> </ul>"},{"location":"bdasm/#quick-start","title":"Quick Start","text":"<pre><code># Disassemble a binary file\nbdasm input.bin\n\n# Disassemble with custom output\nbdasm -o output.asm input.bin\n</code></pre> <p>For advanced options, see <code>bdasm --help</code>.</p>"},{"location":"bdasm/#see-also","title":"See Also","text":""},{"location":"bdasm/#integration-with-bndbuild","title":"Integration with BndBuild","text":"<p>BDASM is available as a standalone <code>bdasm</code> binary but can also be used within BndBuild build scripts using the <code>bdasm</code> or <code>dz80</code> command aliases. See BndBuild Commands for integration details.</p>"},{"location":"bdasm/#see-also_1","title":"See Also","text":"<ul> <li>Command Line Reference - Detailed documentation of all command-line options</li> <li>Examples - Usage examples and common workflows</li> <li>BASM - The companion assembler tool</li> </ul>"},{"location":"bdasm/cmdline/","title":"BDASM Command Line Reference","text":""},{"location":"bdasm/cmdline/#synopsis","title":"Synopsis","text":"<pre><code>bdasm [OPTIONS] &lt;INPUT&gt;\n</code></pre>"},{"location":"bdasm/cmdline/#description","title":"Description","text":"<p>BDASM (Benediction Disassembler) is a Z80 disassembler that converts machine code back into human-readable assembly language.</p>"},{"location":"bdasm/cmdline/#arguments","title":"Arguments","text":""},{"location":"bdasm/cmdline/#input","title":"<code>&lt;INPUT&gt;</code>","text":"<p>Input binary file to disassemble (required).</p>"},{"location":"bdasm/cmdline/#options","title":"Options","text":""},{"location":"bdasm/cmdline/#-o-origin-origin","title":"<code>-o, --origin &lt;ORIGIN&gt;</code>","text":"<p>Disassembling origin address (memory location where code will be loaded).</p> <p>Example: <pre><code>bdasm -o 0x4000 program.bin\n</code></pre></p>"},{"location":"bdasm/cmdline/#-d-data-data_bloc","title":"<code>-d, --data &lt;DATA_BLOC&gt;</code>","text":"<p>Relative position that contains data (not code) for a given size.</p> <p>Format: <code>RELATIVE_START(in hexadecimal)-SIZE(in decimal)</code></p> <p>Description: Tells the disassembler that a specific region contains data bytes, not instructions, so it won't try to disassemble them as code.</p> <p>Example: <pre><code># Treat bytes at offset 0x100 for 64 bytes as data\nbdasm -o 0x8000 -d 0x100-64 program.bin\n</code></pre></p>"},{"location":"bdasm/cmdline/#-l-label-label","title":"<code>-l, --label &lt;LABEL&gt;</code>","text":"<p>Set a label at the given address.</p> <p>Format: <code>LABEL=ADDRESS</code></p> <p>Description: Define symbolic names for specific addresses in the disassembly output.</p> <p>Example: <pre><code>bdasm -l MAIN=0x4000 -l LOOP=0x4010 program.bin\n</code></pre></p> <p>You can specify multiple labels: <pre><code>bdasm -l INIT=0x4000 -l GAME_LOOP=0x4100 -l SOUND=0x5000 game.bin\n</code></pre></p>"},{"location":"bdasm/cmdline/#-s-skip-skip","title":"<code>-s, --SKIP &lt;SKIP&gt;</code>","text":"<p>Skip the first <code>&lt;SKIP&gt;</code> bytes of the input file.</p> <p>Description: Useful for skipping file headers or unwanted data at the beginning of the file.</p> <p>Example: <pre><code># Skip 128-byte header\nbdasm -s 128 -o 0x4000 program.bin\n</code></pre></p>"},{"location":"bdasm/cmdline/#-c-compressed","title":"<code>-c, --compressed</code>","text":"<p>Output a simple listing that only contains the opcodes (no addresses or hex dump).</p> <p>Description: Produces minimal output showing only the disassembled instructions, useful for cleaner code review or when you only need the assembly mnemonics.</p> <p>Example: <pre><code>bdasm -c program.bin\n</code></pre></p> <p>Output: <pre><code>LD A,0\nLD BC,0x1234\nJP 0x4000\n</code></pre></p> <p>Vs. normal output: <pre><code>4000: 3E 00        LD A,0\n4002: 01 34 12     LD BC,0x1234\n4005: C3 00 40     JP 0x4000\n</code></pre></p>"},{"location":"bdasm/cmdline/#-h-help","title":"<code>-h, --help</code>","text":"<p>Print help information.</p>"},{"location":"bdasm/cmdline/#-v-version","title":"<code>-V, --version</code>","text":"<p>Print version information.</p>"},{"location":"bdasm/cmdline/#environment-variables","title":"Environment Variables","text":"<p>None</p>"},{"location":"bdasm/cmdline/#exit-status","title":"Exit Status","text":"<ul> <li><code>0</code> - Success</li> <li><code>1</code> - Error during disassembly or file I/O</li> </ul>"},{"location":"bdasm/cmdline/#examples","title":"Examples","text":"<p>See Examples for detailed usage examples.</p>"},{"location":"bdasm/examples/","title":"BDASM Examples","text":""},{"location":"bdasm/examples/#basic-disassembly","title":"Basic Disassembly","text":"<p>Disassemble a binary file to stdout:</p> <pre><code>bdasm game.bin\n</code></pre> <p>Save output to a file:</p> <pre><code>bdasm game.bin -o game.asm\n</code></pre>"},{"location":"bdasm/examples/#advanced-usage","title":"Advanced Usage","text":"<p>For information on additional options such as address ranges, symbol tables, and format handling, run:</p> <pre><code>bdasm --help\n</code></pre>"},{"location":"bdasm/examples/#see-also","title":"See Also","text":"<ul> <li>Command Line Reference - Complete option reference</li> <li>BASM Documentation - For assembling the disassembled code</li> </ul>"},{"location":"bndbuild/","title":"Bndbuild","text":""},{"location":"bndbuild/#synopsis","title":"Synopsis","text":"<p>Crossdev tool tailored to build Amstrad CPC project although it can generalize to z80-related projects or even any buildable projects. It embeds the Benediction crossdev ecosystem such as <code>basm</code>, <code>m4</code>, <code>img2cpc</code> but can still execute external programs such as <code>sjasmplus</code>, <code>rasm</code>, <code>winape</code>, <code>ace</code> it is able to download and install or any command chosen by the user.</p> <p>It can be used  as a command launcher or a build system and is available as a command line and a graphical version.</p> <p>As it is still in beta stage, I do not properly play with version numbering. This will be fixed as soon as there is a user base using it.</p>"},{"location":"bndbuild/#command-launcher","title":"Command launcher","text":"<p>You can see <code>bndbuild</code> as a universal proxy to plenty of crossdev tools without manually installing them. See the documentation and the <code>--direct</code> argument. So if you are not a user of the other Benediction tools, and whatever you are using the build system,  <code>bndbuild</code> can still ease your crossdev workflow by taking care of downloading, installing and launching tools. See the help for the list of available tools. Fell free to request more in the issue tracker.</p>"},{"location":"bndbuild/#build-system","title":"Build system","text":"<p>You can see <code>bndbuild</code> as a build system similar to Makefile but with a different syntax and better integration. The build rules are described in a <code>yaml</code> file templated by <code>jinja</code>  engine. Check for example a simple test project at https://github.com/cpcsdk/rust.cpclib/tree/master/cpclib-bndbuild/tests/dummy folder, or a more complicated one that use various commands and templating at https://github.com/cpcsdk/rust.cpclib/tree/master/cpclib-bndbuild/tests/ucpm.</p> <p>The documentation is quite minimal at the moment, but included examples code should be still valid and assembled properly.  The user base being quite small, lots of bugs can remain. Do note hesitate to fill issues https://github.com/cpcsdk/rust.cpclib/issues or propose fixes.</p>"},{"location":"bndbuild/#installation","title":"Installation","text":""},{"location":"bndbuild/#download","title":"Download","text":"<p>Prefer to compile yourself <code>bndbuild</code>. But you can still download latest versions here:</p> <ul> <li>Command line version for Windows</li> <li>Command line version for Linux</li> <li>Graphical version for Windows</li> <li>Graphical version for Linux</li> <li>Installer for the experimental new graphical version for Windows</li> <li>Installer for the experimental new graphical version for Linux</li> </ul> <p>Windows antivirus tend to flag <code>rust</code> programs as virus. Sadly it is the case for <code>bndbuild</code>.</p>"},{"location":"bndbuild/#compile","title":"Compile","text":"<p>You need to install the <code>rust</code> toolchain with its nightly version to compile <code>bndbuild</code> (https://rustup.rs/) as well as some additional dependencies.</p> <ul> <li>unbuntu-like dependencies: libgtk-3-dev libcogl-pango-dev libxcb-render0-dev libxcb-shape0-dev libxcb-xfixes0-dev libspeechd-dev libxkbcommon-dev libssl-dev libxdo-dev</li> <li>windows: msvc</li> <li>macos: ??? it probably does not compile yet</li> </ul> <pre><code>$ git clone git@github.com:cpcsdk/rust.cpclib.git --depth 1\n$ cd rust.cpclib/\n$ cargo install --path cpclib-bndbuild          # For the command line version\n$ cargo install --path cpclib-visual-bndbuild   # For the graphical version\n$ cd cpclib-bndbuild-tauri &amp;&amp; cargo tauri build # To create the new version. The folder target/release/bundle contains the installers\n</code></pre>"},{"location":"bndbuild/#build-format","title":"Build format","text":"<p>The rules description file must respect the <code>yaml</code> text file format. It can be named <code>bndbuild.yml</code>, <code>bnd.build</code> or <code>build.bnd</code> but this can be overridden by the <code>-f</code> argument. It contains list of rules. Each rule can have the following keys:</p> <ul> <li><code>tgt</code>: to list the files build by the rule. Either all the files in one line or one file per line. </li> <li><code>dep</code>: to list the files needed to build the rule. Either all the files in one line or one file per line.</li> <li><code>cmd</code>: a command, or a list of commands, executed by the rule. Commands prefixed by <code>-</code> can silently fail. <code>$@</code> is replaced by the first target and <code>$&lt;</code> is replaced by the first dependency.&gt;</li> <li><code>help</code>: an optional help text to describe the rule.</li> <li><code>phony</code>: an optional tag to express the rule does not generate anyfile (it is inferred when the commands are not extern). Mainly serves for the <code>--watch</code> argument.</li> <li> <p><code>constraint</code>: Allows to filter the rule for the specified expression</p> </li> <li> <p>Functions: <code>hostname(MY_HOST)</code> is true if the machine is <code>MY_HOST</code>. <code>os(windows)</code>, <code>os(linux)</code>, and <code>os(macosx)</code> are true for the specified os.</p> </li> <li>Negation: <code>not(EXPRESSION)</code> is true when <code>EXPRESSION</code> is false</li> <li>Combination: <code>and(EXPRESSION, EXPRESSION, ...)</code> and <code>or(EXPRESSION, EXPRESSION, ...)</code> allow to combine expressions</li> </ul> <p>If you know how to configure your IDE to statically verify your yaml files, here is the configuration you can provide: https://raw.githubusercontent.com/cpcsdk/rust.cpclib/refs/heads/master/cpclib-bndbuild/schema.json</p>"},{"location":"bndbuild/#templating","title":"Templating","text":"<p>A jinja-like templating is used to generate the final yaml file : https://docs.rs/minijinja/latest/minijinja/syntax/index.html. So you can automatically generate rules with its macro system.</p>"},{"location":"bndbuild/#preset-variables","title":"Preset variables","text":"<ul> <li><code>FAP_INIT_PATH</code>: path to the assembled player initializer for fap</li> <li><code>FAP_PLAY_PATH</code>: path to the assembled player for fap</li> <li><code>AKG_PATH</code>: path the the AKG player</li> </ul>"},{"location":"bndbuild/#example","title":"Example","text":"<p>Here is an example to build a dummy Amstrad CPC project and execute on the real machine thanks to the m4. It is available in tests/dummy (the repository does not contains the external tools needed to properly build the project. It is straightforward to add them). Successive calls to the build task do nothing as soon as no file has been modified. It is also possible to watch the dependencies of a given task to automatically build it when they are modified. This cannot be seen with the capture, but each time m4 command is launched, the project is send into the CPC machine (it takes several seconds however).</p> <p></p>"},{"location":"bndbuild/#real-world-projects","title":"Real-world Projects","text":"<p>Here are some demo projects that use bndbuild as their build system:</p> <ul> <li>Blight - Demo released at Benediction party 5</li> <li>4deKades - Demo presented at Revision 2025</li> <li>Etchy - Demo presented at Revision 2024</li> </ul> <p>These projects demonstrate real-world usage of bndbuild's features including templating, multi-assembler support, graphics conversion, and automated build pipelines.</p>"},{"location":"bndbuild/#help","title":"Help","text":"<pre><code>bndbuild --help`\nCan be used as a project builder similar to Make, but using a yaml project description, or can be used as any Benediction crossdev tool (basm, img2cpc, xfer, disc). This way only bndbuild needs to be installed.\n\nBenediction CPC demo project builder\n\nUsage: bndbuilder [OPTIONS] [TARGET]...\n\nArguments:\n  [TARGET]...\n          Provide the target(s) to run.\n\nOptions:\n  -h, --help [&lt;CMD&gt;]\n          Show the help of the given subcommand CMD.\n\n          [default: bndbuild]\n          [possible values: cpc, emu, emuctrl, emucontrol, ace, acedl, winape, cpcec, amspirit, sugarbox, basm, assemble, orgams, rasm, sjasmplus, vasm, bndbuild, build, cp, copy, dsk, disc, echo, print, extern, fap, img2cpc, imgconverter, hideur, impdsk, impdisc, martine, rm, del, xfer, cpcwifi, m4]\n\n      --direct\n          Bypass the task file and directly execute a command along: [cpc, emu, emuctrl, emucontrol, ace, acedl, winape, cpcec, amspirit, sugarbox, basm, assemble, orgams, rasm, sjasmplus, vasm, bndbuild, build, cp, copy, dsk, disc, echo, print, extern, fap, img2cpc, imgconverter, hideur, impdsk, impdisc, martine, rm, del, xfer, cpcwifi, m4].\n\n  -V, --version\n          Print version\n\n      --dot\n          Generate the .dot representation of the selected bndbuild.yml file\n\n      --show\n          Show the file AFTER interpreting the templates\n\n  -f, --file &lt;FILE&gt;\n          Provide the YAML file for the given project.\n\n  -w, --watch\n          Watch the targets and permanently rebuild them when needed.\n\n  -l, --list\n          List the available targets\n\n  -D, --define &lt;DEFINE_SYMBOL&gt;\n          Provide a symbol with its value (default set to 1)\n\n  -c, --clear-cache [&lt;clear&gt;]\n          Clear cache folder that contains all automatically downloaded executables. Can optionally take one argument to clear the cache of the corresponding executable.\n\n          [possible values: ace, acedl, winape, cpcec, amspirit, sugarbox, rasm, sjasmplus, vasm, fap, impdsk, impdisc, martine]\n\n      --init\n          Init a new project by creating it\n\n  -a, --add &lt;add&gt;\n          Add a new basm target in an existing bndbuild.yml (or create it)\n\n  -d, --dep &lt;dep&gt;\n          The source files\n\n  -k, --kind &lt;kind&gt;\n          The kind of command to be added in the yaml file\n\n          [possible values: cpc, emu, emuctrl, emucontrol, ace, acedl, winape, cpcec, amspirit, sugarbox, basm, assemble, orgams, rasm, sjasmplus, vasm, bndbuild, build, cp, copy, dsk, disc, echo, print, extern, fap, img2cpc, imgconverter, hideur, impdsk, impdisc, martine, rm, del, xfer, cpcwifi, m4]\n\ncpclib-bndbuild 0.6.0 embedded by cpclib-bndbuild 0.6.0\n</code></pre>"},{"location":"bndbuild/#commands","title":"Commands","text":"<p>Bndbuild integrates many tools to support the complete CPC development workflow. These can be invoked directly using <code>--direct -- COMMAND [ARG...]</code> without needing a build file.</p> <p>For a complete reference of all available commands and their options, see Commands Reference.</p>"},{"location":"bndbuild/#available-command-categories","title":"Available Command Categories","text":"<ul> <li>Display &amp; External: <code>echo</code>, <code>extern</code></li> <li>Image Conversion: </li> <li>img2cpc (im2cpc) - Benediction image converter</li> <li><code>martine</code> - Impact image converter</li> <li>File Management: <code>cp</code>, <code>rm</code></li> <li>Disc Management: </li> <li>dskmanager (dsk, disc) - Benediction DSK manager</li> <li>catalog (cat) - Catalog listing tool</li> <li>hideur - AMSDOS header management</li> <li><code>impdsk</code> - Impact DSK manager  </li> <li>Assemblers: </li> <li>BASM - Benediction assembler</li> <li><code>rasm</code>, orgams/borgams, <code>sjasmplus</code>, <code>vasm</code></li> <li>Emulators: </li> <li><code>cpc/emu</code> - Emulator-agnostic interface</li> <li><code>ace</code>, <code>winape</code>, <code>cpcec</code>, <code>amspirit</code>, <code>sugarbox</code></li> <li>Transfer: xfertool (xfer) - M4 support</li> </ul> <p>Run <code>bndbuild --help &lt;command&gt;</code> to see detailed help for any specific command.</p>"},{"location":"bndbuild/commands/","title":"Bndbuild Commands","text":"<p>The <code>--direct -- COMMAND [ARG...]</code> allows to directly launch a command without managing a build file. <code>COMMAND</code> can be any command accepted in <code>cmd</code> key (they are listed in the documentation of <code>--help</code>).</p>"},{"location":"bndbuild/commands/#command-types","title":"Command Types","text":"<p>Commands available in bndbuild fall into three categories:</p> <ol> <li>Embedded-only commands - Built into bndbuild for convenience (e.g., <code>echo</code>, <code>cp</code>, <code>rm</code>, <code>mv</code>, <code>mkdir</code>, <code>extern</code>)</li> <li>Standalone cpclib tools - Available both as standalone binaries and embedded in bndbuild (e.g., <code>basm</code>, <code>bdasm</code>, <code>img2cpc</code>, <code>catalog</code>, <code>snapshot</code>, <code>fade</code>, etc.). These tools can be run independently outside of bndbuild.</li> <li>External tools - Third-party programs that bndbuild can download and integrate (e.g., <code>rasm</code>, <code>martine</code>, <code>winape</code>, etc.)</li> </ol> <p>Most cpclib tools documented here exist as standalone command-line programs that can be used independently. See their individual documentation pages for standalone usage.</p> <p>Several commands need to be downloaded (so internet is required), assembled (so their prerequisites need to be installed). There is no (yet) cleanup if download/compilation fail. So think to do <code>bndbuild --clear &lt;cmd&gt;</code> to cleanup manually.</p>"},{"location":"bndbuild/commands/#display","title":"Display","text":""},{"location":"bndbuild/commands/#display-management-echo-echoprint","title":"Display management: echo (echo,print)","text":"<pre><code>Print the arguments.\n\nUsage: echo [arguments]...\n\nArguments:\n  [arguments]...\n          Words to print\n</code></pre>"},{"location":"bndbuild/commands/#external-programs","title":"External Programs","text":""},{"location":"bndbuild/commands/#external-program-management-extern-extern","title":"External program management: extern (extern)","text":"<pre><code>Launch an external command.\n\nUsage: extern &lt;program&gt; [arguments]...\n\nArguments:\n  &lt;program&gt;\n          The program to execute\n  [arguments]...\n          The arguments of the program\n</code></pre>"},{"location":"bndbuild/commands/#file-management","title":"File Management","text":""},{"location":"bndbuild/commands/#file-management-cp-cpcopy","title":"File management: cp (cp,copy)","text":"<pre><code>Copy files.\n\n\nUsage: cp [arguments]...\n\nArguments:\n  [arguments]...\n          Files to copy. Last one being the destination\n\nInner command of cpclib-bndbuild 0.6.0\n</code></pre>"},{"location":"bndbuild/commands/#file-management-rm-rm-del","title":"File management: rm (rm, del)","text":"<pre><code>Delete files.\n\n\nUsage: rm [arguments]...\n\nArguments:\n  [arguments]...\n          Files to delete.\n\nInner command of cpclib-bndbuild 0.6.0\n</code></pre>"},{"location":"bndbuild/commands/#file-management-mv-mvmoverename","title":"File management: mv (mv,move,rename)","text":"<pre><code>Rename files.\n\nUsage: mv [arguments]...\n\nArguments:\n  [arguments]...\n          Files to move. With 2 files, first one is renamed as second one. With more than 2 files, last one is the destination directory.\n\nInner command of cpclib-bndbuild 0.11.0\n</code></pre>"},{"location":"bndbuild/commands/#file-management-mkdir-mkdir","title":"File management: mkdir (mkdir)","text":"<pre><code>Create directories.\n\nUsage: mkdir [OPTIONS] [arguments]...\n\nArguments:\n  [arguments]...\n          Folders to create.\n\nOptions:\n  -p, --parents  Set to specify if missing parent directories must be created\n  -i, --ignore   Set to specify we ignore existing folders\n\nInner command of cpclib-bndbuild 0.11.0\n</code></pre>"},{"location":"bndbuild/commands/#file-management-orgams-to-text-conversion-borgams","title":"File management: Orgams to text conversion (borgams)","text":"<p>Standalone: Available as <code>borgams</code> binary. For complete documentation, see Borgams Documentation.</p>"},{"location":"bndbuild/commands/#file-management-snasnapshot-management-snasnpashot","title":"File management: SNA/Snapshot management (sna,snpashot)","text":"<p>Standalone: Available as <code>snapshot</code> binary. Create and manipulate snapshot files. For complete documentation, see Snapshot Documentation.</p>"},{"location":"bndbuild/commands/#image-processing","title":"Image Processing","text":""},{"location":"bndbuild/commands/#image-management-benediction-transfer-tool-img2cpcimgconverter","title":"Image management: Benediction transfer tool (img2cpc,imgconverter)","text":"<p>Standalone: Available as <code>img2cpc</code> binary. For complete documentation, see img2cpc Documentation.</p>"},{"location":"bndbuild/commands/#image-management-cpc-to-image-cpc2img","title":"Image management: CPC to image (cpc2img)","text":"<p>Standalone: Available as <code>cpc2img</code> binary. For complete documentation, see CPC2IMG Documentation.</p>"},{"location":"bndbuild/commands/#image-management-impact-transfer-tool-martine","title":"Image management: Impact transfer tool (martine)","text":"<p>For complete documentation and download, see https://github.com/jeromelesaux/martine.</p>"},{"location":"bndbuild/commands/#image-management-grafx2-grafx2grafx","title":"Image management: Grafx2 (grafx2,grafx)","text":"<p>Advanced graphics editor. For complete documentation, see https://gitlab.com/GrafX2/grafX2.</p>"},{"location":"bndbuild/commands/#image-management-conversion-convgeneric","title":"Image management: Conversion (convgeneric)","text":"<p>Generic file format conversion utility. For complete documentation and download, see https://github.com/EdouardBERGE/convgeneric.</p>"},{"location":"bndbuild/commands/#image-management-hsp-compiler-hspcompilerhspc","title":"Image management: HSP Compiler (hspcompiler,hspc)","text":"<p>HxC Sound Player compiler for CPC music. For complete documentation, see https://github.com/EdouardBERGE/hspcompiler.</p>"},{"location":"bndbuild/commands/#image-management-fade-fade","title":"Image management: Fade (fade)","text":"<p>Standalone: Available as <code>fade</code> binary. For complete documentation, see Fade Documentation.</p>"},{"location":"bndbuild/commands/#disc-management","title":"Disc Management","text":""},{"location":"bndbuild/commands/#disc-management-benediction-dsk-manager-dskdisc","title":"Disc management: Benediction dsk manager (dsk,disc)","text":"<p>Standalone: Available as <code>dskmanager</code> binary. Low-level DSK disc image manipulation tool.</p> <p>Features: - Format DSK disc images - Add files to DSK images - Catalog operations - Low-level disc track/sector manipulation</p> <p>Note: Within BndBuild, use the <code>dsk</code> or <code>disc</code> command. For standalone usage, the binary is called <code>dskmanager</code>. For complete documentation, see DSKManager Documentation.</p>"},{"location":"bndbuild/commands/#disc-management-amsdos-header-management-hideur","title":"Disc management: Amsdos header management (hideur)","text":"<p>Standalone: Available as <code>hideur</code> binary. Manage AMSDOS headers on files for proper CPC disc compatibility. For complete documentation, see Hideur Documentation.</p>"},{"location":"bndbuild/commands/#disc-management-catalog-listing-catalogcat","title":"Disc management: Catalog listing (catalog,cat)","text":"<p>Standalone: Available as <code>catalog</code> binary. List contents of DSK files. For complete documentation, see Catalog Documentation.</p>"},{"location":"bndbuild/commands/#disc-management-impact-dsk-manager-impdskimpdisc","title":"Disc management: Impact dsk manager (impdsk,impdisc)","text":"<p>For complete documentation and download, see https://github.com/jeromelesaux/dsk.</p>"},{"location":"bndbuild/commands/#cartridge-management","title":"Cartridge Management","text":""},{"location":"bndbuild/commands/#cartridge-management-cpr-analysis-cpr","title":"Cartridge management: CPR analysis (cpr)","text":"<p>Standalone: Available as <code>cpr</code> binary. Analyze and compare CPR cartridge files. For complete documentation, see CPR CLI Documentation.</p>"},{"location":"bndbuild/commands/#assemblers","title":"Assemblers","text":""},{"location":"bndbuild/commands/#assembler-basm-basmassemble","title":"Assembler: BASM (basm,assemble)","text":"<p>Standalone: Available as <code>basm</code> binary. For complete documentation, see BASM Documentation.</p>"},{"location":"bndbuild/commands/#assembler-rasm-rasm","title":"Assembler: RASM (rasm)","text":"<p>For complete documentation, see http://rasm.wikidot.com/.</p>"},{"location":"bndbuild/commands/#assembler-orgams-orgams","title":"Assembler: Orgams (orgams)","text":"<p>Standalone: Available as <code>orgams</code> binary. For complete documentation, see Orgams Documentation.</p> <p>Orgams is a native assembler. So, an emulator is used to assemble source. WARNING: it currently does not work properly under windows.</p>"},{"location":"bndbuild/commands/#assembler-sjasmplus-sjasmplus","title":"Assembler: Sjasmplus (sjasmplus)","text":"<p>For complete documentation, see https://z00m128.github.io/sjasmplus/documentation.html.</p>"},{"location":"bndbuild/commands/#assembler-uz80as-uz80","title":"Assembler: UZ80AS (uz80)","text":"<p>Universal Z80 assembler. For complete documentation, see http://cngsoft.no-ip.org/uz80.htm.</p>"},{"location":"bndbuild/commands/#assembler-vasm-z80-oldstyle-vasm","title":"Assembler: Vasm z80 oldstyle (vasm)","text":"<p>http://sun.hasenbraten.de/vasm/release/vasm_6.html</p>"},{"location":"bndbuild/commands/#disassemblers","title":"Disassemblers","text":""},{"location":"bndbuild/commands/#disassembler-bdasm-bdasmdz80","title":"Disassembler: BDASM (bdasm,dz80)","text":"<p>Standalone: Available as <code>bdasm</code> binary. Z80 disassembler. For complete documentation, see BDASM Documentation.</p>"},{"location":"bndbuild/commands/#disassembler-disark-disark","title":"Disassembler: DISARK (disark)","text":"<p>Arkos Tracker disassembler utility. For complete documentation, see https://julien-nevo.com/disark/.</p>"},{"location":"bndbuild/commands/#emulators","title":"Emulators","text":""},{"location":"bndbuild/commands/#emulator-emulator-agnostic-emulation-cpcemuemuctrlemucontrol","title":"Emulator: Emulator-agnostic emulation (cpc,emu,emuctrl,emucontrol)","text":"<p>Standalone: Available as <code>cpcrunner</code> binary. For complete documentation, see CPC Runner Documentation.</p>"},{"location":"bndbuild/commands/#emulator-ace-dl-aceacedl","title":"Emulator: ACE DL (ace,acedl)","text":"<p>ACE emulator with direct loading support. For complete documentation, see https://roudoudou.com/ACE-DL/.</p>"},{"location":"bndbuild/commands/#emulator-amspirit-amspirit","title":"Emulator: AMSpiriT (amspirit)","text":"<p>For complete documentation, see https://www.amspirit.fr/.</p>"},{"location":"bndbuild/commands/#emulator-caprice-forever-caprice","title":"Emulator: Caprice Forever (caprice)","text":"<p>Classic CPC emulator. For more information, see http://www.caprice32.org/.</p>"},{"location":"bndbuild/commands/#emulator-cpc-emu-power-cpcemupower","title":"Emulator: CPC Emu Power (cpcemupower)","text":"<p>Advanced CPC emulator with debugging features. For complete documentation, see https://www.cpc-power.com/cpcarchives/index.php?page=articles&amp;num=446.</p>"},{"location":"bndbuild/commands/#emulator-cpcec-cpcec","title":"Emulator: CPCEC (cpcec)","text":"<p>For complete documentation, see http://cngsoft.no-ip.org/cpcec.htm.</p>"},{"location":"bndbuild/commands/#emulator-sugarboxv2-sugarbox","title":"Emulator: SugarboxV2 (sugarbox)","text":"<p>For complete documentation and download, see https://github.com/Tom1975/SugarboxV2.</p>"},{"location":"bndbuild/commands/#emulator-winape-winape","title":"Emulator: Winape (winape)","text":"<p>For complete documentation, see https://www.winape.net/help/.</p>"},{"location":"bndbuild/commands/#hardware-transfer","title":"Hardware Transfer","text":""},{"location":"bndbuild/commands/#transfer-m4-support-xfercpcwifim4","title":"Transfer: M4 support (xfer,cpcwifi,m4)","text":"<p>Standalone: Available as <code>cpclib-xfertool</code> binary. For complete documentation, see XferTool Documentation.</p>"},{"location":"bndbuild/commands/#build-management","title":"Build Management","text":""},{"location":"bndbuild/commands/#build-bndbuild-bndbuildbuild","title":"Build: BndBuild (bndbuild,build)","text":"<p>Recursive bndbuild invocation for nested build configurations. For complete documentation, see BndBuild Documentation.</p>"},{"location":"bndbuild/commands/#build-basiclocomotive-locomotivebasic","title":"Build: BASIC/Locomotive (locomotive,basic)","text":"<p>Standalone: Library-only (no standalone binary). BASIC tokenizer and manager for Locomotive BASIC programs. For complete documentation, see Locomotive Documentation.</p>"},{"location":"bndbuild/commands/#data-compression","title":"Data Compression","text":""},{"location":"bndbuild/commands/#compression-crunch-crunchcompress","title":"Compression: Crunch (crunch,compress)","text":"<p>Standalone: Available as <code>crunch</code> binary. Data compression utility for Z80 programs. For complete documentation, see Crunch Documentation.</p>"},{"location":"bndbuild/commands/#cdt-tools","title":"CDT Tools","text":""},{"location":"bndbuild/commands/#cdt-rtzx-rtzx","title":"CDT: RTZX (rtzx)","text":"<p>Real-time ZX data compression. For complete documentation, see https://github.com/LichP/rtzx.</p>"},{"location":"bndbuild/commands/#audio-tools","title":"Audio Tools","text":""},{"location":"bndbuild/commands/#audio-arkos-tracker-3-at3arkostracker3","title":"Audio: Arkos Tracker 3 (at3,ArkosTracker3)","text":"<p>Music tracker for CPC sound chip programming. For complete documentation, see https://www.julien-nevo.com/arkostracker/.</p>"},{"location":"bndbuild/commands/#audio-ay-test-ayt","title":"Audio: AY Test (ayt)","text":"<p>AY-3-8912 sound chip test utility. For complete documentation, see https://www.julien-nevo.com/arkostracker/.</p>"},{"location":"bndbuild/commands/#audio-chip-and-sfx-chipnsfx","title":"Audio: Chip and SFX (chipnsfx)","text":"<p>Sound effects and chip music utility. For complete documentation, see http://cngsoft.no-ip.org/chipnsfx.htm.</p>"},{"location":"bndbuild/commands/#audio-minimiser-miny","title":"Audio: Minimiser (miny)","text":"<p>Music data minimization tool. For complete documentation, see https://github.com/tattlemuss/minymiser.</p>"},{"location":"bndbuild/commands/#audio-song-to-akg-songtoakg","title":"Audio: Song to AKG (SongToAkg)","text":"<p>Convert song data to AKG format. For complete documentation, see https://www.julien-nevo.com/arkostracker/.</p>"},{"location":"bndbuild/commands/#audio-song-to-akm-songtoakm","title":"Audio: Song to AKM (SongToAkm)","text":"<p>Convert song data to AKM format. For complete documentation, see https://www.julien-nevo.com/arkostracker/.</p>"},{"location":"bndbuild/commands/#audio-song-to-aky-songtoaky","title":"Audio: Song to AKY (SongToAky)","text":"<p>Convert song data to AKY format. For complete documentation, see https://www.julien-nevo.com/arkostracker/.</p>"},{"location":"bndbuild/commands/#audio-song-to-events-songtoevents","title":"Audio: Song to Events (SongToEvents)","text":"<p>Convert song data to event stream format. For complete documentation, see https://www.julien-nevo.com/arkostracker/.</p>"},{"location":"bndbuild/commands/#audio-song-to-raw-songtoraw","title":"Audio: Song to Raw (SongToRaw)","text":"<p>Convert song data to raw binary format. For complete documentation, see https://www.julien-nevo.com/arkostracker/.</p>"},{"location":"bndbuild/commands/#audio-song-to-sound-effects-songtosoundeffects","title":"Audio: Song to Sound Effects (SongToSoundEffects)","text":"<p>Convert song data to sound effects format. For complete documentation, see https://www.julien-nevo.com/arkostracker/.</p>"},{"location":"bndbuild/commands/#audio-song-to-vgm-songtovgm","title":"Audio: Song to VGM (SongToVgm)","text":"<p>Convert song data to Video Game Music format. For complete documentation, see https://www.julien-nevo.com/arkostracker/.</p>"},{"location":"bndbuild/commands/#audio-song-to-wav-songtowav","title":"Audio: Song to WAV (SongToWav)","text":"<p>Convert song data to WAV audio format. For complete documentation, see https://www.julien-nevo.com/arkostracker/.</p>"},{"location":"bndbuild/commands/#audio-song-to-ym-songtoym","title":"Audio: Song to YM (SongToYm)","text":"<p>Convert song data to YM audio format. For complete documentation, see https://www.julien-nevo.com/arkostracker/.</p>"},{"location":"bndbuild/commands/#development-tools","title":"Development Tools","text":""},{"location":"bndbuild/commands/#development-basmdoc-basmdocdoc","title":"Development: BASMDOC (basmdoc,doc)","text":"<p>Standalone: Available as <code>basmdoc</code> binary. Generate documentation from BASM source code. For complete documentation, see BASMDOC Documentation.</p>"},{"location":"bndbuild/commands/#development-z80-profiler-z80profiler","title":"Development: Z80 Profiler (Z80Profiler)","text":"<p>Z80 code profiler for performance analysis. For complete documentation, see https://www.julien-nevo.com/arkostracker/.</p>"},{"location":"bndbuild/examples/","title":"Bndbuild Examples","text":"<p>This page documents working examples from the cpclib-bndbuild/tests directory. Each example demonstrates different features and use cases of bndbuild.</p> <p>Note: Build files use a mix of Jinja templating and YAML syntax.</p>"},{"location":"bndbuild/examples/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Basic Examples</li> <li>dummy - Basic Snapshot Build</li> <li>hello_world - DSK Creation</li> <li>Templating Examples</li> <li>jinja - Variable Substitution</li> <li>expansion - Advanced Target Expansion</li> <li>Assembler Integration</li> <li>orgams - Monogams/Orgams Workflow</li> <li>C Language Support</li> <li>hello_c - C Compilation</li> <li>Music and Audio</li> <li>ay_players - AY Music Players</li> <li>at3 - Arkos Tracker 3</li> <li>chipnsfx - ChipNSFX Music</li> <li>Data Compression</li> <li>crunch - Multiple Crunchers</li> <li>Complex Projects</li> <li>ucpm - Multi-Format Project</li> <li>delegated - Delegated Build Rules</li> <li>Emulator Integration</li> <li>emu - Emulator Launching</li> <li>watch - Watch Mode</li> <li>Help System</li> <li>help - Rule Help</li> </ul>"},{"location":"bndbuild/examples/#basic-examples","title":"Basic Examples","text":""},{"location":"bndbuild/examples/#dummy-basic-snapshot-build","title":"dummy - Basic Snapshot Build","text":"<p>Location: cpclib-bndbuild/tests/dummy</p> <p>A simple project demonstrating snapshot generation with basm, image conversion with img2cpc, and emulator integration.</p> <p>Build file: <code>bndbuild.yml</code></p> <pre><code>- tgt: build\n  dep: dummy.sna\n  help: Ask to build the snapshot file without explicitly giving its name\n\n- tgt: dummy.sna dummy.lst dummy.sym\n  dep: dummy_code.asm dummy_logo.o dummy_logo_palette.bin\n  cmd: basm dummy_code.asm --snapshot -o dummy.sna --lst dummy.lst --sym dummy.sym --sym_kind winape\n  help: Generate the snapshot file using basm\n\n- tgt: dummy_logo.o dummy_logo_palette.bin\n  dep: dummy_logo_exin.bmp\n  cmd: &gt;\n    img2cpc dummy_logo_exin.bmp \n      --mode 1 sprite \n      -c dummy_logo_conf.asm \n      --palette dummy_logo_palette.bin \n      -o dummy_logo.o\n  help: Convert the BMP file and generate the necessary data to build it\n\n- tgt: clean\n  phony: true\n  cmd:\n    - -rm *.o *.bin *.lst\n    - -rm dummy_logo_conf.asm\n  help: Remove all needed generated files\n\n- tgt: distclean\n  phony: true\n  dep: clean\n  cmd: -rm dummy.sna\n  help: Remove the snapshot\n\n- tgt: m4\n  dep: build\n  cmd: xfer 192.168.1.26 -y dummy.sna\n  help: Send the generated snapshot to the M4 card corresponding to the given IP address\n\n- tgt: cpcec\n  dep: build\n  cmd: emu --emulator cpcec --snapshot dummy.sna run\n\n- tgt: winape\n  dep: build\n  phony: true\n  cmd: emu --emulator winape --snapshot dummy.sna run\n\n- tgt: ace\n  dep: build\n  phony: true\n  cmd: emu --emulator ace --snapshot dummy.sna run\n</code></pre> <p>Key Features: - Snapshot generation with basm - Image conversion with img2cpc - Multiple emulator targets - M4 transfer support - Clean and distclean rules</p>"},{"location":"bndbuild/examples/#hello_world-dsk-creation","title":"hello_world - DSK Creation","text":"<p>Location: cpclib-bndbuild/tests/hello_world</p> <p>Demonstrates two approaches to creating DSK files: directly from basm and as post-processing.</p> <p>Build file: <code>bndbuild.yml</code></p> <pre><code>#!/usr/bin/env -S bndbuild -f\n\n- tgt: dsk\n  dep: hello1.dsk hello2.dsk\n  help: In this example, we add files to a dsk directly from basm (hello1.dsk) or as a postprocessing (hello2.dsk)\n\n\n- tgt: HELLO2.BIN hello1.dsk\n  dep: hello.asm\n  cmd: basm hello.asm --header -o HELLO2.BIN\n\n- tgt: hello2.dsk\n  dep: HELLO2.BIN\n  cmd: \n  - dsk hello2.dsk format --format data\n  - dsk hello2.dsk add HELLO2.BIN\n\n- tgt: clean\n  cmd: -rm HELLO2.BIN\n\n- tgt: distclean\n  dep: clean\n  cmd: -rm hello1.dsk hello2.dsk\n</code></pre> <p>Key Features: - DSK formatting and file addition - AMSDOS header generation - Multiple command execution</p>"},{"location":"bndbuild/examples/#templating-examples","title":"Templating Examples","text":""},{"location":"bndbuild/examples/#jinja-variable-substitution","title":"jinja - Variable Substitution","text":"<p>Location: cpclib-bndbuild/tests/jinja</p> <p>Shows how to use Jinja templating for variable substitution and conditional logic.</p> <p>Build file: <code>bndbuild.yml</code></p> <pre><code>#!/usr/bin/env -S bndbuild -f\n\n# bndbuild -DCPCADDR=&lt;myip&gt; m4  if you want a specific address for the M4\n# bndbuild -DASSEMBLER=rasm m4 if you want to assemble with rasm (needs to be on the PATH) instead of basm\n# bndbuild -DASSEMBLER=rasm  --dot | dot -Tpng | display if you want to see the dependency tree for rasm-based construction\n\n{%- if not CPCADDR -%}\n{%-   set CPCADDR = \"192.168.1.26\" -%}\n{%- endif -%}\n{{ASSEMBLER}}\n\n{%- if not ASSEMBLER -%}\n{%-   set ASSEMBLER = \"basm\" -%}\n{%- endif -%}\n{{ASSEMBLER}}\n\n{%- macro assemble(base) -%}\n{%-  if ASSEMBLER == \"rasm\" -%}\n        rasm {{base}}\n{%-  elif ASSEMBLER == \"basm\" -%}\n        basm {{base}}\n{%-  else -%}\n{{-     fail(\"wrong ASSEMBER value: \" + ASSEMBLER) }}\n{%-  endif -%}\n{%- endmacro -%}\n\n{%- set source = \"test.asm\" -%}\n{%- set prog = \"TEST\" %}\n\n- dep: {{source}}\n  tgt: {{prog}}\n  cmd: {{assemble(source)}}\n\n- tgt: distclean\n  phony: true\n  cmd: -rm {{prog}}\n\n- dep: {{prog}}\n  tgt: m4\n  cmd: xfer {{CPCADDR}} -y {{prog}}\n</code></pre> <p>Key Features: - Variable definition and defaults - Conditional logic - Jinja macros - Command-line variable override (<code>-D</code> flag) - Error handling with <code>fail()</code></p>"},{"location":"bndbuild/examples/#expansion-advanced-target-expansion","title":"expansion - Advanced Target Expansion","text":"<p>Location: cpclib-bndbuild/tests/expansion</p> <p>Demonstrates target expansion and automatic variable substitution.</p> <p>Build file: <code>bndbuild.yml</code></p> <pre><code>- dep: A B C\n  tgt: E10 E20 E30\n  cmd: extern touch $@ E20 E30\n\n- dep: E10 E20 E30\n  tgt: E40 E35 E33\n  cmd: extern touch $@ E35 E33\n</code></pre> <p>Key Features: - Multiple targets from single rule - Automatic variable <code>$@</code> for first target - Target expansion logic</p>"},{"location":"bndbuild/examples/#assembler-integration","title":"Assembler Integration","text":""},{"location":"bndbuild/examples/#orgams-monogamsorgams-workflow","title":"orgams - Monogams/Orgams Workflow","text":"<p>Location: cpclib-bndbuild/tests/orgams</p> <p>Integration with Orgams assembler running on Albireo emulation.</p> <p>Build file: <code>build.bnd</code></p> <pre><code>#!/usr/bin/env -S bndbuild -f\n\n{% set FROM=\"cpcfolder\" %}\n{% set SRC=\"BORDER.O\" %}\n{% set DST=\"BORDER\" %}\n\n# Note :\n# 0 is written in #BOOT.CFG of the albireo folder. It means unidos does not try to access the other drives (and we do not lost time with a wrong drive configuration)\n# of course, an emulator is used to assemble the file\n\n\n# `bndbuild edit` to open monogams on the source\n# `bndbuild exec` to assemble and launch the executable\n# `bndbuild cpc` to launch an my CPC\n\n- tgt: exec\n  dep: {{FROM}}/{{DST}}\n  cmd: emu --albireo {{FROM}} -k run --text \"run\\\"BORDER\\n\"\n\n\n- tgt: cpc\n  dep: {{FROM}}/{{DST}}\n  cmd: xfer 192.168.1.26 -y {{FROM}}/{{DST}}\n\n\n- tgt: {{FROM}}/{{DST}}\n  dep: {{FROM}}/{{SRC}}\n  cmd: orgams --from {{FROM}} --src {{SRC}} --dst {{DST}}\n\n# open monogams to edit the file\n- tgt: edit\n  phony: true\n  cmd: emu --albireo {{FROM}} -k run --text \"\u00f9o,\\\"{{SRC}}\\n\"\n\n- tgt: distclean\n  phony: true\n  cmd: -rm {{FROM}}/{{DST}}\n</code></pre> <p>Key Features: - Orgams assembler integration - Albireo folder simulation - Editor integration - Keyboard automation</p>"},{"location":"bndbuild/examples/#c-language-support","title":"C Language Support","text":""},{"location":"bndbuild/examples/#hello_c-c-compilation","title":"hello_c - C Compilation","text":"<p>Location: cpclib-bndbuild/tests/hello_c</p> <p>Demonstrates using bndbuild as a Make-like system for C projects.</p> <p>Build file: <code>bnd.build</code></p> <pre><code>- tgt: run\n  dep: hello\n  cmd:\n   - extern pwd\n   - extern ls -l\n   - extern ./hello world\n\n- tgt: clean\n  cmd: -rm *.o\n\n- tgt: distclean\n  dep: clean\n  cmd: -rm hello\n\n- tgt: hello\n  dep: hello.o main.o\n  cmd: extern gcc hello.o main.o -o hello\n\n- tgt: hello.o\n  dep: hello.c hello.h\n  cmd: extern gcc -c hello.c\n\n- tgt: main.o\n  dep: main.c hello.h\n  cmd: extern gcc -c main.c\n</code></pre> <p>Key Features: - External command execution - Standard C compilation workflow - Object file dependency management</p>"},{"location":"bndbuild/examples/#music-and-audio","title":"Music and Audio","text":""},{"location":"bndbuild/examples/#ay_players-ay-music-players","title":"ay_players - AY Music Players","text":"<p>Location: cpclib-bndbuild/tests/ay_players</p> <p>Converts YM music files to different player formats (FAP, Miny, AYT).</p> <p>Build file: <code>bnd.build</code></p> <pre><code>#!/usr/bin/env -S bndbuild -f\n\n# `bndbuild ace` plays the first music\n# `bndbuild ace -DMUSIC_IDX=n` plays the nth music (starts with 0)\n\n# This build file conver the musics in farious formats\n\n# The list of musics and their buffer size\n# TODO find a way to automatically get the buffer size\n\n{%- \n  set MUSICS = [\n    (\"FenyxKell - Bobline\", \"&amp;b42\"),\n    (\"Targhan - A Harmless Grenade\", \"&amp;b42\"),\n    (\"Targhan - Hocus Pocus\", \"&amp;c48\"),\n    (\"Tom&amp;Jerry - Boules Et Bits (Extended)\", \"&amp;c48\"),\n    (\"Tom&amp;Jerry - From Scratch - Part 1\", \"&amp;a64\"),\n    (\"UltraSyd - Fractal\", \"0xb42\")\n  ]\n-%}\n\n# handle the music selection\n\n{% if MUSIC_IDX %}\n  {% set PARAMS=MUSIC_IDX|int%}\n{% else %}\n  {% set PARAMS=3%}\n{% endif %}\n\n{% if not PLAYER_FORMAT%}\n{% set PLAYER_FORMAT=\"fap\" %}\n{% endif %}\n\n{% if PLAYER_FORMAT == \"fap\" %}\n  {% set SNA=\"fap.sna\" %}\n{% elif PLAYER_FORMAT == \"miny\" %}\n  {% set SNA=\"miny.sna\" %}\n{% elif PLAYER_FORMAT == \"ayt\" %}\n  {% set SNA=\"ayt.sna\" %}\n{% endif %}\n\n# get the appropriate value of the selected music\n{%- set selected_music = MUSICS[PARAMS][0]  -%}\n{%- set fap_selected_music = MUSICS[PARAMS][0] + \".fap\"  -%}\n{%- set miny_selected_music = MUSICS[PARAMS][0] + \".miny\"  -%}\n{%- set ayt_selected_music = MUSICS[PARAMS][0] + \".ayt\"  -%}\n\n{%- set fap_buff_size = MUSICS[PARAMS][1]-%}\n\n{%- macro fap_rule(file, opt=None) %}\n{% set ym_file = \"ym/\" + file + \".ym\" %}\n{% set fap_file = file + \".fap\" %}\n- dep: \"\\\"{{ym_file}}\\\"\"\n  tgt: \"\\\"{{fap_file}}\\\"\"\n  cmd: fap \"ym/{{ym_file}}\" \"{{fap_file}}\" {%if opt %}{{opt}}{% endif %}\n{% endmacro -%}\n\n{%- macro miny_rule(file) %}\n{% set ym_file = \"ym/\" + file + \".ym\" %}\n{% set miny_file = file + \".miny\" %}\n- dep: \"\\\"{{ym_file}}\\\"\"\n  tgt: \"\\\"{{miny_file}}\\\"\"\n  cmd: miny pack \"{{ym_file}}\" \"{{miny_file}}\"\n{% endmacro -%}\n\n{%- macro ayt_rule(file) %}\n{% set ym_file = \"ym/\" + file + \".ym\" %}\n{% set ayt_file = file + \".ayt\" %}\n- dep: \"\\\"{{ym_file}}\\\"\"\n  tgt: \"\\\"{{ayt_file}}\\\"\"\n  cmd: ayt --verbose --target CPC  \"{{ym_file}}\" # -o and --output are not recognized despite the documentation ...\n{% endmacro -%}\n\n{% for (music, size) in MUSICS %}\n{{fap_rule(music)}}\n{{miny_rule(music)}}\n{{ayt_rule(music)}}\n{% endfor %}\n\n# build the sna test music\n# it uses \n#  - the converted fap file\n#  - the init and play binary code provided by FAP automatically downloaded by bndbuild\n#  - the sour of the test program\n- tgt: fap.sna\n  dep: \"\\\"{{fap_selected_music}}\\\" players/fap.asm\" \n  phony: true\n  cmd: |\n    basm players/fap.asm --snapshot -o fap.sna \n    -DFAP_INIT_PATH=\"\\\"{{FAP_INIT_PATH|basm_escape_path}}\\\"\"\n    -DFAP_PLAY_PATH=\"\\\"{{FAP_PLAY_PATH|basm_escape_path}}\\\"\"\n    -DMUSIC=\"\\\"{{fap_selected_music}}\\\"\" \n    -DBuffSize=\"{{fap_buff_size}}\" \n\n- tgt: miny.sna\n  dep: \"\\\"{{miny_selected_music}}\\\" players/{ymp.z80,miny.asm}\"\n  phony: true\n  cmd: |\n    basm players/miny.asm --snapshot -o miny.sna \n    -DMUSIC=\"\\\"{{miny_selected_music|basm_escape_path}}\\\"\"\n</code></pre> <p>Key Features: - Multiple music player formats - Music selection via command-line variables - Complex Jinja templating with lists and loops - Preset variable usage (<code>FAP_INIT_PATH</code>, <code>FAP_PLAY_PATH</code>)</p>"},{"location":"bndbuild/examples/#at3-arkos-tracker-3","title":"at3 - Arkos Tracker 3","text":"<p>Location: cpclib-bndbuild/tests/at3</p> <p>Converts Arkos Tracker 3 songs to multiple formats and generates WAV files.</p> <p>Build file: <code>build.bnd</code></p> <pre><code># `bndbuild generate_all` convert the music in the 4 expected formats\n# `bndbuild play` uses vlc to play the wav version of the music \n# `bndbuild at3` opens AT3. Sadly AT3 does not take input arguments, so it cannot automatically open a given file\n\n- tgt: generate_all\n  phony: true\n  dep: \n    - \"'Targhan - Crtc - End part.akm'\"\n    - \"'Targhan - Crtc - End part.aky'\"\n    - \"'Targhan - Crtc - End part.akg'\"\n    - \"'Targhan - Crtc - End part.wav'\"\n\n- tgt: play\n  phony: true\n  dep: \"'Targhan - Crtc - End part.wav'\"\n  cmd: extern vlc \"$&lt;\"\n\n- tgt: at3\n  phony: true\n  cmd: at3 \n\n{% macro convert_music(converter, from, to) -%}\n- tgt: \"{{to}}\"\n  dep: \"{{from}}\"\n  cmd: {{converter}} {{from}} {{to}}\n{%- endmacro %}\n\n{% macro compile_akm(from, to) -%}\n{{convert_music(\"SongToAkm\", from, to)}}\n{%- endmacro %}\n\n{% macro compile_aky(from, to) -%}\n{{convert_music(\"SongToAky\", from, to)}}\n{%- endmacro %}\n\n{% macro compile_akg(from, to) -%}\n{{convert_music(\"SongToAkg\", from, to)}}\n{%- endmacro %}\n\n{% macro to_wav(from, to) -%}\n{{convert_music(\"SongToWav\", from, to)}}\n{%- endmacro %}\n\n\n{{ compile_akm(\"'Targhan - Crtc - End part.aks'\",   \"'Targhan - Crtc - End part.akm'\") }}\n{{ compile_akg(\"'Targhan - Crtc - End part.aks'\",   \"'Targhan - Crtc - End part.akg'\") }}\n{{ compile_aky(\"'Targhan - Crtc - End part.aks'\",   \"'Targhan - Crtc - End part.aky'\") }}\n{{ to_wav(\"'Targhan - Crtc - End part.aks'\",    \"'Targhan - Crtc - End part.wav'\") }}\n\n\n\n- tgt: distclean\n  phony: true\n  cmd: -rm *.akm *.akg *.wav *.aky\n</code></pre> <p>Key Features: - Arkos Tracker format conversions - WAV generation and playback - Filename with spaces handling - Reusable conversion macros</p>"},{"location":"bndbuild/examples/#chipnsfx-chipnsfx-music","title":"chipnsfx - ChipNSFX Music","text":"<p>Location: cpclib-bndbuild/tests/chipnsfx</p> <p>Demonstrates ChipNSFX music compilation and integration with BASIC.</p> <p>Build file: <code>build.bnd</code></p> <pre><code>{# use -DSELECTED_MUSIC=\"other.chp\" to select another music #}\n{%- if not SELECTED_MUSIC -%}\n{%-   set SELECTED_MUSIC = \"WINGSOD5.CHP\" -%}\n{%- endif -%}\n\n{# use -DEMULATOR=\"ace\" to open with ace #}\n{%- if not EMULATOR -%}\n{%-   set EMULATOR = \"cpcec\" -%}\n{%- endif -%}\n\n{# Generic macro that could  used anywhere. takes a .CHP and build a .asm #}\n{% macro compile_chipnsfx(from, to=\"chipnsfz.mus\", opt=\"-t\") -%}\n- tgt: {{to}}\n  from: {{from}}\n  cmd: chipnsfx {{from}} {{to}} {{opt}}\n{%- endmacro %}\n\n\n{# Generate the rule that compile a musix #}\n{{ compile_chipnsfx(SELECTED_MUSIC, opt=\"-lchip_song_ -t\") }}\n\n{# Build the basic file that contains player and mlusic #}\n- tgt: CHIPNSFZ.BAS\n  dep: CHIPNSFZ.S80 CHIPNSFX.I80 chipnsfz.mus\n  cmd: uz80 -q CHIPNSFZ.S80 -o$@\n\n{# Create a dsk to transfert #}\n- tgt: CHIPNSFZ.DSK\n  dep: CHIPNSFZ.BAS\n  cmd:\n    - dsk $@ format\n    - dsk $@ add $&lt;\n\n{# launch on an emulator #}\n- dep: CHIPNSFZ.DSK\n  tgt: emu\n  phony: true\n  cmd: emu --emulator={{EMULATOR}} --drivea=CHIPNSFZ.DSK --auto-run-file CHIPNSFZ.BAS run\n\n- tgt: distclean\n  phony: true\n  cmd: -rm *.BAS *dsk chipnsfz.mus\n</code></pre> <p>Key Features: - ChipNSFX music compilation - BASIC file generation with uz80 - Emulator selection variable - DSK creation and auto-run</p>"},{"location":"bndbuild/examples/#data-compression","title":"Data Compression","text":""},{"location":"bndbuild/examples/#crunch-multiple-crunchers","title":"crunch - Multiple Crunchers","text":"<p>Location: cpclib-bndbuild/tests/crunch</p> <p>Tests various compression formats supported by bndbuild.</p> <p>Build file: <code>bnd.build</code></p> <pre><code>- tgt: all\n  dep: crunch.exo crunch.lz48 crunch.apultra crunch.lz4 crunch.lz49 crunch.lzsa1 crunch.lzsa2 crunch.shrinkler crunch.zx0\n\n- tgt: distclean\n  phony: true\n  cmd: -rm crunch.exo crunch.lz48 crunch.apultra crunch.lz4 crunch.lz49 crunch.lzsa1 crunch.lzsa2 crunch.shrinkler crunch.zx0\n\n- tgt: crunch.exo\n  dep: bnd.build\n  cmd: crunch -c exomizer -i $&lt; -o $@\n\n- tgt: crunch.lz48\n  dep: bnd.build\n  cmd: crunch -c lz48 -i $&lt; -o $@\n\n- tgt: crunch.lz49\n  dep: bnd.build\n  cmd: crunch -c lz48 -i $&lt; -o $@\n\n- tgt: crunch.apultra\n  dep: bnd.build\n  cmd: crunch -c apultra -i $&lt; -o $@\n\n- tgt: crunch.lz4\n  dep: bnd.build\n  cmd: crunch -c lz4 -i $&lt; -o $@\n\n- tgt: crunch.lzsa1\n  dep: bnd.build\n  cmd: crunch -c lzsa1 -i $&lt; -o $@\n\n- tgt: crunch.lzsa2\n  dep: bnd.build\n  cmd: crunch -c lzsa2 -i $&lt; -o $@\n\n- tgt: crunch.shrinkler\n  dep: bnd.build\n  cmd: crunch -c shrinkler -i $&lt; -o $@\n\n- tgt: crunch.zx0\n  dep: bnd.build\n  cmd: crunch -c zx0 -i $&lt; -o $@\n</code></pre> <p>Key Features: - Multiple compression formats - Exomizer, LZ48, LZ49, ApUltra, LZ4, LZSA1, LZSA2, Shrinkler, ZX0 - Automated $&lt; and $@ variable usage</p>"},{"location":"bndbuild/examples/#complex-projects","title":"Complex Projects","text":""},{"location":"bndbuild/examples/#ucpm-multi-format-project","title":"ucpm - Multi-Format Project","text":"<p>Location: cpclib-bndbuild/tests/ucpm</p> <p>A complex project using multiple assemblers, Orgams integration, and various output formats.</p> <p>Build file: <code>build.bnd</code></p> <pre><code>#!/usr/bin/env -S bndbuild -f\n\n{% set DSK=\"u c p m.dsk\" %} # Spaces for the fun\n{% set SNA=\"ucpm.sna\" %}\n{%- if not CPCADDR -%} {# Modify hard coded address #}\n{%-   set CPCADDR = \"192.168.1.24\" -%}\n{%- endif -%}\n{%- macro ace(dsk, exec=None, debug=None) -%}\ncpc --emu ace --drivea \"{{dsk}}\"  --disable-rom orgams --disable-rom unidos\n  {%- if debug %} --debug {{debug}} {%endif -%} \n  {%- if exec %} --autoRunFile {{exec}} {%endif -%}\n  run\n{%- endmacro -%}\n{%- macro build_data(data) -%}\n- tgt: {{data}}.o\n  dep: {{data}}.asm\n  cmd: rasm {{data}}.asm -ob {{data}}.o\n\n{%- endmacro -%}\n\n\n- tgt: sna\n  dep: {{SNA}}\n\n- tgt: dsk\n  dep: \"\\\"{{DSK}}\\\"\" # These ugly quotes are mandatory because\n                     # of spaces in filename and yaml string encoding\n                     # best is to avoid spaces\n\n- tgt: \"\\\"{{DSK}}\\\" {{SNA}} ucpm.rasm ucpm.lst\"\n  dep: ucpm.asm data1.o data2.o orgams/DATA3.BIN\n  cmd: &gt; \n    basm ucpm.asm \n      --snapshot -o {{SNA}}\n      --ace ucpm.rasm \n      --lst ucpm.lst\n      --override\n      -DUCPM_EXEC=\\\"UCPM\\\" # this is a string\n      -DUCPM_DSK=\"\\\"{{DSK}}\\\"\" # this is a string with spaces\n\n{{build_data(\"data1\")}}\n\n{{build_data(\"data2\")}}\n\n- tgt: orgams/DATA3.BIN\n  dep: orgams/DATA3.O\n  cmd: orgams --from orgams --src DATA3.O --dst DATA3.BIN\n\n\n- tgt: monogams\n  phony: true\n  cmd: orgams --from orgams  --src DATA3.O --edit\n\n- tgt: emu\n  dep: \"\\\"{{DSK}}\\\" ucpm.rasm\"\n  cmd: -{{ace(DSK, \"UCPM\", debug=\"ucpm.rasm\")}}\n\n- tgt: m4\n  dep: {{SNA}}\n  cmd: xfer {{CPCADDR}} -y {{SNA}}\n\n- tgt: clean\n  phony: true\n  cmd: -rm data?.o ucpm.rasm ucpm.lst orgams/DATA3.BIN\n\n- tgt: distclean\n  dep: clean\n  phony: true\n  cmd: -rm \"{{DSK}}\" {{SNA}}\n</code></pre> <p>Key Features: - Multiple assemblers (basm, rasm, orgams) - Filenames with spaces - ACE debug file generation - Orgams folder-based workflow - Complex macro usage</p>"},{"location":"bndbuild/examples/#delegated-delegated-build-rules","title":"delegated - Delegated Build Rules","text":"<p>Location: cpclib-bndbuild/tests/delegated</p> <p>Demonstrates delegating build tasks to external build files.</p> <p>Build file: <code>build.bnd</code></p> <pre><code># This example demonstrates delegated builds where one build file references another\n# See the source code for implementation details\n</code></pre> <p>Key Features: - Delegated build rules - External build file references</p>"},{"location":"bndbuild/examples/#emulator-integration","title":"Emulator Integration","text":""},{"location":"bndbuild/examples/#emu-emulator-launching","title":"emu - Emulator Launching","text":"<p>Location: cpclib-bndbuild/tests/emu</p> <p>Tests emulator launching on different platforms.</p> <p>Build file: <code>bndbuild.yml</code></p> <pre><code>#!/usr/bin/env -S bndbuild -f\n\n# execute properly both on linux and windows\n- tgt: ace\n  cmd: ace ../../../cpclib/tests/dsk/harley.dsk -autoRunFile '-CED-.exe'\n\n# execute properly both on linux and windows\n- tgt: cpcec\n  cmd: cpcec ../../../cpclib/tests/dsk/harley.dsk \n\n\n# Fail to properly provide the file both on linux and windows\n- tgt: winape\n  cmd: winape ../../../cpclib/tests/dsk/harley.dsk /A:-CED-.exe\n</code></pre> <p>Key Features: - Cross-platform emulator launching - ACE, CPCEC, WinAPE support - Auto-run file specification</p>"},{"location":"bndbuild/examples/#watch-watch-mode","title":"watch - Watch Mode","text":"<p>Location: cpclib-bndbuild/tests/watch</p> <p>Example for testing watch mode functionality.</p> <p>Build file: <code>bnd.build</code></p> <pre><code># Watch mode example - monitors file changes and automatically rebuilds\n# Use: bndbuild --watch &lt;target&gt;\n</code></pre> <p>Key Features: - File watch mode - Automatic rebuild on changes</p>"},{"location":"bndbuild/examples/#help-system","title":"Help System","text":""},{"location":"bndbuild/examples/#help-rule-help","title":"help - Rule Help","text":"<p>Location: cpclib-bndbuild/tests/help</p> <p>Demonstrates the help system for documenting build rules.</p> <p>Build file: <code>bnd.build</code></p> <pre><code># Example demonstrating help text for build rules\n# Use: bndbuild --help\n</code></pre> <p>Key Features: - Rule documentation - Help text display</p>"},{"location":"bndbuild/examples/#summary","title":"Summary","text":"<p>These examples cover: - Basic builds: Snapshot generation, DSK creation - Templating: Variables, conditionals, loops, macros - Assemblers: basm, rasm, orgams integration - Languages: Assembly, C, BASIC - Audio: YM, Arkos Tracker, ChipNSFX - Compression: Multiple cruncher formats - Emulators: ACE, CPCEC, WinAPE - Hardware: M4 transfer, Albireo</p> <p>All examples are maintained as working tests in the repository and serve as both documentation and regression tests.</p>"},{"location":"bndbuild/recipes/","title":"Some recipes","text":""},{"location":"bndbuild/recipes/#ide-configuration-for-the-bndbuild-files","title":"IDE Configuration for the bnd.build files","text":"<p>The description of the build language is provided in the file <code>https://raw.githubusercontent.com/cpcsdk/rust.cpclib/refs/heads/master/cpclib-bndbuild/schema.json</code>. Provide it to your editor to validate the files.</p> <p>For examples the <code>yaml</code> settings of Visual Studio Code are:</p> <pre><code>    \"yaml.schemas\": {\n        \"https://raw.githubusercontent.com/cpcsdk/rust.cpclib/refs/heads/master/cpclib-bndbuild/schema.json\": [\"bnd.build\", \"build.bnd\", \"bndbuild.yaml\"]\n    },\n</code></pre>"},{"location":"bndbuild/recipes/#launch-of-embedded-commands","title":"Launch of embedded commands","text":"<p>These commands are not included in <code>bndbuild</code> source code and are downloaded, eventually compiled, installed in a cache folder of <code>bndbuild</code>. <code>bndbuild</code> can serve as a proxy to use them without manually installing them.</p>"},{"location":"bndbuild/recipes/#ace","title":"ACE","text":"<p><code>bndbuild --direct -- ace [ace arguments]</code></p>"},{"location":"bndbuild/recipes/#rasm","title":"rasm","text":"<p><code>bndbuild --direct -- rasm [rasm arguments]</code></p>"},{"location":"bndbuild/recipes/#update-of-commands","title":"Update of commands","text":"<p>Once embedded commands have been downloaded and installed, there is no need to reinstall them. Version number is hardcoded in <code>bndbuild</code> source code. However, some of them have not a clear version management form their authors. As a sideback, a new download can imply a new version. We provide then a dedicated command that. It can be usefull also in case of a former failed installation.</p>"},{"location":"bndbuild/recipes/#update-rasm","title":"Update rasm","text":"<p><code>bndbuild --update rasm</code></p>"},{"location":"bndbuild/recipes/#update-ace","title":"Update ACE","text":"<p><code>bndbuild --update ace</code></p>"},{"location":"bndbuild/recipes/#i-want-to-generate-a-graphical-representation-of-the-of-the-commands","title":"I want to generate a graphical representation of the of the commands","text":"<p><code>bndbuild --dot debug.png</code></p>"},{"location":"borgams/","title":"Borgams - Orgams Binary to ASCII Converter","text":"<p>Work in Progress - Not Yet Usable</p> <p>Borgams is currently under active development and is not yet functional. While the implementation is close to completion, the tool is not ready for production use. Please check back for updates or use alternative methods for Orgams file conversion in the meantime.</p> <p>Borgams (Benediction Orgams) is a command-line tool for converting Orgams binary format files to ASCII text format.</p>"},{"location":"borgams/#features","title":"Features","text":"<ul> <li>Convert Orgams binary files to readable ASCII format</li> <li>Preserve assembly code structure and formatting</li> <li>Support for Orgams preprocessed format used by the Orgams assembler</li> <li>Simple input/output file specification</li> </ul>"},{"location":"borgams/#quick-start","title":"Quick Start","text":"<pre><code># Convert an Orgams binary file to ASCII\ncpclib-borgams --input compiled.org --output source.asm\n</code></pre>"},{"location":"borgams/#what-is-orgams-format","title":"What is Orgams Format?","text":"<p>Orgams is a Z80 assembler that stores assembly source code in a preprocessed binary format. This format is more compact and faster to process than plain text, but it's not human-readable. Borgams converts these binary files back to readable ASCII text, allowing you to:</p> <ul> <li>Recover source code from compiled Orgams files</li> <li>Inspect the structure of Orgams binaries</li> <li>Convert legacy Orgams projects to plain text format</li> </ul>"},{"location":"borgams/#use-cases","title":"Use Cases","text":"<ul> <li>Source Recovery: Extract assembly source from Orgams binary files</li> <li>Format Conversion: Convert Orgams projects to standard ASCII format</li> <li>Code Inspection: View the contents of Orgams binaries</li> <li>Archive Preservation: Convert old Orgams files to long-term readable format</li> </ul>"},{"location":"borgams/#see-also","title":"See Also","text":""},{"location":"borgams/#integration-with-bndbuild","title":"Integration with BndBuild","text":"<p>Borgams is available as a standalone <code>borgams</code> binary but can also be used within BndBuild build scripts using the <code>borgams</code> command. See BndBuild Commands for integration details.</p>"},{"location":"borgams/#see-also_1","title":"See Also","text":"<ul> <li>Command Line Reference - Detailed documentation of all options</li> <li>Examples - Usage examples and workflows</li> </ul>"},{"location":"borgams/cmdline/","title":"Borgams Command Line Reference","text":"<p>Development Status</p> <p>Borgams is currently under development and not yet usable. This documentation describes the intended command-line interface once the tool is complete.</p>"},{"location":"borgams/cmdline/#synopsis","title":"Synopsis","text":"<pre><code>cpclib-borgams --input &lt;INPUT&gt; --output &lt;OUTPUT&gt;\n</code></pre>"},{"location":"borgams/cmdline/#description","title":"Description","text":"<p>Borgams converts Orgams binary format files to ASCII text format. The tool takes an Orgams binary file (preprocessed assembly) and outputs a human-readable ASCII representation of the assembly source code.</p>"},{"location":"borgams/cmdline/#required-arguments","title":"Required Arguments","text":""},{"location":"borgams/cmdline/#-i-input-input","title":"<code>-i, --input &lt;INPUT&gt;</code>","text":"<p>Input Orgams file to convert. This should be an Orgams binary format file with preprocessed assembly code.</p> <p>Example: <pre><code>cpclib-borgams --input myprogram.org --output myprogram.asm\n</code></pre></p>"},{"location":"borgams/cmdline/#-o-output-output","title":"<code>-o, --output &lt;OUTPUT&gt;</code>","text":"<p>Output ASCII file. The converted assembly source will be written to this file in plain text format.</p> <p>Example: <pre><code>cpclib-borgams --input binary.org --output source.asm\n</code></pre></p>"},{"location":"borgams/cmdline/#options","title":"Options","text":""},{"location":"borgams/cmdline/#-h-help","title":"<code>-h, --help</code>","text":"<p>Print help information showing command usage and available options.</p>"},{"location":"borgams/cmdline/#-v-version","title":"<code>-V, --version</code>","text":"<p>Print version information.</p>"},{"location":"borgams/cmdline/#input-format","title":"Input Format","text":"<p>Borgams expects input files in the Orgams binary format: - Preprocessed Z80 assembly - String table for labels and symbols - Encoded instructions and directives - Macro definitions</p>"},{"location":"borgams/cmdline/#output-format","title":"Output Format","text":"<p>The output ASCII file contains: - Z80 assembly mnemonics - Labels and symbols - Assembler directives - Comments (if preserved in binary) - Macro definitions and uses</p>"},{"location":"borgams/cmdline/#exit-status","title":"Exit Status","text":"<ul> <li><code>0</code> - Success</li> <li><code>1</code> - Error (file not found, invalid format, I/O error)</li> </ul>"},{"location":"borgams/cmdline/#examples","title":"Examples","text":"<p>See Examples for detailed usage patterns.</p>"},{"location":"borgams/examples/","title":"Borgams Examples","text":"<p>Not Yet Functional</p> <p>Borgams is still work in progress and not currently usable. The examples below show the intended usage once development is complete.</p>"},{"location":"borgams/examples/#basic-usage","title":"Basic Usage","text":""},{"location":"borgams/examples/#convert-binary-to-ascii","title":"Convert Binary to ASCII","text":"<p>Convert an Orgams binary file to readable ASCII text:</p> <pre><code>cpclib-borgams --input myprogram.org --output myprogram.asm\n</code></pre>"},{"location":"borgams/examples/#short-option-form","title":"Short Option Form","text":"<p>Using short options:</p> <pre><code>cpclib-borgams -i compiled.org -o source.asm\n</code></pre>"},{"location":"borgams/examples/#conversion-workflows","title":"Conversion Workflows","text":""},{"location":"borgams/examples/#source-recovery","title":"Source Recovery","text":"<p>Recover source code from Orgams binaries:</p> <pre><code># Convert the binary\ncpclib-borgams --input demo.org --output demo_recovered.asm\n\n# View the recovered source\ncat demo_recovered.asm\n</code></pre>"},{"location":"borgams/examples/#batch-conversion","title":"Batch Conversion","text":"<p>Convert multiple Orgams files in a directory:</p> <pre><code># PowerShell\nGet-ChildItem *.org | ForEach-Object {\n    $output = $_.BaseName + \".asm\"\n    cpclib-borgams --input $_.Name --output $output\n    Write-Output \"Converted $($_.Name) -&gt; $output\"\n}\n\n# Bash\nfor file in *.org; do\n    output=\"${file%.org}.asm\"\n    cpclib-borgams --input \"$file\" --output \"$output\"\n    echo \"Converted $file -&gt; $output\"\ndone\n</code></pre>"},{"location":"borgams/examples/#format-migration","title":"Format Migration","text":"<p>Migrate old Orgams projects to plain text:</p> <pre><code># Create output directory\nmkdir ascii_sources\n\n# Convert all Orgams files\nfor orgfile in orgams_binaries/*.org; do\n    basename=$(basename \"$orgfile\" .org)\n    cpclib-borgams --input \"$orgfile\" --output \"ascii_sources/${basename}.asm\"\ndone\n\necho \"Migration complete! Check ascii_sources/ directory\"\n</code></pre>"},{"location":"borgams/examples/#integration-with-other-tools","title":"Integration with Other Tools","text":""},{"location":"borgams/examples/#with-basm-assembler","title":"With BASM Assembler","text":"<p>Convert Orgams binary to ASCII, then assemble with BASM:</p> <pre><code># Step 1: Convert to ASCII\ncpclib-borgams --input original.org --output converted.asm\n\n# Step 2: Assemble with BASM\nbasm converted.asm -o output.bin\n</code></pre>"},{"location":"borgams/examples/#with-version-control","title":"With Version Control","text":"<p>Add converted sources to version control:</p> <pre><code># Convert binary to text\ncpclib-borgams --input project.org --output project.asm\n\n# Add to git\ngit add project.asm\ngit commit -m \"Add ASCII version of Orgams source\"\n</code></pre>"},{"location":"borgams/examples/#inspection-and-analysis","title":"Inspection and Analysis","text":"<p>Convert for code inspection:</p> <pre><code># Convert to ASCII\ncpclib-borgams --input mystery.org --output mystery_inspected.asm\n\n# Search for specific code patterns\ngrep -n \"LD A,\" mystery_inspected.asm\n\n# Count instruction types\ngrep -o \"^[A-Z][A-Z]\" mystery_inspected.asm | sort | uniq -c\n</code></pre>"},{"location":"borgams/examples/#development-workflows","title":"Development Workflows","text":""},{"location":"borgams/examples/#debugging-orgams-files","title":"Debugging Orgams Files","text":"<p>Debug by examining the ASCII output:</p> <pre><code># Convert to inspect structure\ncpclib-borgams --input buggy.org --output debug.asm\n\n# Open in editor for analysis\ncode debug.asm\n</code></pre>"},{"location":"borgams/examples/#archive-preservation","title":"Archive Preservation","text":"<p>Convert entire archive for long-term storage:</p> <pre><code>#!/bin/bash\n# archive_orgams.sh - Convert all Orgams files in an archive\n\narchive_dir=\"$1\"\noutput_dir=\"$2\"\n\nmkdir -p \"$output_dir\"\n\nfind \"$archive_dir\" -name \"*.org\" | while read orgfile; do\n    relative_path=\"${orgfile#$archive_dir/}\"\n    output_path=\"$output_dir/${relative_path%.org}.asm\"\n    output_subdir=$(dirname \"$output_path\")\n\n    mkdir -p \"$output_subdir\"\n    cpclib-borgams --input \"$orgfile\" --output \"$output_path\"\n\n    echo \"Converted: $relative_path -&gt; ${relative_path%.org}.asm\"\ndone\n\necho \"Archive conversion complete!\"\n</code></pre> <p>Usage: <pre><code>./archive_orgams.sh ./old_orgams_projects ./ascii_archive\n</code></pre></p>"},{"location":"borgams/examples/#comparison-between-versions","title":"Comparison Between Versions","text":"<p>Compare two versions of an Orgams file:</p> <pre><code># Convert both versions\ncpclib-borgams --input version1.org --output version1.asm\ncpclib-borgams --input version2.org --output version2.asm\n\n# Compare differences\ndiff -u version1.asm version2.asm\n\n# Or use a visual diff tool\nmeld version1.asm version2.asm\n</code></pre>"},{"location":"borgams/examples/#tips-and-best-practices","title":"Tips and Best Practices","text":""},{"location":"borgams/examples/#file-naming","title":"File Naming","text":"<ul> <li>Use <code>.org</code> extension for Orgams binary files</li> <li>Use <code>.asm</code> or <code>.s</code> extension for ASCII output</li> <li>Preserve original filenames when converting for easy tracking</li> </ul>"},{"location":"borgams/examples/#output-handling","title":"Output Handling","text":"<ul> <li>Always specify an output file to avoid stdout clutter</li> <li>Create output directories before batch conversions</li> <li>Use meaningful output names for better organization</li> </ul>"},{"location":"borgams/examples/#error-handling","title":"Error Handling","text":"<p>Check for conversion errors:</p> <pre><code>if cpclib-borgams --input input.org --output output.asm; then\n    echo \"Conversion successful\"\nelse\n    echo \"Conversion failed - check input file format\"\n    exit 1\nfi\n</code></pre>"},{"location":"borgams/examples/#workflow-integration","title":"Workflow Integration","text":"<p>Combine with other CPC tools:</p> <pre><code># Full workflow: Convert -&gt; Assemble -&gt; Create DSK -&gt; Test\ncpclib-borgams -i demo.org -o demo.asm\nbasm demo.asm -o demo.bin\nbdasm demo.bin -o demo_disasm.asm\n</code></pre>"},{"location":"borgams/examples/#common-patterns","title":"Common Patterns","text":""},{"location":"borgams/examples/#quick-inspection","title":"Quick Inspection","text":"<p>Quickly inspect an Orgams binary:</p> <pre><code>cpclib-borgams -i mystery.org -o /tmp/inspect.asm &amp;&amp; cat /tmp/inspect.asm | less\n</code></pre>"},{"location":"borgams/examples/#backup-and-convert","title":"Backup and Convert","text":"<p>Create backups before conversion:</p> <pre><code># Backup originals\ncp original.org original.org.backup\n\n# Convert to ASCII\ncpclib-borgams --input original.org --output original.asm\n</code></pre>"},{"location":"borgams/examples/#pipeline-processing","title":"Pipeline Processing","text":"<p>Use in pipelines:</p> <pre><code># Find all Orgams files and report their sizes after conversion\nfor f in *.org; do\n    cpclib-borgams -i \"$f\" -o temp.asm 2&gt;/dev/null\n    if [ $? -eq 0 ]; then\n        lines=$(wc -l &lt; temp.asm)\n        echo \"$f: $lines lines of assembly\"\n    fi\ndone\nrm -f temp.asm\n</code></pre>"},{"location":"catalog/","title":"Catalog - CatArt Manipulation Tool","text":"<p>Catalog is a command-line utility for creating and managing CatArt - visually enhanced catalog displays for Amstrad CPC disk images using BASIC programs.</p>"},{"location":"catalog/#what-is-catart","title":"What is CatArt?","text":"<p>CatArt is a technique for creating attractive, graphical disk catalogs on the Amstrad CPC by embedding catalog information within a specially crafted BASIC program. When the BASIC program runs, it displays a nice-looking catalog with custom fonts and colors.</p>"},{"location":"catalog/#features","title":"Features","text":"<ul> <li>Build CatArt from BASIC programs \u2192 DSK/HFE or raw binary</li> <li>Display CatArt with rendering (cat/dir commands)</li> <li>List catalog content (text output)</li> <li>Decode CatArt back to BASIC listing</li> <li>Modify catalog entries (readonly, system flags, filenames, etc.)</li> <li>Debug CatArt structure (inspect bytes and BASIC commands)</li> <li>PNG export of pixel-accurate CatArt rendering</li> <li>Multi-locale support (English, French, Spanish, German, Danish fonts)</li> <li>All screen modes (0, 1, 2, or 3)</li> </ul>"},{"location":"catalog/#quick-start","title":"Quick Start","text":"<pre><code># Build a catart DSK from BASIC program\ncatalog loader.bas build -o game.dsk\n\n# Display catalog (alphabetically sorted)\ncatalog game.dsk cat \n\n# Display catalog (directory order)\ncatalog game.dsk dir\n\n# List catalog content (text only)\ncatalog game.dsk list\n\n# Decode CatArt back to BASIC\ncatalog game.dsk decode -o restored.bas\n\n# Export rendering to PNG\ncatalog game.dsk cat --png catalog.png --locale english\n\n# Modify an entry\ncatalog game.dsk modify --entry 0 --readonly\n\n# Debug CatArt structure\ncatalog game.dsk debug --cat\n</code></pre>"},{"location":"catalog/#use-cases","title":"Use Cases","text":""},{"location":"catalog/#integration-with-bndbuild","title":"Integration with BndBuild","text":"<p>Catalog is available as a standalone <code>catalog</code> binary but can also be used within BndBuild build scripts using the <code>catalog</code> or <code>cat</code> command aliases. See BndBuild Commands for integration details.</p> <ul> <li>Create professional-looking disk menus</li> <li>Distribute demos with attractive catalogs</li> <li>Customize disk presentation</li> <li>Reverse-engineer existing CatArt disks</li> <li>Modify catalog metadata without breaking the display</li> </ul>"},{"location":"catalog/#see-also","title":"See Also","text":"<ul> <li>Command Line Reference - Detailed documentation of all commands</li> <li>Examples - Usage examples and workflows</li> </ul>"},{"location":"catalog/cmdline/","title":"Catalog Command Line Reference","text":""},{"location":"catalog/cmdline/#synopsis","title":"Synopsis","text":"<pre><code>catalog [INPUT_FILE] &lt;COMMAND&gt;\n</code></pre>"},{"location":"catalog/cmdline/#description","title":"Description","text":"<p>Catalog is a tool for creating, viewing, and manipulating CatArt - visually enhanced catalog displays embedded in BASIC programs for Amstrad CPC disk images.</p>"},{"location":"catalog/cmdline/#arguments","title":"Arguments","text":"<ul> <li><code>[INPUT_FILE]</code> - Input file containing catalog entries (a binary file or a DSK). For the <code>build</code> command, this is the BASIC file if not specified in the command options.</li> </ul>"},{"location":"catalog/cmdline/#commands","title":"Commands","text":""},{"location":"catalog/cmdline/#cat","title":"<code>cat</code>","text":"<p>Display the catalog using CatArt rendering (sorted alphabetically).</p> <pre><code>catalog game.dsk cat\n</code></pre> <p>Options: - <code>--png &lt;PNG_OUTPUT&gt;</code> - Optional PNG file to save pixel-accurate rendering of the catart - <code>--locale &lt;LOCALE&gt;</code> - Font locale to use when generating PNG: <code>english</code>, <code>french</code>, <code>spanish</code>, <code>german</code>, <code>danish</code> [default: <code>english</code>] - <code>--mode &lt;MODE&gt;</code> - Screen mode to use for catart rendering: 0, 1, 2, or 3 [default: <code>1</code>] - <code>-h, --help</code> - Print help</p> <p>Examples: <pre><code># Display catalog with CatArt rendering\ncatalog game.dsk cat\n\n# Generate PNG image of the catalog\ncatalog game.dsk cat --png catalog.png\n\n# Generate PNG with French locale and mode 0\ncatalog game.dsk cat --png catalog.png --locale french --mode 0\n</code></pre></p>"},{"location":"catalog/cmdline/#dir","title":"<code>dir</code>","text":"<p>Display the catalog using CatArt rendering (directory order, unsorted).</p> <pre><code>catalog game.dsk dir\n</code></pre> <p>Options: - <code>--png &lt;PNG_OUTPUT&gt;</code> - Optional PNG file to save pixel-accurate rendering - <code>--locale &lt;LOCALE&gt;</code> - Font locale [default: <code>english</code>] - <code>--mode &lt;MODE&gt;</code> - Screen mode (0-3) [default: <code>1</code>] - <code>-h, --help</code> - Print help</p> <p>Examples: <pre><code># Display directory with CatArt rendering\ncatalog game.dsk dir\n\n# Generate PNG image of the directory\ncatalog game.dsk dir --png directory.png\n\n# Generate PNG with specific mode\ncatalog game.dsk dir --png directory.png --mode 2\n</code></pre></p>"},{"location":"catalog/cmdline/#list","title":"<code>list</code>","text":"<p>List the content of the catalog only for files having no control characters.</p> <pre><code>catalog game.dsk list\n</code></pre> <p>Options: - <code>-h, --help</code> - Print help</p> <p>Example: <pre><code>catalog game.dsk list\n</code></pre></p> <p>Output (text): <pre><code>LOADER.BAS\nGAME.BIN\nMUSIC.BIN\n</code></pre></p>"},{"location":"catalog/cmdline/#listall","title":"<code>listall</code>","text":"<p>List the content of the catalog even for files having control characters.</p> <pre><code>catalog game.dsk listall\n</code></pre> <p>Options: - <code>-h, --help</code> - Print help</p> <p>Example: <pre><code>catalog game.dsk listall\n</code></pre></p>"},{"location":"catalog/cmdline/#build","title":"<code>build</code>","text":"<p>Build a catart from a BASIC program. Output will be a DSK/HFE file if the output filename ends with <code>.dsk</code> or <code>.hfe</code>, otherwise a raw 2048-byte catalog binary.</p> <pre><code>catalog game.dsk build\n</code></pre> <p>Arguments: - <code>[BASIC_FILE]</code> - BASIC file to convert to catart (optional if <code>INPUT_FILE</code> is provided at top level)</p> <p>Options: - <code>-o, --output &lt;OUTPUT_FILE&gt;</code> - Output file (defaults to <code>catart.dsk</code>). Use <code>.dsk</code> or <code>.hfe</code> extension for disc images, otherwise creates raw binary - <code>--png &lt;PNG_OUTPUT&gt;</code> - Optional PNG file to save pixel-accurate rendering of the catart - <code>--locale &lt;LOCALE&gt;</code> - Font locale for PNG generation [default: <code>english</code>] - <code>--mode &lt;MODE&gt;</code> - Screen mode (0-3) [default: <code>1</code>] - <code>-h, --help</code> - Print help</p> <p>Example: <pre><code># Build DSK from BASIC\ncatalog build loader.bas -o game.dsk\n\n# Build with INPUT_FILE argument\ncatalog loader.bas build -o game.dsk\n\n# Build raw binary\ncatalog build menu.bas -o catalog.bin\n\n# Build HFE image\ncatalog build loader.bas -o game.hfe\n\n# Build with PNG export\ncatalog build loader.bas -o game.dsk --png preview.png --locale french\n</code></pre></p>"},{"location":"catalog/cmdline/#decode","title":"<code>decode</code>","text":"<p>Extract the BASIC listing from the input DSK. If no <code>--output</code> is provided, the listing is printed to standard output; otherwise, it is saved in the provided filename.</p> <pre><code>catalog game.dsk decode\n</code></pre> <p>Options: - <code>-o, --output &lt;OUTPUT_FILE&gt;</code> - Optional output file for the decoded BASIC listing. If not provided, prints to stdout - <code>-h, --help</code> - Print help</p> <p>Example: <pre><code># Decode to stdout\ncatalog game.dsk decode\n\n# Decode to file\ncatalog game.dsk decode -o restored.bas\n</code></pre></p>"},{"location":"catalog/cmdline/#modify","title":"<code>modify</code>","text":"<p>Modify an entry in the catalog.</p> <pre><code>catalog game.dsk modify [OPTIONS] --entry &lt;ENTRY&gt;\n</code></pre> <p>Required: - <code>--entry &lt;ENTRY&gt;</code> - Selects the entry to modify (entry index number)</p> <p>Options: - <code>--readonly</code> - Set the selected entry readonly - <code>--system</code> - Set the selected entry hidden - <code>--noreadonly</code> - Set the selected entry read and write - <code>--nosystem</code> - Set the selected entry visible - <code>--user &lt;USER&gt;</code> - Set the user value - <code>--filename &lt;FILENAME&gt;</code> - Set the filename of the entry - <code>--blocs [&lt;BLOCS&gt;...]</code> - Set the blocks to load (and update the number of blocks accordingly) - <code>--numpage &lt;NUMPAGE&gt;</code> - Set the page number - <code>--size &lt;SIZE&gt;</code> - Force the size of the entry - <code>-h, --help</code> - Print help</p> <p>Example: <pre><code># Make entry 0 readonly\ncatalog game.dsk modify --entry 0 --readonly\n\n# Hide entry 2\ncatalog game.dsk modify --entry 2 --system\n\n# Rename entry 1\ncatalog game.dsk modify --entry 1 --filename NEWNAME.BIN\n\n# Change user number\ncatalog game.dsk modify --entry 3 --user 5\n\n# Modify blocks\ncatalog game.dsk modify --entry 0 --blocs 0 1 2 3\n\n# Make entry visible and writable\ncatalog game.dsk modify --entry 2 --nosystem --noreadonly\n</code></pre></p>"},{"location":"catalog/cmdline/#debug","title":"<code>debug</code>","text":"<p>Debug catart by displaying each entry's bytes and corresponding BASIC commands.</p> <pre><code>catalog game.dsk debug\n</code></pre> <p>Options: - <code>--cat</code> - Display entries in catalog (sorted alphabetically) order - <code>--dir</code> - Display entries in directory (unsorted) order - <code>-h, --help</code> - Print help</p> <p>Example: <pre><code># Debug in catalog order\ncatalog game.dsk debug --cat\n\n# Debug in directory order\ncatalog game.dsk debug --dir\n</code></pre></p> <p>Output: Shows raw bytes and decoded BASIC commands for each catalog entry.</p>"},{"location":"catalog/cmdline/#screen-modes","title":"Screen Modes","text":"Mode Resolution Colors Typical Use 0 160\u00d7200 16 Colorful catart displays 1 320\u00d7200 4 Standard catart (most common) 2 640\u00d7200 2 High-resolution text 3 160\u00d7200 4 Undocumented mode"},{"location":"catalog/cmdline/#locales","title":"Locales","text":"<p>Supported font locales for PNG rendering: - <code>english</code> - English character set - <code>french</code> - French character set (accented characters) - <code>spanish</code> - Spanish character set - <code>german</code> - German character set (umlauts) - <code>danish</code> - Danish character set</p>"},{"location":"catalog/cmdline/#file-formats","title":"File Formats","text":""},{"location":"catalog/cmdline/#input-formats","title":"Input Formats","text":"<ul> <li><code>.bas</code> - Amstrad BASIC program (for <code>build</code> command)</li> <li><code>.dsk</code> - Standard DSK disk image</li> <li><code>.hfe</code> - HxC Floppy Emulator disk image</li> <li>Raw binary - 2048-byte catalog data</li> </ul>"},{"location":"catalog/cmdline/#output-formats","title":"Output Formats","text":"<ul> <li><code>.dsk</code> - Standard DSK disk image (when output filename ends with <code>.dsk</code>)</li> <li><code>.hfe</code> - HFE disk image (when output filename ends with <code>.hfe</code>)</li> <li>Raw binary - 2048-byte catalog data (for other extensions)</li> <li><code>.png</code> - PNG image (via <code>--png</code> option)</li> </ul>"},{"location":"catalog/cmdline/#exit-status","title":"Exit Status","text":"<ul> <li><code>0</code> - Success</li> <li>Non-zero - Error occurred</li> </ul>"},{"location":"catalog/cmdline/#see-also","title":"See Also","text":"<ul> <li>Examples - Usage examples and workflows</li> <li>Index - Tool overview</li> </ul>"},{"location":"catalog/cmdline/#examples","title":"Examples","text":"<p>See Examples for comprehensive workflows.</p>"},{"location":"catalog/cmdline/#see-also_1","title":"See Also","text":"<ul> <li>Amsdos Format Documentation</li> <li>Examples</li> <li>DSKManager for low-level disk operations</li> </ul>"},{"location":"catalog/examples/","title":"Catalog CatArt Examples","text":"<p>Note: All examples below use real DSK files from the test suite and show actual command outputs.</p>"},{"location":"catalog/examples/#listing-catalog-content","title":"Listing Catalog Content","text":""},{"location":"catalog/examples/#list-files-no-control-characters","title":"List Files (No Control Characters)","text":"<p>The <code>list</code> command shows only files with printable names:</p> <pre><code>catalog BLOCUS.DSK list\n</code></pre> <p>Real Output: <pre><code>2026-02-17T22:54:06.703Z ERROR [cpclib_catalog] Current implementation is buggy when using dsks. Please extract first the catalog with another tool for real results.\n14. 0:-BLOC.US [hidden]    5Kb [Index(2), Index(3), Index(4), Index(5), Index(6)]\n36. 0:BLOCUS.001 [hidden]   16Kb [Index(7), Index(8), Index(9), Index(10), Index(11), Index(12), Index(13), Index(14), Index(15), Index(16), Index(17), Index(18), Index(19), Index(20), Index(21), Index(22)]\n37. 0:BLOCUS.002 [hidden]   16Kb [Index(23), Index(24), Index(25), Index(26), Index(27), Index(28), Index(29), Index(30), Index(31), Index(32), Index(33), Index(34), Index(35), Index(36), Index(37), Index(38)]\n38. 0:BLOCUS.003 [hidden]   16Kb [Index(39), Index(40), Index(41), Index(42), Index(43), Index(44), Index(45), Index(46), Index(47), Index(48), Index(49), Index(50), Index(51), Index(52), Index(53), Index(54)]\n39. 0:BLOCUS.004 [hidden]   16Kb [Index(55), Index(56), Index(57), Index(58), Index(59), Index(60), Index(61), Index(62), Index(63), Index(64), Index(65), Index(66), Index(67), Index(68), Index(69), Index(70)]\n</code></pre></p>"},{"location":"catalog/examples/#list-all-files-including-catart-entries","title":"List All Files (Including CatArt Entries)","text":"<p>The <code>listall</code> command shows ALL entries, including CatArt graphics data:</p> <pre><code>catalog BLOCUS.DSK listall\n</code></pre> <p>Real Output (first 20 entries): <pre><code>2026-02-17T22:54:34.583Z ERROR [cpclib_catalog] Current implementation is buggy when using dsks. Please extract first the catalog with another tool for real results.\n0. =&gt; CAT ART &lt;=\n1. =&gt; CAT ART &lt;=\n2. =&gt; CAT ART &lt;=\n3. =&gt; CAT ART &lt;=\n4. =&gt; CAT ART &lt;=\n5. =&gt; CAT ART &lt;=\n6. =&gt; CAT ART &lt;=\n7. =&gt; CAT ART &lt;=\n8. =&gt; CAT ART &lt;=\n9. =&gt; CAT ART &lt;=\n10. =&gt; CAT ART &lt;=\n11. =&gt; CAT ART &lt;=\n12. =&gt; CAT ART &lt;=\n13. =&gt; CAT ART &lt;=\n14. 0:-BLOC.US [hidden]    5Kb [Index(2), Index(3), Index(4), Index(5), Index(6)]\n15. =&gt; CAT ART &lt;=\n16. =&gt; CAT ART &lt;=\n17. =&gt; CAT ART &lt;=\n18. =&gt; CAT ART &lt;=\n19. =&gt; CAT ART &lt;=\n</code></pre></p> <p>The <code>=&gt; CAT ART &lt;=</code> entries are the graphical catalog display data.</p>"},{"location":"catalog/examples/#list-files-from-a-regular-disk","title":"List Files from a Regular Disk","text":"<p>Example with CATA.DSK which contains BASIC and text files:</p> <pre><code>catalog CATA.DSK list\n</code></pre> <p>Real Output: <pre><code>2026-02-17T22:55:01.869Z ERROR [cpclib_catalog] Current implementation is buggy when using dsks. Please extract first the catalog with another tool for real results.\n0. 0:-0TO31.BAS    1Kb [Index(2)]\n1. 0:-CATA.BAS    7Kb [Index(3), Index(4), Index(5), Index(6), Index(7), Index(8), Index(9)]\n2. 0:464BAD.BAS    1Kb [Index(10)]\n3. 0:464BAD.TXT    1Kb [Index(11)]\n4. 0:464GOOD.BAS    1Kb [Index(12)]\n5. 0:464GOOD.TXT    1Kb [Index(13)]\n6. 0:CATA2.BAS    6Kb [Index(14), Index(15), Index(16), Index(17), Index(18), Index(19)]\n7. 0:CATA3.BAS    7Kb [Index(20), Index(21), Index(22), Index(23), Index(24), Index(25), Index(26)]\n8. 0:FORCE1.BAS    1Kb [Index(27)]\n9. 0:FORCE1.TXT    1Kb [Index(28)]\n10. 0:MODE0.BAS    1Kb [Index(29)]\n11. 0:MODE0.TXT    1Kb [Index(30)]\n12. 0:MODE1.BAS    1Kb [Index(31)]\n13. 0:MODE1.TXT    1Kb [Index(32)]\n14. 0:MODE2.BAS    1Kb [Index(33)]\n15. 0:MODE2.TXT    1Kb [Index(34)]\n16. 0:CATA-FR.TXT   16Kb [Index(35), Index(36), Index(37), Index(38), Index(39), Index(40), Index(41), Index(42), Index(43), Index(44), Index(45), Index(46), Index(47), Index(48), Index(49), Index(50)]\n17. 0:CATA-FR.TXT    1Kb [Index(51)]\n18. 0:CATA-UK.TXT   15Kb [Index(52), Index(53), Index(54), Index(55), Index(56), Index(57), Index(58), Index(59), Index(60), Index(61), Index(62), Index(63), Index(64), Index(65), Index(66)]\n19. 0:-T5.BAS    2Kb [Index(67), Index(68)]\n20. 0:T5.ASC    2Kb [Index(69), Index(70)]\n21. 0:-T6.BAS    2Kb [Index(71), Index(72)]\n22. 0:T6.ASC    2Kb [Index(73), Index(74)]\n23. 0:-T7.BAK    2Kb [Index(75), Index(76)]\n24. 0:T7.BAK    2Kb [Index(77), Index(78)]\n25. 0:-T7.BAS    2Kb [Index(79), Index(80)]\n26. 0:T7.ASC    2Kb [Index(81), Index(82)]\n27. 0:-T8.BAS    2Kb [Index(83), Index(84)]\n28. 0:T8.ASC    2Kb [Index(85), Index(86)]\n</code></pre></p> <p>Note: Files prefixed with <code>-</code> are hidden (system) files.</p>"},{"location":"catalog/examples/#viewing-catart-graphics","title":"Viewing CatArt Graphics","text":""},{"location":"catalog/examples/#display-catart-to-terminal","title":"Display CatArt to Terminal","text":"<p>The <code>cat</code> command displays the graphical catalog in your terminal:</p> <pre><code>catalog BLOCUS.DSK cat\n</code></pre> <p>Real Output: <pre><code>      There are only 7 real demos on CPC...     \n</code></pre></p> <p>This command renders the CatArt using ANSI terminal graphics.</p>"},{"location":"catalog/examples/#generate-png-image-of-catart","title":"Generate PNG Image of CatArt","text":"<p>The <code>cat</code> and <code>dir</code> commands support <code>--png</code> to export pixel-accurate renderings:</p> <pre><code># Generate PNG of sorted catalog\ncatalog BLOCUS.DSK cat --png blocus_catalog.png\n\n# Generate PNG of directory listing\ncatalog BLOCUS.DSK dir --png blocus_directory.png\n\n# Generate PNG with specific mode and locale\ncatalog BLOCUS.DSK cat --png catalog_mode0.png --mode 0 --locale french\n</code></pre> <p>PNG Output: Creates a pixel-accurate PNG image showing exactly how the CatArt would appear on a real Amstrad CPC screen, including: - Correct CPC color palette - Authentic screen modes (0, 1, 2, or 3) - Proper font rendering based on locale (English, French, Spanish, German, Danish)</p> <p>Example Catalog Rendering (sorted alphabetically):</p> <p></p> <p>Example Directory Listing (unsorted, directory order):</p> <p></p>"},{"location":"catalog/examples/#building-catart-disks","title":"Building CatArt Disks","text":""},{"location":"catalog/examples/#build-from-ascii-source","title":"Build from ASCII Source","text":"<p>Create a CatArt disk from an ASCII BASIC source file:</p> <pre><code>catalog T8.ASC build -o catart.dsk\n</code></pre> <p>Real Output: <pre><code>2026-02-17T22:57:32.565Z INFO  [cpclib_catalog]\n=== BASIC PROGRAM BYTE COMPARISON ===\n2026-02-17T22:57:32.566Z INFO  [cpclib_catalog] Original BASIC program: 129 commands -&gt; 319 bytes\n2026-02-17T22:57:32.566Z INFO  [cpclib_catalog] Reconstructed BASIC program: 130 commands -&gt; 320 bytes\n\nSuccess! Created catart.dsk (204544 bytes)\n</code></pre></p>"},{"location":"catalog/examples/#build-and-generate-png-preview","title":"Build and Generate PNG Preview","text":"<p>Build a CatArt disk and simultaneously generate a PNG preview:</p> <pre><code># Build DSK with PNG preview\ncatalog T8.ASC build -o catart.dsk --png preview.png\n\n# Build with specific mode and locale\ncatalog T8.ASC build -o catart.dsk --png preview.png --mode 0 --locale french\n</code></pre> <p>This creates both the DSK file and a PNG image showing how the CatArt will look.</p> <p>The build process: 1. Parses the ASCII BASIC source 2. Generates CatArt commands 3. Creates a working BASIC program 4. Writes it to a DSK file</p>"},{"location":"catalog/examples/#understanding-catart","title":"Understanding CatArt","text":"<p>CatArt is a technique where the Amstrad CPC file catalog itself contains BASIC commands that draw graphics when listed. The tool processes BASIC programs and converts them into special catalog entries that create visual effects.</p>"},{"location":"catalog/examples/#important-notes","title":"Important Notes","text":"<ol> <li> <p>DSK Processing Warning: The tool currently shows a warning about DSK handling being buggy. For production use, extract the catalog binary first with another tool.</p> </li> <li> <p>File Number Format: The output format shows:</p> </li> <li>Entry number (e.g., <code>14.</code>)</li> <li>User number (e.g., <code>0:</code>)</li> <li>Filename (e.g., <code>-BLOC.US</code>)</li> <li>Attributes (<code>[hidden]</code>, <code>[system]</code>, <code>[readonly]</code>)</li> <li>Size in KB</li> <li> <p>Block allocation (<code>[Index(2), Index(3), ...]</code>)</p> </li> <li> <p>CatArt Entries: Entries marked <code>=&gt; CAT ART &lt;=</code> are not real files but graphical data that creates the visual catalog display.</p> </li> </ol>"},{"location":"catalog/examples/#available-commands","title":"Available Commands","text":"<p>Run <code>catalog --help</code> to see all commands:</p> <pre><code>catalog --help\n</code></pre> <p>Available Commands: - <code>cat</code> - Display catalog with CatArt rendering (sorted alphabetically) - <code>dir</code> - Display catalog in directory order (unsorted) - <code>list</code> - List content (files with printable names only) - <code>listall</code> - List all content (including control characters) - <code>build</code> - Build catart from BASIC program - <code>decode</code> - Extract BASIC listing from catalog - <code>modify</code> - Modify catalog entries - <code>debug</code> - Debug catart structure</p>"},{"location":"cpc2img/","title":"cpc2img - CPC to Image Converter","text":"<p><code>cpc2img</code> converts CPC screen files (.scr), palette files (.pal), and sprite data to PNG format for viewing and editing on modern systems.</p>"},{"location":"cpc2img/#features","title":"Features","text":"<ul> <li>Screen conversion: Convert 16KB CPC screen dumps to PNG</li> <li>Palette support: Load OCP palette files or specify manual pen assignments</li> <li>Sprite extraction: Convert sprite data to PNG images</li> <li>All video modes: Mode 0, Mode 1, Mode 2</li> <li>Aspect ratio correction: Optional pixel doubling for mode 0</li> </ul>"},{"location":"cpc2img/#quick-start","title":"Quick Start","text":"<pre><code># Convert SCR file to PNG\ncpc2img TITLE.SCR output.png --mode 0\n\n# With OCP palette\ncpc2img SCREEN.SCR image.png --pal colors.pal\n\n# Mode 0 with correct aspect ratio\ncpc2img MODE0.SCR wide.png --mode 0 --mode0ratio\n</code></pre>"},{"location":"cpc2img/#input-formats","title":"Input Formats","text":"<ul> <li>SCR files - 16KB screen memory dumps</li> <li>PAL files - OCP palette files</li> <li>Binary sprite data - Linear sprite data</li> </ul>"},{"location":"cpc2img/#see-also","title":"See Also","text":""},{"location":"cpc2img/#integration-with-bndbuild","title":"Integration with BndBuild","text":"<p>cpc2img is available as a standalone <code>cpc2img</code> binary but can also be used within BndBuild build scripts using the <code>cpc2img</code> command. See BndBuild Commands for integration details.</p>"},{"location":"cpc2img/#see-also_1","title":"See Also","text":"<ul> <li>Command Line Reference - Detailed documentation of all options</li> <li>Examples - Usage examples and workflows</li> </ul>"},{"location":"cpc2img/cmdline/","title":"cpc2img Command Line Reference","text":""},{"location":"cpc2img/cmdline/#synopsis","title":"Synopsis","text":"<pre><code>cpc2img [OPTIONS] &lt;INPUT&gt; &lt;OUTPUT&gt; [COMMAND]\n</code></pre>"},{"location":"cpc2img/cmdline/#description","title":"Description","text":"<p>Generates PNG images from CPC screen files, palette files, or sprite data.</p>"},{"location":"cpc2img/cmdline/#arguments","title":"Arguments","text":"<ul> <li><code>&lt;INPUT&gt;</code> - File to read. Can be a .scr, a .pal</li> <li><code>&lt;OUTPUT&gt;</code> - Output PNG filename</li> </ul>"},{"location":"cpc2img/cmdline/#commands","title":"Commands","text":""},{"location":"cpc2img/cmdline/#palette","title":"<code>palette</code>","text":"<p>Load an OCP palette file.</p> <pre><code>cpc2img colors.pal output.png palette\n</code></pre>"},{"location":"cpc2img/cmdline/#sprite","title":"<code>sprite</code>","text":"<p>Load from a linear sprite data.</p> <pre><code>cpc2img PLAYER.SPR sprite.png sprite\n</code></pre>"},{"location":"cpc2img/cmdline/#screen","title":"<code>screen</code>","text":"<p>Load from a 16kb screen data.</p> <pre><code>cpc2img SCREEN.SCR output.png screen\n</code></pre>"},{"location":"cpc2img/cmdline/#options","title":"Options","text":""},{"location":"cpc2img/cmdline/#video-mode","title":"Video Mode","text":"<ul> <li><code>-m, --mode &lt;MODE&gt;</code> - Screen mode of the image to convert [default: 0]</li> <li><code>0</code> - 160\u00d7200, 16 colors</li> <li><code>1</code> - 320\u00d7200, 4 colors</li> <li><code>2</code> - 640\u00d7200, 2 colors</li> <li><code>--mode0ratio</code> - Horizontally double the pixels (for mode 0 aspect ratio correction)</li> </ul>"},{"location":"cpc2img/cmdline/#palette-control","title":"Palette Control","text":"<ul> <li><code>--pal &lt;OCP_PAL&gt;</code> - OCP PAL file. The first palette among 12 is used</li> <li><code>--pens &lt;PENS&gt;</code> - Separated list of ink number. Use ',' as a separator</li> <li><code>--pen0</code> to <code>--pen15 &lt;PEN&gt;</code> - Ink number for each pen (0-15)</li> <li><code>--pen16 &lt;PEN16&gt;</code> - Ink number of the pen 16 (border)</li> <li><code>--unlock-pens</code> - When some pens are manually provided, allows to also use the other ones by automatically assigning them missing inks</li> </ul>"},{"location":"cpc2img/cmdline/#other-options","title":"Other Options","text":"<ul> <li><code>-h, --help</code> - Print help</li> <li><code>-V, --version</code> - Print version</li> </ul>"},{"location":"cpc2img/cmdline/#cpc-video-modes","title":"CPC Video Modes","text":"Mode Resolution Colors Bytes/Line Typical Use 0 160\u00d7200 16 80 Colorful graphics 1 320\u00d7200 4 80 Standard graphics 2 640\u00d7200 2 80 High resolution text"},{"location":"cpc2img/cmdline/#exit-status","title":"Exit Status","text":"<ul> <li><code>0</code> - Success</li> <li>Non-zero - Error occurred</li> </ul>"},{"location":"cpc2img/cmdline/#see-also","title":"See Also","text":"<ul> <li>Examples - Usage examples and workflows</li> <li>Index - Tool overview</li> </ul>"},{"location":"cpc2img/examples_CLEAN/","title":"cpc2img Examples","text":"<p>Complete Command Reference</p> <p>For all current command syntax and options, see:</p> <ul> <li>Built-in help: <code>cpc2img --help</code></li> <li>Complete CLI Help Reference</li> </ul>"},{"location":"cpc2img/examples_CLEAN/#basic-usage","title":"Basic Usage","text":"<p>The general syntax is: <pre><code>cpc2img &lt;INPUT&gt; &lt;OUTPUT&gt; &lt;SUBCOMMAND&gt; [OPTIONS]\n</code></pre></p>"},{"location":"cpc2img/examples_CLEAN/#convert-screen-data","title":"Convert Screen Data","text":"<pre><code>cpc2img screen.bin output.png screen\n</code></pre>"},{"location":"cpc2img/examples_CLEAN/#convert-sprite-data","title":"Convert Sprite Data","text":"<pre><code>cpc2img sprite.spr output.png sprite --width 16\n</code></pre>"},{"location":"cpc2img/examples_CLEAN/#extract-palette","title":"Extract Palette","text":"<pre><code>cpc2img colors.pal palette.png palette\n</code></pre> <p>For complete options and advanced usage, use <code>--help</code> with each subcommand.</p>"},{"location":"cprcli/","title":"CPRCLI - CPR Cartridge Tool","text":"<p>CPRCLI is a command-line tool for analyzing and manipulating Amstrad CPC Plus CPR (Cartridge) files.</p>"},{"location":"cprcli/#features","title":"Features","text":"<ul> <li>Display CPR cartridge information</li> <li>Extract specific banks from cartridges</li> <li>Compare CPR files</li> <li>Dump cartridge memory contents</li> <li>Bank selection and filtering</li> </ul>"},{"location":"cprcli/#quick-start","title":"Quick Start","text":"<pre><code># Show cartridge information\ncprcli --cpr1 game.cpr --info\n\n# Dump specific banks\ncprcli --cpr1 game.cpr --bank 0,1,2 --dump\n\n# Compare two cartridges\ncprcli --cpr1 version1.cpr --cpr2 version2.cpr --info\n</code></pre>"},{"location":"cprcli/#what-are-cpr-files","title":"What are CPR Files?","text":"<p>CPR files are ROM cartridge images for the Amstrad CPC Plus range (464+, 6128+, GX4000). Cartridges can contain up to 32 banks of 16KB each (512KB total).</p>"},{"location":"cprcli/#see-also","title":"See Also","text":""},{"location":"cprcli/#integration-with-bndbuild","title":"Integration with BndBuild","text":"<p>CPRCLI is available as a standalone <code>cpr</code> binary but can also be used within BndBuild build scripts using the <code>cpr</code> command. See BndBuild Commands for integration details.</p>"},{"location":"cprcli/#see-also_1","title":"See Also","text":"<ul> <li>Command Line Reference - Detailed documentation of all options</li> <li>Examples - Usage examples and workflows</li> </ul>"},{"location":"cprcli/cmdline/","title":"CPRCLI Command Line Reference","text":""},{"location":"cprcli/cmdline/#synopsis","title":"Synopsis","text":"<pre><code>cprcli --cpr1 &lt;FILE&gt; [OPTIONS]\n</code></pre>"},{"location":"cprcli/cmdline/#description","title":"Description","text":"<p>CPRCLI provides tools for analyzing CPR cartridge files used with Amstrad CPC Plus computers.</p>"},{"location":"cprcli/cmdline/#required-arguments","title":"Required Arguments","text":""},{"location":"cprcli/cmdline/#-cpr1-file","title":"<code>--cpr1 &lt;FILE&gt;</code>","text":"<p>The CPR cartridge file to analyze.</p>"},{"location":"cprcli/cmdline/#options","title":"Options","text":""},{"location":"cprcli/cmdline/#-info","title":"<code>--info</code>","text":"<p>Display information about the cartridge, including: - Number of banks present - Bank sizes - Total cartridge size - Bank organization</p> <p>Example: <pre><code>cprcli --cpr1 game.cpr --info\n</code></pre></p>"},{"location":"cprcli/cmdline/#-dump","title":"<code>--dump</code>","text":"<p>Output the raw memory contents of the selected banks. By default, dumps all banks. Use <code>--bank</code> to select specific banks.</p> <p>Example: <pre><code>cprcli --cpr1 game.cpr --dump &gt; cartridge_dump.bin\n</code></pre></p>"},{"location":"cprcli/cmdline/#-bank-banks","title":"<code>--bank &lt;BANKS&gt;</code>","text":"<p>Select specific banks to work with. Accepts: - Single bank: <code>--bank 0</code> - Multiple banks: <code>--bank 0,1,2</code> - Comma-separated list</p> <p>Valid bank numbers: 0-31</p> <p>Example: <pre><code>cprcli --cpr1 game.cpr --bank 0,1 --dump\n</code></pre></p>"},{"location":"cprcli/cmdline/#-cpr2-file","title":"<code>--cpr2 &lt;FILE&gt;</code>","text":"<p>Second CPR file for comparison. When specified with <code>--info</code>, shows differences between the two cartridges.</p> <p>Example: <pre><code>cprcli --cpr1 version1.cpr --cpr2 version2.cpr --info\n</code></pre></p>"},{"location":"cprcli/cmdline/#-h-help","title":"<code>-h, --help</code>","text":"<p>Print help information.</p>"},{"location":"cprcli/cmdline/#-v-version","title":"<code>-V, --version</code>","text":"<p>Print version information.</p>"},{"location":"cprcli/cmdline/#cpr-format","title":"CPR Format","text":"<p>CPR files contain ROM banks for CPC Plus cartridges: - Each bank: 16,384 bytes (16KB) - Maximum banks: 32 - Maximum cartridge size: 512KB - Banks are mapped to CPC memory on cartridge activation</p>"},{"location":"cprcli/cmdline/#exit-status","title":"Exit Status","text":"<ul> <li><code>0</code> - Success</li> <li><code>1</code> - Error (file not found, invalid CPR format)</li> </ul>"},{"location":"cprcli/cmdline/#examples","title":"Examples","text":"<p>See Examples for detailed usage.</p>"},{"location":"cprcli/examples/","title":"CPR CLI Examples","text":"<p>Command Reference</p> <p>For current syntax: <code>cprcli --help</code></p> <p>Basic cartridge file manipulation tool.</p> <p>Use <code>cprcli --help</code> for complete usage.</p>"},{"location":"crunch/","title":"Crunch - Data Compression Tool","text":"<p>The <code>crunch</code> tool is a command-line utility for compressing binary data for Amstrad CPC programs using various Z80-optimized compression algorithms.</p>"},{"location":"crunch/#installation","title":"Installation","text":"<p>The crunch tool is built as part of the cpclib toolchain:</p> <pre><code>cargo install cpclib-crunch\n</code></pre>"},{"location":"crunch/#overview","title":"Overview","text":"<p>Crunch provides access to multiple compression algorithms specifically optimized for Z80-based systems like the Amstrad CPC. Each algorithm offers different trade-offs between compression ratio, decompression speed, and memory usage.</p>"},{"location":"crunch/#supported-compression-algorithms","title":"Supported Compression Algorithms","text":"<ul> <li>Apultra - High compression ratio with good decompression speed</li> <li>Exomizer - Excellent compression, widely used in retro computing</li> <li>Lz4 - Very fast decompression, moderate compression</li> <li>Lz48 - Lightweight LZ-based compression</li> <li>Lz49 - Enhanced version of LZ48</li> <li>Lzsa1 - Fast decompression with good compression ratio</li> <li>Lzsa2 - Better compression than LZSA1, slightly slower decompression</li> <li>Shrinkler - Extreme compression for size-critical applications</li> <li>Upkr - Efficient general-purpose compression</li> <li>Zx0 - Modern, efficient compression for Z80 systems</li> </ul>"},{"location":"crunch/#quick-start","title":"Quick Start","text":"<p>Compress a binary file:</p> <pre><code>crunch -c apultra -i input.bin -o output.crunched\n</code></pre> <p>Extract Z80 decompression source code:</p> <pre><code>crunch -c apultra -z\n</code></pre>"},{"location":"crunch/#usage","title":"Usage","text":"<pre><code>crunch [OPTIONS] -c &lt;CRUNCHER&gt;\n</code></pre>"},{"location":"crunch/#options","title":"Options","text":""},{"location":"crunch/#integration-with-bndbuild","title":"Integration with BndBuild","text":"<p>Crunch is available as a standalone <code>crunch</code> binary but can also be used within BndBuild build scripts using the <code>crunch</code> or <code>compress</code> command aliases. See BndBuild Commands for integration details.</p>"},{"location":"crunch/#options_1","title":"Options","text":"<ul> <li><code>-c, --cruncher &lt;CRUNCHER&gt;</code> - Select the compression algorithm to use (required)</li> <li> <p>Choices: <code>apultra</code>, <code>exomizer</code>, <code>lz4</code>, <code>lz48</code>, <code>lz49</code>, <code>lzsa1</code>, <code>lzsa2</code>, <code>shrinkler</code>, <code>upkr</code>, <code>zx0</code></p> </li> <li> <p><code>-i, --input &lt;INPUT&gt;</code> - Input file to compress</p> </li> <li>Can be a binary file (e.g., <code>my_file.o</code>)</li> <li>Can be an Amsdos file (e.g., <code>FILE.BIN</code>)</li> <li> <p>Can be a file within a disc image (e.g., <code>my_disc.dsk#FILE.BIN</code>)</p> </li> <li> <p><code>-o, --output &lt;OUTPUT&gt;</code> - Compressed output file (requires <code>--input</code>)</p> </li> <li>Can be a binary file</li> <li>Can be an Amsdos file</li> <li> <p>Can be a file within a disc image</p> </li> <li> <p><code>-k, --keep-header</code> - Also compress the Amsdos header</p> </li> <li> <p>Useful for binary files where the first bytes contain a valid Amsdos header</p> </li> <li> <p><code>-H, --header</code> - Add an Amsdos header when storing the file on the host</p> </li> <li> <p><code>-z, --z80</code> - Display the Z80 decompression source code</p> </li> <li>Cannot be used with <code>--input</code></li> <li>Outputs the assembly code for decompressing data</li> </ul>"},{"location":"crunch/#examples","title":"Examples","text":""},{"location":"crunch/#basic-compression","title":"Basic Compression","text":"<p>Compress a file using Apultra:</p> <pre><code>crunch -c apultra -i game.bin -o game.crunched\n</code></pre>"},{"location":"crunch/#compress-with-amsdos-header","title":"Compress with Amsdos Header","text":"<p>Compress a file and add an Amsdos header:</p> <pre><code>crunch -c exomizer -i data.bin -o data.crunched -H\n</code></pre>"},{"location":"crunch/#keep-original-header","title":"Keep Original Header","text":"<p>Compress a file while preserving its Amsdos header:</p> <pre><code>crunch -c lzsa1 -i FILE.BIN -o FILE.CRN -k\n</code></pre>"},{"location":"crunch/#compress-file-in-dsk","title":"Compress File in DSK","text":"<p>Compress a file and store it directly in a disc image:</p> <pre><code>crunch -c zx0 -i sprite.bin -o game.dsk#SPRITE.CRN\n</code></pre>"},{"location":"crunch/#get-decompression-code","title":"Get Decompression Code","text":"<p>Extract the Z80 assembly decompression routine:</p> <pre><code>crunch -c apultra -z &gt; unaplib.asm\n</code></pre> <p>This outputs the Z80 decompression source code that can be included in your assembly projects.</p>"},{"location":"crunch/#choosing-a-compression-algorithm","title":"Choosing a Compression Algorithm","text":"<p>Different algorithms are suited for different use cases:</p>"},{"location":"crunch/#for-maximum-compression","title":"For Maximum Compression","text":"<ul> <li>Shrinkler - Best compression ratio, but slower decompression</li> <li>Exomizer - Excellent compression, widely tested and reliable</li> </ul>"},{"location":"crunch/#for-fast-decompression","title":"For Fast Decompression","text":"<ul> <li>Lz4 - Very fast decompression, ideal for realtime applications</li> <li>Lzsa1 - Good balance of speed and compression</li> <li>Zx0 - Modern algorithm with fast decompression</li> </ul>"},{"location":"crunch/#for-general-use","title":"For General Use","text":"<ul> <li>Apultra - Good all-around choice</li> <li>Lzsa2 - Better compression than LZSA1, still reasonably fast</li> </ul>"},{"location":"crunch/#lightweight-options","title":"Lightweight Options","text":"<ul> <li>Lz48/Lz49 - Small decompressor code, good for size-constrained projects</li> <li>Upkr - Efficient general-purpose compression</li> </ul>"},{"location":"crunch/#file-format-support","title":"File Format Support","text":""},{"location":"crunch/#binary-files","title":"Binary Files","text":"<p>Standard binary files without headers: <pre><code>crunch -c apultra -i data.o -o data.crunched\n</code></pre></p>"},{"location":"crunch/#amsdos-files","title":"Amsdos Files","text":"<p>Files with Amsdos headers (load address, execution address): <pre><code>crunch -c exomizer -i SCREEN.BIN -o SCREEN.CRN\n</code></pre></p>"},{"location":"crunch/#disc-images","title":"Disc Images","text":"<p>Files stored within DSK disc images: <pre><code>crunch -c zx0 -i game.dsk#LEVEL1.BIN -o game.dsk#LEVEL1.CRN\n</code></pre></p>"},{"location":"crunch/#using-compressed-data","title":"Using Compressed Data","text":"<p>After compressing your data, you need to include the corresponding decompression routine in your Z80 code:</p> <ol> <li> <p>Get the decompression source: <pre><code>crunch -c apultra -z &gt; unaplib.asm\n</code></pre></p> </li> <li> <p>Include it in your assembly project: <pre><code>    INCLUDE \"unaplib.asm\"\n\n    ; Load compressed data address\n    ld hl, compressed_data\n    ld de, destination\n    call decompress\n</code></pre></p> </li> </ol> <p>Each decompressor has its own calling convention - check the generated source code for specific details.</p>"},{"location":"crunch/#integration-with-basm","title":"Integration with BASM","text":"<p>The crunch tool can be used directly in BASM assembly projects:</p> <pre><code>; In your BASM source\ncompressed_data:\n    INCBIN \"data.crunched\"\n</code></pre> <p>Or use the CRUNCH directive in BASM for automatic compression:</p> <pre><code>CRUNCH \"apultra\", \"data.bin\"\n</code></pre>"},{"location":"crunch/#notes","title":"Notes","text":"<ul> <li>Compression time may vary significantly between algorithms</li> <li>Shrinkler provides the best compression but can be slow to compress</li> <li>Always test decompression speed on actual hardware for timing-critical code</li> <li>The <code>-k, --keep-header</code> flag is useful when the header contains important data</li> </ul>"},{"location":"crunch/#see-also","title":"See Also","text":"<ul> <li>BASM Documentation - Assembly language support with compression directives</li> <li>BndBuild Documentation - Build system integration</li> <li>Disc Management - Working with DSK disc images</li> </ul>"},{"location":"crunch/cmdline/","title":"Crunch Command Line Reference","text":"<p>Complete command-line reference for the <code>crunch</code> data compression tool.</p>"},{"location":"crunch/cmdline/#synopsis","title":"Synopsis","text":"<pre><code>crunch [OPTIONS] -c &lt;CRUNCHER&gt;\n</code></pre>"},{"location":"crunch/cmdline/#global-options","title":"Global Options","text":""},{"location":"crunch/cmdline/#-c-cruncher-cruncher","title":"<code>-c, --cruncher &lt;CRUNCHER&gt;</code>","text":"<p>Required. Specifies the compression algorithm to use.</p> <p>Choices: - <code>apultra</code> - APultra compression - <code>exomizer</code> - Exomizer compression - <code>lz4</code> - LZ4 compression - <code>lz48</code> - LZ48 compression - <code>lz49</code> - LZ49 compression - <code>lzsa1</code> - LZSA version 1 - <code>lzsa2</code> - LZSA version 2 - <code>shrinkler</code> - Shrinkler compression - <code>upkr</code> - UPKR compression - <code>zx0</code> - ZX0 compression</p> <p>Example: <pre><code>crunch -c apultra -i input.bin -o output.crunched\n</code></pre></p>"},{"location":"crunch/cmdline/#inputoutput-options","title":"Input/Output Options","text":""},{"location":"crunch/cmdline/#-i-input-input","title":"<code>-i, --input &lt;INPUT&gt;</code>","text":"<p>Specifies the input file to compress.</p> <p>Formats: - Simple binary: <code>data.bin</code> - Amsdos file: <code>SCREEN.BIN</code> - File in disc: <code>game.dsk#LEVEL1.BIN</code></p> <p>Example: <pre><code>crunch -c exomizer -i sprite.bin -o sprite.crunched\n</code></pre></p>"},{"location":"crunch/cmdline/#-o-output-output","title":"<code>-o, --output &lt;OUTPUT&gt;</code>","text":"<p>Specifies the compressed output file. Requires <code>--input</code> to be specified.</p> <p>Formats: - Simple binary: <code>data.crunched</code> - Amsdos file: <code>DATA.CRN</code> - File in disc: <code>game.dsk#DATA.CRN</code></p> <p>Example: <pre><code>crunch -c zx0 -i data.bin -o game.dsk#DATA.CRN\n</code></pre></p>"},{"location":"crunch/cmdline/#header-options","title":"Header Options","text":""},{"location":"crunch/cmdline/#-k-keep-header","title":"<code>-k, --keep-header</code>","text":"<p>Compress the Amsdos header along with the file data.</p> <p>By default, Amsdos headers are stripped before compression. Use this flag when the header contains important data that should be compressed.</p> <p>Default: <code>false</code></p> <p>Example: <pre><code>crunch -c apultra -i FILE.BIN -o FILE.CRN -k\n</code></pre></p>"},{"location":"crunch/cmdline/#-h-header","title":"<code>-H, --header</code>","text":"<p>Add an Amsdos header when storing the compressed file on the host.</p> <p>Default: <code>false</code></p> <p>Example: <pre><code>crunch -c lzsa1 -i data.bin -o DATA.CRN -H\n</code></pre></p>"},{"location":"crunch/cmdline/#source-code-options","title":"Source Code Options","text":""},{"location":"crunch/cmdline/#-z-z80","title":"<code>-z, --z80</code>","text":"<p>Display the Z80 assembly decompression source code for the selected algorithm.</p> <p>Cannot be used with <code>--input</code>. This option outputs the decompressor routine that you can include in your Z80 assembly projects.</p> <p>Conflicts with: <code>--input</code></p> <p>Default: <code>false</code></p> <p>Example: <pre><code>crunch -c apultra -z &gt; unaplib.asm\n</code></pre></p>"},{"location":"crunch/cmdline/#common-usage-patterns","title":"Common Usage Patterns","text":""},{"location":"crunch/cmdline/#compress-a-binary-file","title":"Compress a Binary File","text":"<pre><code>crunch -c apultra -i data.bin -o data.crunched\n</code></pre>"},{"location":"crunch/cmdline/#compress-with-amsdos-header","title":"Compress with Amsdos Header","text":"<pre><code>crunch -c exomizer -i graphics.bin -o GRAPHICS.CRN -H\n</code></pre>"},{"location":"crunch/cmdline/#compress-file-preserving-original-header","title":"Compress File Preserving Original Header","text":"<pre><code>crunch -c lzsa2 -i MUSIC.BIN -o MUSIC.CRN -k\n</code></pre>"},{"location":"crunch/cmdline/#compress-into-disc-image","title":"Compress into Disc Image","text":"<pre><code>crunch -c zx0 -i level1.bin -o game.dsk#LEVEL1.CRN\n</code></pre>"},{"location":"crunch/cmdline/#extract-decompression-routine","title":"Extract Decompression Routine","text":"<pre><code>crunch -c apultra -z\n</code></pre>"},{"location":"crunch/cmdline/#compare-algorithms","title":"Compare Algorithms","text":"<p>Test different algorithms to find the best one for your data:</p> <pre><code>crunch -c apultra -i data.bin -o data.apultra\ncrunch -c zx0 -i data.bin -o data.zx0\ncrunch -c shrinkler -i data.bin -o data.shrink\n</code></pre> <p>Then compare file sizes to choose the most effective algorithm.</p>"},{"location":"crunch/cmdline/#exit-status","title":"Exit Status","text":"<ul> <li>0 - Success</li> <li>Non-zero - Error occurred (invalid arguments, compression failed, file I/O error)</li> </ul>"},{"location":"crunch/cmdline/#notes","title":"Notes","text":"<ul> <li>The <code>--cruncher</code> option is always required</li> <li>Use <code>--z80</code> to get the decompression routine for your assembly projects</li> <li>Files in disc images use the format <code>disc.dsk#FILE.BIN</code></li> <li>Amsdos headers are automatically detected and handled by default</li> <li>The <code>--keep-header</code> flag is useful when headers contain data beyond standard metadata</li> </ul>"},{"location":"crunch/cmdline/#see-also","title":"See Also","text":"<ul> <li>Crunch Overview - Main documentation</li> <li>Examples - Detailed usage examples</li> </ul>"},{"location":"crunch/examples/","title":"Crunch Examples","text":"<p>Practical examples of using the <code>crunch</code> data compression tool for Amstrad CPC projects.</p>"},{"location":"crunch/examples/#basic-compression-examples","title":"Basic Compression Examples","text":""},{"location":"crunch/examples/#compress-a-graphics-file","title":"Compress a Graphics File","text":"<pre><code># Compress a screen dump with Apultra\ncrunch -c apultra -i screen.scr -o screen.crunched\n\n# File size comparison\nls -lh screen.scr screen.crunched\n</code></pre>"},{"location":"crunch/examples/#compress-game-data","title":"Compress Game Data","text":"<pre><code># Compress level data with ZX0\ncrunch -c zx0 -i level1.dat -o level1.zx0\n\n# Compress with Exomizer for better ratio\ncrunch -c exomizer -i level1.dat -o level1.exo\n</code></pre>"},{"location":"crunch/examples/#compress-multiple-files","title":"Compress Multiple Files","text":"<pre><code># Compress all level files with a loop\nfor file in level*.bin; do\n    crunch -c lzsa1 -i \"$file\" -o \"${file%.bin}.lzsa\"\ndone\n</code></pre>"},{"location":"crunch/examples/#working-with-amsdos-headers","title":"Working with Amsdos Headers","text":""},{"location":"crunch/examples/#add-header-during-compression","title":"Add Header During Compression","text":"<pre><code># Compress and add Amsdos header\ncrunch -c apultra -i graphics.bin -o GRAPHICS.CRN -H\n</code></pre>"},{"location":"crunch/examples/#preserve-original-header","title":"Preserve Original Header","text":"<pre><code># Keep the original Amsdos header in compressed data\ncrunch -c exomizer -i MUSIC.BIN -o MUSIC.EXO -k\n</code></pre>"},{"location":"crunch/examples/#compress-binary-without-header","title":"Compress Binary Without Header","text":"<pre><code># Default behavior - strip header before compression\ncrunch -c zx0 -i SPRITE.BIN -o sprite.zx0\n</code></pre>"},{"location":"crunch/examples/#disc-image-integration","title":"Disc Image Integration","text":""},{"location":"crunch/examples/#compress-file-into-dsk","title":"Compress File into DSK","text":"<pre><code># Compress and store directly in disc image\ncrunch -c apultra -i titlescreen.scr -o game.dsk#TITLE.CRN\n</code></pre>"},{"location":"crunch/examples/#compress-from-dsk-to-dsk","title":"Compress from DSK to DSK","text":"<pre><code># Extract from one disc, compress, store in another\ncrunch -c zx0 -i source.dsk#DATA.BIN -o target.dsk#DATA.ZX0\n</code></pre>"},{"location":"crunch/examples/#build-compressed-disc","title":"Build Compressed Disc","text":"<pre><code># Create a disc with all compressed assets\ncrunch -c lzsa1 -i screen1.scr -o game.dsk#SCR1.LSA\ncrunch -c lzsa1 -i screen2.scr -o game.dsk#SCR2.LSA\ncrunch -c lzsa1 -i music.bin -o game.dsk#MUSIC.LSA\n</code></pre>"},{"location":"crunch/examples/#algorithm-comparison","title":"Algorithm Comparison","text":""},{"location":"crunch/examples/#test-multiple-algorithms","title":"Test Multiple Algorithms","text":"<pre><code>#!/bin/bash\n# Compare compression ratios for different algorithms\n\nINPUT=\"level1.bin\"\nORIGINAL_SIZE=$(stat -f%z \"$INPUT\")\n\necho \"Original size: $ORIGINAL_SIZE bytes\"\necho \"\"\n\nfor algo in apultra exomizer lz4 lzsa1 lzsa2 zx0 shrinkler; do\n    OUTPUT=\"level1.$algo\"\n    crunch -c $algo -i \"$INPUT\" -o \"$OUTPUT\"\n    COMPRESSED_SIZE=$(stat -f%z \"$OUTPUT\")\n    RATIO=$(echo \"scale=2; 100 * $COMPRESSED_SIZE / $ORIGINAL_SIZE\" | bc)\n    echo \"$algo: $COMPRESSED_SIZE bytes ($RATIO%)\"\ndone\n</code></pre>"},{"location":"crunch/examples/#performance-testing","title":"Performance Testing","text":"<p>Create a test program to measure decompression speed:</p> <pre><code>; test_decompress.asm\n    org &amp;8000\n\nstart:\n    ; Get start time\n    ld bc, &amp;BC06\n    out (c), c\n    ld bc, &amp;BD00\n    in a, (c)           ; Get initial time\n    ld (start_time), a\n\n    ; Decompress\n    ld hl, compressed_data\n    ld de, &amp;4000\n    call decompress\n\n    ; Get end time\n    ld bc, &amp;BC06\n    out (c), c\n    ld bc, &amp;BD00\n    in a, (c)\n    ld hl, start_time\n    sub (hl)\n\n    ; Display result\n    call display_time\n    ret\n\n    include \"unaplib.asm\"  ; Or other decompressor\n\ncompressed_data:\n    incbin \"data.crunched\"\n\nstart_time:\n    db 0\n</code></pre>"},{"location":"crunch/examples/#using-decompression-routines","title":"Using Decompression Routines","text":""},{"location":"crunch/examples/#extract-z80-source","title":"Extract Z80 Source","text":"<pre><code># Get Apultra decompressor\ncrunch -c apultra -z &gt; unaplib.asm\n\n# Get ZX0 decompressor\ncrunch -c zx0 -z &gt; dzx0.asm\n\n# Get LZSA1 decompressor\ncrunch -c lzsa1 -z &gt; unlzsa1.asm\n</code></pre>"},{"location":"crunch/examples/#use-in-basm-project","title":"Use in BASM Project","text":"<pre><code>; main.asm - Load and decompress data\n    org &amp;8000\n\nstart:\n    ; Decompress screen\n    ld hl, screen_compressed\n    ld de, &amp;c000\n    call decompress_apultra\n\n    ; Decompress sprites\n    ld hl, sprites_compressed\n    ld de, sprite_buffer\n    call decompress_apultra\n\n    ret\n\n    ; Include decompressor\n    include \"unaplib.asm\"\n\ndecompress_apultra:\n    jp decompress  ; Entry point from unaplib.asm\n\nscreen_compressed:\n    incbin \"screen.crunched\"\n\nsprites_compressed:\n    incbin \"sprites.crunched\"\n\nsprite_buffer:\n    ds 4096\n</code></pre>"},{"location":"crunch/examples/#real-world-scenarios","title":"Real-World Scenarios","text":""},{"location":"crunch/examples/#loading-screen-compression","title":"Loading Screen Compression","text":"<pre><code># Compress a mode 0 loading screen\ncrunch -c apultra -i loading.scr -o LOADING.CRN -H\n\n# Use in BASIC loader:\n# LOAD \"LOADING.CRN\"\n# CALL &amp;8000\n</code></pre>"},{"location":"crunch/examples/#multi-part-game-data","title":"Multi-Part Game Data","text":"<pre><code># Compress game resources with optimal algorithms\n\n# Simple graphics - use fast decompression\ncrunch -c lz4 -i tiles.bin -o game.dsk#TILES\n\n# Large level data - use best compression\ncrunch -c shrinkler -i world.bin -o game.dsk#WORLD\n\n# Frequently accessed - balance speed/size\ncrunch -c zx0 -i sprites.bin -o game.dsk#SPRITES\n</code></pre>"},{"location":"crunch/examples/#music-data-compression","title":"Music Data Compression","text":"<pre><code># Compress AY music data\ncrunch -c lzsa2 -i music.aky -o MUSIC.LSA -H\n\n# Compress multiple tracks\nfor track in track*.aky; do\n    name=$(basename \"$track\" .aky)\n    crunch -c lzsa2 -i \"$track\" -o \"game.dsk#${name}.LSA\"\ndone\n</code></pre>"},{"location":"crunch/examples/#build-system-integration","title":"Build System Integration","text":""},{"location":"crunch/examples/#makefile-example","title":"Makefile Example","text":"<pre><code># Makefile for game with compressed assets\n\nCRUNCH = crunch\nCRUNCHER = apultra\n\nSCREENS = screen1.scr screen2.scr screen3.scr\nSCREENS_CRN = $(SCREENS:.scr=.crunched)\n\nGAME.DSK: loader.bin $(SCREENS_CRN) sprites.crunched\n    # Create disc and add files\n    $(CRUNCH) -c $(CRUNCHER) -i loader.bin -o $@#LOADER.BIN\n    $(CRUNCH) -c $(CRUNCHER) -i screen1.crunched -o $@#SCR1.CRN\n    $(CRUNCH) -c $(CRUNCHER) -i screen2.crunched -o $@#SCR2.CRN\n    $(CRUNCH) -c $(CRUNCHER) -i screen3.crunched -o $@#SCR3.CRN\n    $(CRUNCH) -c $(CRUNCHER) -i sprites.crunched -o $@#SPRITE.CRN\n\n%.crunched: %.scr\n    $(CRUNCH) -c $(CRUNCHER) -i $&lt; -o $@\n\n%.crunched: %.bin\n    $(CRUNCH) -c $(CRUNCHER) -i $&lt; -o $@\n\nclean:\n    rm -f *.crunched GAME.DSK\n</code></pre>"},{"location":"crunch/examples/#bndbuild-integration","title":"BndBuild Integration","text":"<pre><code># build.yml for bndbuild\nbuild:\n  - cmd: basm\n    input: main.asm\n    output: main.bin\n\n  - cmd: crunch\n    args: [\"-c\", \"apultra\", \"-i\", \"graphics.bin\", \"-o\", \"graphics.crunched\"]\n\n  - cmd: dsk\n    args: [\"create\", \"game.dsk\"]\n\n  - cmd: dsk\n    args: [\"add\", \"game.dsk\", \"main.bin\"]\n\n  - cmd: dsk\n    args: [\"add\", \"game.dsk\", \"graphics.crunched\", \"GRAPHICS.CRN\"]\n</code></pre>"},{"location":"crunch/examples/#optimization-tips","title":"Optimization Tips","text":""},{"location":"crunch/examples/#choose-algorithm-based-on-data-type","title":"Choose Algorithm Based on Data Type","text":"<pre><code># Screens (high redundancy) - use strong compression\ncrunch -c exomizer -i screen.scr -o screen.exo\n\n# Code (medium redundancy) - balance speed/size\ncrunch -c zx0 -i code.bin -o code.zx0\n\n# Sprite data (low redundancy) - fast decompression\ncrunch -c lz4 -i sprites.bin -o sprites.lz4\n\n# Music (specific patterns) - test multiple\ncrunch -c lzsa2 -i music.bin -o music.lzsa\n</code></pre>"},{"location":"crunch/examples/#batch-processing","title":"Batch Processing","text":"<pre><code>#!/bin/bash\n# Compress all assets for a game\n\n# Create output directory\nmkdir -p compressed\n\n# Compress screens with maximum compression\nfor scr in assets/screens/*.scr; do\n    name=$(basename \"$scr\" .scr)\n    echo \"Compressing screen: $name\"\n    crunch -c shrinkler -i \"$scr\" -o \"compressed/${name}.crn\"\ndone\n\n# Compress sprites with fast decompression\nfor spr in assets/sprites/*.bin; do\n    name=$(basename \"$spr\" .bin)\n    echo \"Compressing sprites: $name\"\n    crunch -c lz4 -i \"$spr\" -o \"compressed/${name}.lz4\"\ndone\n\necho \"Compression complete!\"\n</code></pre>"},{"location":"crunch/examples/#see-also","title":"See Also","text":"<ul> <li>Crunch Overview - Main documentation</li> <li>Command Line Reference - Complete options</li> <li>BASM Documentation - Assembly integration</li> </ul>"},{"location":"cslcli/","title":"CSLCLI - CSL Parser and Validator","text":"<p>CSLCLI is a command-line tool for parsing and validating CSL (CPC Script Language) files.</p>"},{"location":"cslcli/#features","title":"Features","text":"<ul> <li>Parse CSL script files</li> <li>Validate CSL syntax</li> <li>Rich error reporting with line/column information</li> <li>Output parsed script structure</li> <li>Verbose debugging mode</li> </ul>"},{"location":"cslcli/#quick-start","title":"Quick Start","text":"<pre><code># Parse and validate a CSL file\ncslcli script.csl\n\n# Verbose output\ncslcli -v script.csl\n</code></pre>"},{"location":"cslcli/#what-is-csl","title":"What is CSL?","text":"<p>CSL (CPC Script Language) is a scripting language used for automating CPC emulation and testing scenarios. It allows you to: - Control emulator behavior - Automate input sequences - Run automated tests - Script demo/game sequences</p>"},{"location":"cslcli/#see-also","title":"See Also","text":"<ul> <li>Command Line Reference - Detailed documentation of all options</li> <li>Examples - Usage examples</li> <li>CSL Language Reference - CSL syntax and commands</li> </ul>"},{"location":"cslcli/cmdline/","title":"CSLCLI Command Line Reference","text":""},{"location":"cslcli/cmdline/#synopsis","title":"Synopsis","text":"<pre><code>cslcli [OPTIONS] &lt;FILE&gt;\n</code></pre>"},{"location":"cslcli/cmdline/#description","title":"Description","text":"<p>CSLCLI parses and validates CSL (CPC Script Language) files, providing rich error reporting and syntax validation.</p>"},{"location":"cslcli/cmdline/#arguments","title":"Arguments","text":""},{"location":"cslcli/cmdline/#file","title":"<code>&lt;FILE&gt;</code>","text":"<p>Path to the CSL script file to parse.</p>"},{"location":"cslcli/cmdline/#options","title":"Options","text":""},{"location":"cslcli/cmdline/#-v-verbose","title":"<code>-v, --verbose</code>","text":"<p>Enable verbose output. Shows: - Number of instructions parsed - Detailed parsing information - Debug output</p> <p>Example: <pre><code>cslcli -v test_script.csl\n</code></pre></p>"},{"location":"cslcli/cmdline/#-h-help","title":"<code>-h, --help</code>","text":"<p>Print help information.</p>"},{"location":"cslcli/cmdline/#-v-version","title":"<code>-V, --version</code>","text":"<p>Print version information and author credits.</p>"},{"location":"cslcli/cmdline/#output","title":"Output","text":""},{"location":"cslcli/cmdline/#success","title":"Success","text":"<p>When parsing succeeds: - Parsed script is written to stdout - Exit code 0 - With <code>-v</code>: instruction count to stderr</p>"},{"location":"cslcli/cmdline/#error","title":"Error","text":"<p>When parsing fails: - Rich error message to stderr showing:   - File name and location   - Line and column number   - Error description   - Code snippet with error marker - Exit code 1</p>"},{"location":"cslcli/cmdline/#error-format","title":"Error Format","text":"<p>Errors are reported in a readable format:</p> <pre><code>Error parsing script.csl at line 10, column 5:\n   |\n10 | WAIT invalid_arg\n   |      ^^^^^^^^^^^ unexpected token\n   |\nExpected: number or time duration\n</code></pre>"},{"location":"cslcli/cmdline/#exit-status","title":"Exit Status","text":"<ul> <li><code>0</code> - Successfully parsed and validated</li> <li><code>1</code> - Parse error or file not found</li> </ul>"},{"location":"cslcli/cmdline/#examples","title":"Examples","text":"<p>See Examples for detailed usage.</p>"},{"location":"cslcli/cmdline/#see-also","title":"See Also","text":"<ul> <li>CSL Language Reference - CSL syntax</li> <li>Examples - Common usage patterns</li> </ul>"},{"location":"cslcli/examples/","title":"CSLCLI Examples","text":""},{"location":"cslcli/examples/#basic-usage","title":"Basic Usage","text":""},{"location":"cslcli/examples/#validate-a-script","title":"Validate a Script","text":"<p>Check if a CSL script is valid:</p> <pre><code>cslcli myscript.csl\n</code></pre> <p>If valid, outputs the parsed script. If invalid, shows errors.</p>"},{"location":"cslcli/examples/#verbose-mode","title":"Verbose Mode","text":"<p>Get detailed parsing information:</p> <pre><code>cslcli -v automation.csl\n</code></pre> <p>Output: <pre><code>Successfully parsed 42 instructions\n[parsed script content follows]\n</code></pre></p>"},{"location":"cslcli/examples/#error-handling","title":"Error Handling","text":""},{"location":"cslcli/examples/#syntax-errors","title":"Syntax Errors","text":"<p>Example with syntax error:</p> <pre><code>$ cslcli broken_script.csl\nError parsing broken_script.csl at line 5, column 10:\n   |\n5  | WAIT 10x\n   |         ^ invalid character in number\n   |\nExpected: valid number\n</code></pre>"},{"location":"cslcli/examples/#missing-files","title":"Missing Files","text":"<pre><code>$ cslcli nonexistent.csl\nError reading file 'nonexistent.csl': No such file or directory\n</code></pre>"},{"location":"cslcli/examples/#scripting-integration","title":"Scripting Integration","text":""},{"location":"cslcli/examples/#build-validation","title":"Build Validation","text":"<p>Include CSL validation in build scripts:</p> <pre><code>#!/bin/bash\n# Validate all CSL test scripts\n\nfor script in tests/*.csl; do\n  echo \"Validating $script...\"\n  if cslcli \"$script\" &gt; /dev/null; then\n    echo \"  \u2713 OK\"\n  else\n    echo \"  \u2717 FAILED\"\n    exit 1\n  fi\ndone\n\necho \"All scripts valid!\"\n</code></pre>"},{"location":"cslcli/examples/#cicd-pipeline","title":"CI/CD Pipeline","text":"<pre><code># Example GitHub Actions workflow\n- name: Validate CSL Scripts\n  run: |\n    for script in scripts/**/*.csl; do\n      cslcli \"$script\"\n    done\n</code></pre>"},{"location":"cslcli/examples/#development-workflow","title":"Development Workflow","text":""},{"location":"cslcli/examples/#test-script-development","title":"Test Script Development","text":"<p>Iterative development with immediate feedback:</p> <pre><code># Edit script\nvi game_test.csl\n\n# Validate\ncslcli game_test.csl\n\n# If errors, fix and repeat\n# Once valid, use in automation\n</code></pre>"},{"location":"cslcli/examples/#converting-scripts","title":"Converting Scripts","text":"<p>Normalize/format CSL scripts:</p> <pre><code># Parse and reformat\ncslcli messy_script.csl &gt; formatted_script.csl\n</code></pre>"},{"location":"cslcli/examples/#common-csl-patterns","title":"Common CSL Patterns","text":""},{"location":"cslcli/examples/#example-valid-script","title":"Example Valid Script","text":"<pre><code># Load program\nLOAD \"game.dsk\"\n\n# Wait for loading\nWAIT 3000\n\n# Send keypress\nKEYPRESS SPACE\n\n# Wait and verify\nWAIT 1000\nCHECK SCREEN \"GAME OVER\"\n</code></pre>"},{"location":"cslcli/examples/#validation-commands","title":"Validation Commands","text":"<pre><code># Quick syntax check\ncslcli test.csl &gt; /dev/null &amp;&amp; echo \"Valid\" || echo \"Invalid\"\n\n# Count instructions\ncslcli -v test.csl 2&gt;&amp;1 | grep \"parsed\" | awk '{print $3}'\n</code></pre>"},{"location":"cslcli/examples/#tips","title":"Tips","text":"<ul> <li>Use <code>-v</code> during development for detailed feedback</li> <li>Keep scripts in version control</li> <li>Validate scripts in CI/CD pipelines</li> <li>Use meaningful comments in CSLfiles</li> <li>Test scripts incrementally</li> <li>Pipe output to files for formatted versions</li> </ul>"},{"location":"cslcli/language/","title":"CSL Language Reference","text":"<p>CSL (CPC Script Language) is a domain-specific language for scripting CPC emulator interactions and automating testing scenarios.</p>"},{"location":"cslcli/language/#overview","title":"Overview","text":"<p>CSL scripts consist of commands that control emulator behavior, simulate user input, and verify program state. Scripts are executed sequentially.</p>"},{"location":"cslcli/language/#basic-syntax","title":"Basic Syntax","text":""},{"location":"cslcli/language/#comments","title":"Comments","text":"<pre><code># This is a comment\n// This is also a comment (C-style)\n</code></pre>"},{"location":"cslcli/language/#commands","title":"Commands","text":"<p>Commands are typically one per line: <pre><code>COMMAND arg1 arg2\n</code></pre></p>"},{"location":"cslcli/language/#common-commands","title":"Common Commands","text":""},{"location":"cslcli/language/#load","title":"LOAD","text":"<p>Load a program or disk image.</p> <pre><code>LOAD \"program.dsk\"\nLOAD \"game.sna\"\n</code></pre>"},{"location":"cslcli/language/#wait","title":"WAIT","text":"<p>Pause execution for a specified duration.</p> <pre><code>WAIT 1000        # Wait 1000 milliseconds\nWAIT 2.5s        # Wait 2.5 seconds\nWAIT 100ms       # Wait 100 milliseconds\n</code></pre>"},{"location":"cslcli/language/#keypress","title":"KEYPRESS","text":"<p>Simulate a key press.</p> <pre><code>KEYPRESS SPACE\nKEYPRESS RETURN\nKEYPRESS A\nKEYPRESS f1\n</code></pre>"},{"location":"cslcli/language/#type","title":"TYPE","text":"<p>Type a string of characters.</p> <pre><code>TYPE \"HELLO WORLD\"\nTYPE \"RUN\\\"GAME\"\n</code></pre>"},{"location":"cslcli/language/#check","title":"CHECK","text":"<p>Verify screen content or memory state.</p> <pre><code>CHECK SCREEN \"GAME OVER\"\nCHECK MEMORY 0x4000 0xFF\n</code></pre>"},{"location":"cslcli/language/#screenshot","title":"SCREENSHOT","text":"<p>Capture a screenshot.</p> <pre><code>SCREENSHOT \"frame001.png\"\n</code></pre>"},{"location":"cslcli/language/#reset","title":"RESET","text":"<p>Reset the emulated CPC.</p> <pre><code>RESET\nRESET SOFT      # Soft reset (Ctrl+Shift+Esc)\n</code></pre>"},{"location":"cslcli/language/#data-types","title":"Data Types","text":""},{"location":"cslcli/language/#strings","title":"Strings","text":"<p>Enclosed in double quotes, with escape sequences: <pre><code>\"simple string\"\n\"string with \\\"quotes\\\"\"\n\"path\\\\to\\\\file\"    # Backslash escape\n</code></pre></p>"},{"location":"cslcli/language/#numbers","title":"Numbers","text":"<p>Decimal, hexadecimal, or binary: <pre><code>100         # Decimal\n0xFF        # Hexadecimal  \n0b1010      # Binary\n</code></pre></p>"},{"location":"cslcli/language/#time-durations","title":"Time Durations","text":"<p>With unit suffixes: <pre><code>1000ms      # Milliseconds\n2.5s        # Seconds\n100         # Default: milliseconds\n</code></pre></p>"},{"location":"cslcli/language/#key-names","title":"Key Names","text":"<p>Special key identifiers: <pre><code>SPACE, RETURN, ESC, TAB\nF1, F2, ..., F9\nUP, DOWN, LEFT, RIGHT\nCTRL, SHIFT, ALT\nA, B, C, ..., Z\n0, 1, ..., 9\n</code></pre></p>"},{"location":"cslcli/language/#control-flow","title":"Control Flow","text":""},{"location":"cslcli/language/#labels","title":"Labels","text":"<pre><code>:label_name\n</code></pre>"},{"location":"cslcli/language/#goto","title":"GOTO","text":"<pre><code>GOTO label_name\n</code></pre>"},{"location":"cslcli/language/#ifendif","title":"IF/ENDIF","text":"<pre><code>IF SCREEN CONTAINS \"READY\"\n  KEYPRESS SPACE\nENDIF\n</code></pre>"},{"location":"cslcli/language/#advanced-features","title":"Advanced Features","text":""},{"location":"cslcli/language/#variables","title":"Variables","text":"<pre><code>SET counter 0\nSET name \"test\"\n</code></pre>"},{"location":"cslcli/language/#loops","title":"Loops","text":"<pre><code>REPEAT 10\n  KEYPRESS SPACE\n  WAIT 100\nEND\n</code></pre>"},{"location":"cslcli/language/#assertions","title":"Assertions","text":"<pre><code>ASSERT SCREEN \"SCORE: 1000\"\nASSERT MEMORY 0x4000 &lt; 0x80\n</code></pre>"},{"location":"cslcli/language/#best-practices","title":"Best Practices","text":"<ol> <li>Use Comments: Document script purpose and complex sections</li> <li>Meaningful Waits: Allow sufficient time for program reactions</li> <li>Incremental Testing: Test scripts step-by-step</li> <li>Error Handling: Use CHECK/ASSERT for validation</li> <li>Modular Scripts: Break complex automation into smaller files</li> </ol>"},{"location":"cslcli/language/#example-script","title":"Example Script","text":"<p>Complete example for automated game testing:</p> <pre><code># Load game disk\nLOAD \"mygame.dsk\"\n\n# Wait for BASIC prompt\nWAIT 1s\n\n# Type and run loader\nTYPE \"RUN\\\"LOADER\"\nKEYPRESS RETURN\n\n# Wait for title screen\nWAIT 5s\nCHECK SCREEN \"PRESS SPACE\"\n\n# Start game\nKEYPRESS SPACE\nWAIT 2s\n\n# Verify game started\nCHECK SCREEN \"LEVEL 1\"\n\n# Take screenshot\nSCREENSHOT \"level1_start.png\"\n\n# Play sequence\nKEYPRESS RIGHT\nWAIT 500ms\nKEYPRESS SPACE\nWAIT 500ms\n\n# Verify score increase\nCHECK SCREEN \"SCORE:\"\n\n# Success\n</code></pre>"},{"location":"cslcli/language/#error-messages","title":"Error Messages","text":"<p>Common CSL parsing errors:</p> <ul> <li>Unexpected token: Invalid syntax</li> <li>Unknown command: Unrecognized command name</li> <li>Invalid argument: Wrong argument type or format</li> <li>Unterminated string: Missing closing quote</li> <li>Undefined label: GOTO to non-existent label</li> </ul>"},{"location":"cslcli/language/#see-also","title":"See Also","text":"<ul> <li>CSLCLI Command Reference</li> <li>Examples</li> <li>CPC demo-scene scripting guides</li> </ul>"},{"location":"dskmanager/","title":"DSKManager - DSK Disc Image Manager","text":""},{"location":"dskmanager/#overview","title":"Overview","text":"<p>DSKManager is a command-line tool for managing Amstrad CPC DSK disc images. It provides low-level operations for creating, formatting, and manipulating DSK files.</p>"},{"location":"dskmanager/#features","title":"Features","text":"<ul> <li>Format DSK Images: Create new formatted disc images</li> <li>File Management: Add and extract files from DSK images</li> <li>Catalog Operations: List disc contents</li> <li>Track/Sector Access: Low-level disc manipulation</li> <li>Multiple Formats: Support for various DSK formats and geometries</li> </ul>"},{"location":"dskmanager/#installation","title":"Installation","text":"<p>DSKManager is part of the cpclib-disc crate.</p>"},{"location":"dskmanager/#download-pre-built-binary","title":"Download Pre-built Binary","text":"<p>Coming soon - check the releases page.</p>"},{"location":"dskmanager/#build-from-source","title":"Build from Source","text":"<pre><code>cargo install --path cpclib-disc --features dskmanager\n</code></pre>"},{"location":"dskmanager/#usage-in-bndbuild","title":"Usage in BndBuild","text":"<p>Within bndbuild, use the <code>dsk</code> or <code>disc</code> command:</p> <pre><code>- tgt: mydisk.dsk\n  cmd: dsk format mydisk.dsk\n</code></pre> <p>For complete bndbuild integration, see BndBuild Commands.</p>"},{"location":"dskmanager/#quick-start","title":"Quick Start","text":"<pre><code># Format a new DSK\ndskmanager format output.dsk\n\n# Add files to DSK\ndskmanager add output.dsk file1.bin file2.bin\n\n# List DSK contents\ndskmanager catalog output.dsk\n</code></pre>"},{"location":"dskmanager/#related-tools","title":"Related Tools","text":"<ul> <li>Catalog - View and create CatArt disc catalogs</li> <li>Hideur - Manage AMSDOS headers for proper CPC file compatibility</li> <li>BndBuild - Build system that integrates dskmanager</li> </ul>"},{"location":"dskmanager/#documentation","title":"Documentation","text":"<ul> <li>Command Line Reference</li> <li>Examples</li> </ul>"},{"location":"dskmanager/#source-code","title":"Source Code","text":"<p>Part of cpclib-disc in the rust.cpclib repository.</p>"},{"location":"dskmanager/cmdline/","title":"DSKManager Command Line Reference","text":""},{"location":"dskmanager/cmdline/#synopsis","title":"Synopsis","text":"<pre><code>dskmanager [OPTIONS] &lt;COMMAND&gt; [ARGS...]\n</code></pre>"},{"location":"dskmanager/cmdline/#commands","title":"Commands","text":""},{"location":"dskmanager/cmdline/#format","title":"format","text":"<p>Format a new DSK disc image.</p> <pre><code>dskmanager format &lt;output.dsk&gt; [OPTIONS]\n</code></pre>"},{"location":"dskmanager/cmdline/#add","title":"add","text":"<p>Add files to a DSK image.</p> <pre><code>dskmanager add &lt;disk.dsk&gt; &lt;file1&gt; [file2...]\n</code></pre>"},{"location":"dskmanager/cmdline/#catalog-cat","title":"catalog / cat","text":"<p>List the contents of a DSK image.</p> <pre><code>dskmanager catalog &lt;disk.dsk&gt;\n</code></pre>"},{"location":"dskmanager/cmdline/#extract","title":"extract","text":"<p>Extract files from a DSK image.</p> <pre><code>dskmanager extract &lt;disk.dsk&gt; [output_dir]\n</code></pre>"},{"location":"dskmanager/cmdline/#options","title":"Options","text":""},{"location":"dskmanager/cmdline/#global-options","title":"Global Options","text":"<ul> <li><code>-h, --help</code> - Show help information</li> <li><code>-V, --version</code> - Show version information</li> <li><code>-v, --verbose</code> - Enable verbose output</li> </ul>"},{"location":"dskmanager/cmdline/#examples","title":"Examples","text":"<p>See the Examples page for detailed usage scenarios.</p>"},{"location":"dskmanager/cmdline/#notes","title":"Notes","text":"<ul> <li>DSKManager works with standard Amstrad CPC DSK formats</li> <li>Supports both Data and System formats</li> <li>Preserves AMSDOS headers when present</li> <li>Can work with extended DSK formats</li> </ul>"},{"location":"dskmanager/cmdline/#related-commands","title":"Related Commands","text":"<ul> <li><code>catalog</code> - For viewing and creating CatArt catalogs</li> <li><code>hideur</code> - For managing AMSDOS headers</li> </ul> <p>Note: Complete command-line documentation will be generated from dskmanager --help output.</p>"},{"location":"dskmanager/examples/","title":"DSKManager Examples","text":""},{"location":"dskmanager/examples/#basic-operations","title":"Basic Operations","text":""},{"location":"dskmanager/examples/#create-a-new-formatted-dsk","title":"Create a New Formatted DSK","text":"<pre><code># Format a standard Data format DSK\ndskmanager format mydisk.dsk\n\n# Format a System format DSK\ndskmanager format system.dsk --system\n</code></pre>"},{"location":"dskmanager/examples/#add-files-to-dsk","title":"Add Files to DSK","text":"<pre><code># Add single file\ndskmanager add mydisk.dsk program.bin\n\n# Add multiple files\ndskmanager add mydisk.dsk file1.bin file2.bas screen.scr\n\n# Add files with specific AMSDOS parameters\ndskmanager add mydisk.dsk code.bin --load 0x4000 --exec 0x4000\n</code></pre>"},{"location":"dskmanager/examples/#view-dsk-contents","title":"View DSK Contents","text":"<pre><code># List all files\ndskmanager catalog mydisk.dsk\n\n# Show detailed information\ndskmanager catalog mydisk.dsk --verbose\n</code></pre>"},{"location":"dskmanager/examples/#extract-files","title":"Extract Files","text":"<pre><code># Extract all files to current directory\ndskmanager extract mydisk.dsk\n\n# Extract to specific directory\ndskmanager extract mydisk.dsk output/\n\n# Extract specific files\ndskmanager extract mydisk.dsk --files \"PROGRAM.BIN,SCREEN.SCR\"\n</code></pre>"},{"location":"dskmanager/examples/#workflow-examples","title":"Workflow Examples","text":""},{"location":"dskmanager/examples/#building-a-demo-distribution-disk","title":"Building a Demo Distribution Disk","text":"<pre><code># Create new disk\ndskmanager format demo.dsk\n\n# Add loader\ndskmanager add demo.dsk loader.bin --load 0x0170 --exec 0x0170\n\n# Add demo parts\ndskmanager add demo.dsk part1.scr part2.bin music.bin\n\n# Add catalog screen\ncatalog demo.dsk build --output catart.scr\ndskmanager add demo.dsk catart.scr\n</code></pre>"},{"location":"dskmanager/examples/#using-with-bndbuild","title":"Using with BndBuild","text":"<p>In your <code>bndbuild.yml</code>:</p> <pre><code>- tgt: release.dsk\n  dep: \n    - demo.bin\n    - loader.bin\n    - screen.scr\n  cmd:\n    - dsk format release.dsk\n    - dsk add release.dsk loader.bin --load 0x170 --exec 0x170\n    - dsk add release.dsk demo.bin screen.scr\n    - catalog release.dsk build --output catalog.scr\n    - dsk add release.dsk catalog.scr\n</code></pre>"},{"location":"dskmanager/examples/#advanced-usage","title":"Advanced Usage","text":""},{"location":"dskmanager/examples/#custom-disc-formats","title":"Custom Disc Formats","text":"<pre><code># Create disc with custom track/sector layout\ndskmanager format custom.dsk --tracks 40 --sectors 9 --sector-size 512\n</code></pre>"},{"location":"dskmanager/examples/#working-with-amsdos-headers","title":"Working with AMSDOS Headers","text":"<pre><code># Add binary with full AMSDOS header control\ndskmanager add game.dsk code.bin \\\n  --user 0 \\\n  --load 0x4000 \\\n  --exec 0x4000 \\\n  --type 2 \\\n  --name \"GAME\"\n</code></pre>"},{"location":"dskmanager/examples/#integration-examples","title":"Integration Examples","text":""},{"location":"dskmanager/examples/#with-hideur","title":"With Hideur","text":"<pre><code># Add AMSDOS header first, then add to disk\nhideur add myfile.bin --load 0x8000 --exec 0x8000\ndskmanager add mydsk.dsk myfile.bin\n</code></pre>"},{"location":"dskmanager/examples/#with-catalog","title":"With Catalog","text":"<pre><code># Create disk, add files, generate catalog\ndskmanager format demo.dsk\ndskmanager add demo.dsk *.bin *.scr\ncatalog demo.dsk build --style classic --output catalog.scr\ndskmanager add demo.dsk catalog.scr\n</code></pre>"},{"location":"dskmanager/examples/#tips","title":"Tips","text":"<ul> <li>Always format a new DSK before adding files</li> <li>Use <code>--verbose</code> to see detailed operation progress</li> <li>AMSDOS headers are preserved during add/extract operations</li> <li>For CPC transfers, pair with <code>xfertool</code> to send DSKs to real hardware</li> </ul>"},{"location":"dskmanager/examples/#related-documentation","title":"Related Documentation","text":"<ul> <li>Command Line Reference - Complete command syntax</li> <li>Catalog Examples - Creating catalog screens</li> <li>Hideur Examples - Managing AMSDOS headers</li> <li>BndBuild Examples - Build system integration</li> </ul>"},{"location":"fade/","title":"Fade Generator","text":"<p>Command Reference</p> <p>For current usage: <code>fade --help</code> Complete documentation: CLI Help Reference</p> <p>Generate smooth color fade tables for Amstrad CPC demos.</p>"},{"location":"fade/#integration-with-bndbuild","title":"Integration with BndBuild","text":"<p>Fade is available as a standalone <code>fade</code> binary but can also be used within BndBuild build scripts using the <code>fade</code> command. See BndBuild Commands for integration details.</p>"},{"location":"fade/#quick-start","title":"Quick Start","text":"<p>For detailed options, use <code>fade rgb --help</code>.</p>"},{"location":"fade/cmdline/","title":"Fade Command Line Reference","text":"<p>Up-to-Date Syntax</p> <p>Run <code>fade --help</code> for current command syntax and options. Complete help: CLI Help Reference</p>"},{"location":"fade/cmdline/#usage","title":"Usage","text":"<p>Run <code>fade --help</code> to see available subcommands.</p>"},{"location":"fade/cmdline/#subcommands","title":"Subcommands","text":"<ul> <li><code>rgb</code> - Generate RGB fade tables</li> </ul> <p>Use <code>fade rgb --help</code> for detailed options.</p>"},{"location":"fade/examples/","title":"Fade Generator Examples","text":"<p>Command Syntax</p> <p>For current command syntax, use: <pre><code>fade --help\nfade rgb --help\n</code></pre> See also: Complete CLI Help Reference</p>"},{"location":"fade/examples/#basic-usage","title":"Basic Usage","text":"<p>Generate fade tables for smooth color transitions in your CPC demos.</p> <p>For specific options and output formats, consult <code>fade rgb --help</code>.</p>"},{"location":"fade/examples_new/","title":"Fade Generator Examples","text":"<p>Command Syntax</p> <p>For current command syntax, use: <pre><code>fade --help\nfade rgb --help\n</code></pre> See also: Complete CLI Help Reference</p>"},{"location":"fade/examples_new/#basic-usage","title":"Basic Usage","text":"<p>Generate fade tables for smooth color transitions in your CPC demos.</p> <p>For specific options and output formats, consult <code>fade rgb --help</code>.</p>"},{"location":"hideur/","title":"Hideur - AMSDOS Header Manager","text":"<p>Command Reference</p> <p>For current usage: <code>hideur --help</code> Complete documentation: CLI Help Reference</p> <p>Hideur is a tool to manipulate AMSDOS headers on files. It can display header information or add/modify AMSDOS headers on binary files.</p>"},{"location":"hideur/#overview","title":"Overview","text":"<p>AMSDOS headers contain metadata about files on Amstrad CPC disks, including: - File type (Basic, Protected Basic, or Binary) - Load address (for binary files) - Execution address (for binary files) - User number (0-15) - Length and checksum</p>"},{"location":"hideur/#quick-start","title":"Quick Start","text":"<p>Display header information: <pre><code>hideur input.bin --info\n</code></pre></p> <p>Add a binary header: <pre><code>hideur input.bin -o output.bin -t binary -l 0x4000 -x 0x4000\n</code></pre></p>"},{"location":"hideur/#common-use-cases","title":"Common Use Cases","text":""},{"location":"hideur/#display-file-information","title":"Display File Information","text":"<pre><code>hideur myfile.bin --info\n</code></pre>"},{"location":"hideur/#create-binary-file-with-header","title":"Create Binary File with Header","text":"<pre><code>hideur code.bin -o code_with_header.bin -t binary -l 0x8000 -x 0x8000\n</code></pre>"},{"location":"hideur/#create-basic-file-with-header","title":"Create Basic File with Header","text":"<pre><code>hideur program.bas -o program.bas -t basic\n</code></pre>"},{"location":"hideur/#see-also","title":"See Also","text":""},{"location":"hideur/#integration-with-bndbuild","title":"Integration with BndBuild","text":"<p>Hideur is available as a standalone <code>hideur</code> binary but can also be used within BndBuild build scripts using the <code>hideur</code> command. See BndBuild Commands for integration details.</p>"},{"location":"hideur/#see-also_1","title":"See Also","text":"<ul> <li>Command Line Reference</li> <li>Examples</li> <li>Catalog Tool - For working with DSK files</li> </ul>"},{"location":"hideur/cmdline/","title":"Hideur Command Line Reference","text":"<p>Latest Help</p> <p>For the most current options: <code>hideur --help</code></p>"},{"location":"hideur/cmdline/#usage","title":"Usage","text":"<pre><code>hideur [OPTIONS] &lt;INPUT&gt;\n</code></pre>"},{"location":"hideur/cmdline/#arguments","title":"Arguments","text":""},{"location":"hideur/cmdline/#input","title":"<code>&lt;INPUT&gt;</code>","text":"<p>Input file to manipulate (required).</p>"},{"location":"hideur/cmdline/#options","title":"Options","text":""},{"location":"hideur/cmdline/#-info","title":"<code>--info</code>","text":"<p>Display information about the file's AMSDOS header without modifying it.</p> <p>When this option is used: - No output file is created - The tool displays header metadata (type, addresses, user, etc.) - Other modification options are ignored</p>"},{"location":"hideur/cmdline/#-o-output-output","title":"<code>-o, --output &lt;OUTPUT&gt;</code>","text":"<p>Output file to generate.</p> <p>Required unless <code>--info</code> is specified.</p>"},{"location":"hideur/cmdline/#-u-user-user","title":"<code>-u, --user &lt;USER&gt;</code>","text":"<p>User number where to place the file (0-15).</p> <p>Default: 0</p>"},{"location":"hideur/cmdline/#-t-type-type","title":"<code>-t, --type &lt;TYPE&gt;</code>","text":"<p>File type to set in the header.</p> <p>Required unless <code>--info</code> is specified.</p> <p>Accepted values (case-insensitive): - <code>0</code>, <code>Basic</code>, <code>BASIC</code>, <code>basic</code> - Basic program - <code>1</code>, <code>Protected</code>, <code>PROTECTED</code>, <code>protected</code> - Protected Basic - <code>2</code>, <code>Binary</code>, <code>BINARY</code>, <code>binary</code> - Binary file</p>"},{"location":"hideur/cmdline/#-l-load-load","title":"<code>-l, --load &lt;LOAD&gt;</code>","text":"<p>Loading address for the file (hexadecimal format supported: <code>#4000</code> or <code>0x4000</code>).</p> <p>Required when type is Binary.</p>"},{"location":"hideur/cmdline/#-x-execution-exec","title":"<code>-x, --execution &lt;EXEC&gt;</code>","text":"<p>Execution address (hexadecimal format supported: <code>#4000</code> or <code>0x4000</code>).</p> <p>Defaults to the load address if not specified.</p>"},{"location":"hideur/cmdline/#examples","title":"Examples","text":"<p>See Examples for practical usage scenarios.</p>"},{"location":"hideur/examples/","title":"Hideur Examples","text":""},{"location":"hideur/examples/#display-file-information","title":"Display File Information","text":"<p>Check AMSDOS header of an existing file:</p> <pre><code>hideur myfile.bin --info\n</code></pre>"},{"location":"hideur/examples/#binary-files","title":"Binary Files","text":""},{"location":"hideur/examples/#add-binary-header-with-load-and-execution-address","title":"Add Binary Header with Load and Execution Address","text":"<pre><code>hideur code.bin -o code.bin -t binary -l 0x4000 -x 0x4000\n</code></pre>"},{"location":"hideur/examples/#binary-with-different-execution-address","title":"Binary with Different Execution Address","text":"<pre><code>hideur loader.bin -o loader.bin -t binary -l 0x170 -x 0x4000\n</code></pre>"},{"location":"hideur/examples/#binary-for-specific-user","title":"Binary for Specific User","text":"<pre><code>hideur game.bin -o game.bin -t binary -l 0x8000 -x 0x8000 -u 1\n</code></pre>"},{"location":"hideur/examples/#basic-programs","title":"Basic Programs","text":""},{"location":"hideur/examples/#add-basic-header","title":"Add Basic Header","text":"<pre><code>hideur program.bas -o program.bas -t basic\n</code></pre>"},{"location":"hideur/examples/#protected-basic","title":"Protected Basic","text":"<pre><code>hideur protected.bas -o protected.bas -t protected\n</code></pre>"},{"location":"hideur/examples/#workflow-examples","title":"Workflow Examples","text":""},{"location":"hideur/examples/#preparing-files-for-dsk","title":"Preparing Files for DSK","text":"<p>Add proper AMSDOS headers before adding files to a disk:</p> <pre><code># Add header to binary\nhideur demo.bin -o demo.bin -t binary -l 0x4000 -x 0x4000\n\n# Then add to DSK using catalog tool\ncatalog mydisk.dsk modify --add demo.bin\n</code></pre>"},{"location":"hideur/examples/#converting-raw-binary-to-executable","title":"Converting Raw Binary to Executable","text":"<pre><code># Raw binary from assembler\nhideur output.bin -o DEMO.BIN -t binary -l 0x8000 -x 0x8000\n</code></pre>"},{"location":"hideur/examples/#integration-with-build-systems","title":"Integration with Build Systems","text":"<p>In a bndbuild.yml file:</p> <pre><code>- tgt: game.bin\n  dep: game_raw.bin\n  cmd: hideur $&lt; -o $@ -t binary -l 0x4000 -x 0x4000\n</code></pre>"},{"location":"hideur/examples/#common-patterns","title":"Common Patterns","text":""},{"location":"hideur/examples/#screen-file","title":"Screen File","text":"<pre><code>hideur screen.scr -o SCREEN.SCR -t binary -l 0xC000\n</code></pre>"},{"location":"hideur/examples/#demo-loader","title":"Demo Loader","text":"<pre><code>hideur loader.bin -o LOADER.BIN -t binary -l 0x170 -x 0x4000\n</code></pre>"},{"location":"hideur/examples/#music-data","title":"Music Data","text":"<pre><code>hideur music.bin -o MUSIC.BIN -t binary -l 0x8000\n</code></pre>"},{"location":"img2cpc/","title":"img2cpc - Image to CPC Converter","text":"<p><code>img2cpc</code> converts modern image formats (PNG, BMP, JPEG, etc.) to various Amstrad CPC formats including snapshots, DSK files, screen files, sprites, and tiles. This is the primary tool for importing graphics into CPC projects.</p>"},{"location":"img2cpc/#features","title":"Features","text":"<ul> <li>Multiple output formats: Generate snapshots, DSK files, executable binaries, sprites, tiles</li> <li>Full screen support: Standard screens, overscan, fullscreen (2 banks)</li> <li>All video modes: Mode 0 (160x200, 16 colors), Mode 1 (320x200, 4 colors), Mode 2 (640x200, 2 colors)</li> <li>Palette control: Manual pen assignment, OCP palette files, automatic ink allocation</li> <li>Image manipulation: Cropping, column/line selection, odd pixel skipping</li> <li>Direct M4 upload: Send converted images directly to M4 board</li> </ul>"},{"location":"img2cpc/#quick-start","title":"Quick Start","text":"<pre><code># Convert PNG to CPC snapshot\nimg2cpc title.png sna TITLE.SNA\n\n# Convert PNG to executable in DSK\nimg2cpc logo.png dsk DEMO.DSK\n\n# Send directly to M4\nimg2cpc screen.png m4\n</code></pre>"},{"location":"img2cpc/#output-formats","title":"Output Formats","text":"<ul> <li>sna - Snapshot file (ready to run in emulator)</li> <li>dsk - DSK file with executable  </li> <li>scr - OCP screen file (16KB memory dump)</li> <li>exec - Executable binary  </li> <li>sprite - Sprite data file</li> <li>tile - Tile map file</li> <li>m4 - Direct upload to M4 board</li> </ul>"},{"location":"img2cpc/#see-also","title":"See Also","text":""},{"location":"img2cpc/#integration-with-bndbuild","title":"Integration with BndBuild","text":"<p>img2cpc is available as a standalone <code>img2cpc</code> binary but can also be used within BndBuild build scripts using the <code>img2cpc</code> or <code>imgconverter</code> command aliases. See BndBuild Commands for integration details.</p>"},{"location":"img2cpc/#see-also_1","title":"See Also","text":"<ul> <li>Command Line Reference - Detailed documentation of all options</li> <li>Examples - Usage examples and workflows</li> </ul>"},{"location":"img2cpc/cmdline/","title":"img2cpc Command Line Reference","text":""},{"location":"img2cpc/cmdline/#synopsis","title":"Synopsis","text":"<pre><code>img2cpc [OPTIONS] &lt;SOURCE&gt; [COMMAND]\n</code></pre>"},{"location":"img2cpc/cmdline/#description","title":"Description","text":"<p>Converts modern image formats (PNG, BMP, JPEG, etc.) to various Amstrad CPC output formats.</p>"},{"location":"img2cpc/cmdline/#arguments","title":"Arguments","text":"<ul> <li><code>&lt;SOURCE&gt;</code> - Filename to convert</li> </ul>"},{"location":"img2cpc/cmdline/#commands","title":"Commands","text":""},{"location":"img2cpc/cmdline/#sna","title":"<code>sna</code>","text":"<p>Generate a snapshot with the converted image.</p> <pre><code>img2cpc image.png sna IMAGE.SNA\n</code></pre>"},{"location":"img2cpc/cmdline/#dsk","title":"<code>dsk</code>","text":"<p>Generate a DSK with an executable of the converted image.</p> <pre><code>img2cpc image.png dsk IMAGE.DSK\n</code></pre>"},{"location":"img2cpc/cmdline/#scr","title":"<code>scr</code>","text":"<p>Generate an OCP SCR file.</p> <pre><code>img2cpc image.png scr --output IMAGE.SCR\n</code></pre>"},{"location":"img2cpc/cmdline/#exec","title":"<code>exec</code>","text":"<p>Generate a binary file to manually copy in a DSK or M4 folder.</p> <pre><code>img2cpc image.png exec IMAGE.BIN\n</code></pre>"},{"location":"img2cpc/cmdline/#sprite","title":"<code>sprite</code>","text":"<p>Generate a sprite file to be included inside an application.</p> <p>See <code>img2cpc sprite --help</code> for detailed usage.</p>"},{"location":"img2cpc/cmdline/#tile","title":"<code>tile</code>","text":"<p>Generate a list of sprites (tile map).</p> <p>See <code>img2cpc tile --help</code> for detailed usage.</p>"},{"location":"img2cpc/cmdline/#m4","title":"<code>m4</code>","text":"<p>Directly send the code on the M4 through a snapshot.</p> <pre><code>img2cpc image.png m4\n</code></pre>"},{"location":"img2cpc/cmdline/#options","title":"Options","text":""},{"location":"img2cpc/cmdline/#video-mode","title":"Video Mode","text":"<ul> <li><code>-m, --mode &lt;MODE&gt;</code> - Screen mode of the image to convert [default: 0]</li> <li><code>0</code> - 160\u00d7200, 16 colors</li> <li><code>1</code> - 320\u00d7200, 4 colors</li> <li><code>2</code> - 640\u00d7200, 2 colors</li> </ul>"},{"location":"img2cpc/cmdline/#screen-configuration","title":"Screen Configuration","text":"<ul> <li><code>--fullscreen</code> - Specify a full screen displayed using 2 non consecutive banks</li> <li><code>--overscan</code> - Specify an overscan screen (CRTC meaning)</li> <li><code>--standard</code> - Specify a standard screen manipulation</li> </ul>"},{"location":"img2cpc/cmdline/#image-processing","title":"Image Processing","text":"<ul> <li><code>--crop</code> - Crop the picture if it is too large according to the destination</li> <li><code>-s, --skipoddpixels</code> - Skip odd pixels when reading the image (useful when the picture is mode 0 with duplicated pixels)</li> <li><code>--columnstart &lt;PIXEL_COLUMN_START&gt;</code> - Number of pixel columns to skip on the left</li> <li><code>--columnskept &lt;PIXEL_COLUMNS_KEPT&gt;</code> - Number of pixel columns to keep</li> <li><code>--linestart &lt;PIXEL_LINE_START&gt;</code> - Number of pixel lines to skip</li> <li><code>--lineskept &lt;PIXEL_LINES_KEPT&gt;</code> - Number of pixel lines to keep</li> </ul>"},{"location":"img2cpc/cmdline/#palette-control","title":"Palette Control","text":"<ul> <li><code>--pal &lt;OCP_PAL&gt;</code> - OCP PAL file. The first palette among 12 is used</li> <li><code>--pens &lt;PENS&gt;</code> - Separated list of ink number. Use ',' as a separator</li> <li><code>--pen0</code> to <code>--pen15 &lt;PEN&gt;</code> - Ink number for each pen (0-15)</li> <li><code>--pen16 &lt;PEN16&gt;</code> - Ink number of the pen 16 (border)</li> <li><code>--unlock-pens</code> - When some pens are manually provided, allows to also use the other ones by automatically assigning them missing inks. By default, this is forbidden</li> <li><code>--missing-pen &lt;MISSING_PEN&gt;</code> - Pen to use when the byte is too small</li> </ul>"},{"location":"img2cpc/cmdline/#other-options","title":"Other Options","text":"<ul> <li><code>-h, --help</code> - Print help</li> <li><code>-V, --version</code> - Print version</li> </ul>"},{"location":"img2cpc/cmdline/#cpc-video-modes","title":"CPC Video Modes","text":"Mode Resolution Colors Bytes/Line Typical Use 0 160\u00d7200 16 80 Colorful graphics 1 320\u00d7200 4 80 Standard graphics 2 640\u00d7200 2 80 High resolution text"},{"location":"img2cpc/cmdline/#ocp-palette-format","title":"OCP Palette Format","text":"<p>OCP palette files (.PAL) contain up to 12 palettes of 16 colors each. The tools use the first palette by default.</p>"},{"location":"img2cpc/cmdline/#exit-status","title":"Exit Status","text":"<ul> <li><code>0</code> - Success</li> <li>Non-zero - Error occurred</li> </ul>"},{"location":"img2cpc/cmdline/#see-also","title":"See Also","text":"<ul> <li>Examples - Usage examples and workflows</li> <li>Index - Tool overview</li> </ul>"},{"location":"img2cpc/examples/","title":"img2cpc Examples","text":"<p>Command Reference</p> <p>For current syntax: <code>img2cpc --help</code> Complete reference: CLI Help Reference</p>"},{"location":"img2cpc/examples/#basic-usage","title":"Basic Usage","text":"<p>Convert PNG/JPEG images to Amstrad CPC formats.</p>"},{"location":"img2cpc/examples/#create-snapshot","title":"Create Snapshot","text":"<pre><code>img2cpc image.png sna output.sna\n</code></pre>"},{"location":"img2cpc/examples/#create-disk-image","title":"Create Disk Image","text":"<pre><code>img2cpc image.png dsk output.dsk\n</code></pre>"},{"location":"img2cpc/examples/#create-screen-file","title":"Create Screen File","text":"<pre><code>img2cpc image.png scr --output output.scr\n</code></pre> <p>For all options and subcommands: <code>img2cpc --help</code></p>"},{"location":"img2cpc/examples_new/","title":"img2cpc Examples","text":"<p>Command Reference</p> <p>For current syntax: <code>img2cpc --help</code> Complete reference: CLI Help Reference</p>"},{"location":"img2cpc/examples_new/#basic-usage","title":"Basic Usage","text":"<p>Convert PNG/JPEG images to Amstrad CPC formats.</p>"},{"location":"img2cpc/examples_new/#create-snapshot","title":"Create Snapshot","text":"<pre><code>img2cpc image.png sna output.sna\n</code></pre>"},{"location":"img2cpc/examples_new/#create-disk-image","title":"Create Disk Image","text":"<pre><code>img2cpc image.png dsk output.dsk\n</code></pre>"},{"location":"img2cpc/examples_new/#create-screen-file","title":"Create Screen File","text":"<pre><code>img2cpc image.png scr --output output.scr\n</code></pre> <p>For all options and subcommands: <code>img2cpc --help</code></p>"},{"location":"imgconverter/","title":"Image Converter Tools","text":"<p>Documentation</p> <p>For current command syntax: Use <code>--help</code> with each tool Complete reference: CLI Help Reference</p> <p>Convert images between PC and Amstrad CPC formats.</p>"},{"location":"imgconverter/#tools","title":"Tools","text":"<ul> <li>img2cpc - Convert PC images to CPC formats</li> <li>cpc2img - Convert CPC data to PC images  </li> <li>fade - Generate color fade tables</li> </ul> <p>Use <code>&lt;tool&gt; --help</code> for detailed usage.</p>"},{"location":"imgconverter/cmdline/","title":"Image Converter Command Line","text":"<p>Current Syntax</p> <p>Use <code>--help</code> for up-to-date command syntax:</p> <p><code>bash     img2cpc --help     cpc2img --help     fade --help</code>     Complete reference: CLI Help Reference</p> <p>These tools convert images between PC formats and Amstrad CPC formats.</p> <p>For detailed usage, consult the built-in help.</p>"},{"location":"imgconverter/examples/","title":"Image Converter Examples","text":"<p>For Current Syntax</p> <p>These tools have complex CLIs. For accurate usage: <pre><code>img2cpc --help\ncpc2img --help\nfade --help\n</code></pre> Complete reference: CLI Help Reference</p>"},{"location":"imgconverter/examples/#img2cpc-convert-images-to-cpc-format","title":"img2cpc - Convert Images to CPC Format","text":"<pre><code>img2cpc image.png sna output.sna\nimg2cpc image.png dsk output.dsk\nimg2cpc image.png scr --output output.scr\n</code></pre>"},{"location":"imgconverter/examples/#cpc2img-convert-cpc-files-to-images","title":"cpc2img - Convert CPC Files to Images","text":"<pre><code>cpc2img screen.bin output.png screen\ncpc2img sprite.spr output.png sprite --width 16\ncpc2img colors.pal output.png palette\n</code></pre>"},{"location":"imgconverter/examples/#fade-generate-color-fades","title":"fade - Generate Color Fades","text":"<p>Refer to <code>fade --help</code> for usage.</p> <p>For all options, use <code>--help</code> with each command.</p>"},{"location":"locomotive/","title":"Locomotive - Amstrad CPC BASIC Tool","text":"<p>Locomotive is a command-line tool for converting between ASCII text and Amstrad CPC Locomotive BASIC binary formats. It enables you to write BASIC programs in a text editor and convert them to the tokenized format used by the CPC.</p>"},{"location":"locomotive/#features","title":"Features","text":"<ul> <li>Encode: Convert ASCII text to tokenized BASIC binary format</li> <li>Decode: Convert tokenized BASIC binary to readable ASCII text  </li> <li>Amsdos Headers: Optionally add Amsdos headers to generated files</li> <li>Stdout Support: Decode can print to stdout for easy piping</li> <li>Token Validation: Parser validates both tokens and command argument coherency</li> </ul>"},{"location":"locomotive/#quick-start","title":"Quick Start","text":"<pre><code># Convert BASIC text to binary format\nlocomotive encode -i program.txt -o program.bas\n\n# Convert binary BASIC to text\nlocomotive decode -i program.bas -o program.txt\n\n# Decode to stdout\nlocomotive decode -i program.bas\n\n# Encode with Amsdos header\nlocomotive encode -i program.txt -o program.bas --header\n</code></pre>"},{"location":"locomotive/#use-cases","title":"Use Cases","text":"<ul> <li>Development: Write BASIC programs in a text editor with syntax highlighting</li> <li>Version Control: Store BASIC programs as readable text in Git</li> <li>Code Analysis: Convert binary BASIC files to inspect their content</li> <li>Cross-Platform Development: Edit on modern systems, convert for CPC</li> </ul>"},{"location":"locomotive/#integration","title":"Integration","text":"<p>For DSK operations, use the dsk tool: <pre><code># Add BASIC file to DSK\nlocomotive encode -i game.txt -o game.bas\ndsk add disk.dsk game.bas\n\n# Extract BASIC from DSK and decode\ndsk extract disk.dsk GAME.BAS -o game.bas\nlocomotive decode -i game.bas -o game.txt\n</code></pre></p>"},{"location":"locomotive/#see-also","title":"See Also","text":"<ul> <li>Command Line Reference - Detailed documentation of commands and options</li> <li>Examples - Usage examples and workflows</li> <li>BASIC Format - Information about CPC BASIC file format</li> <li>DSK Tool - For DSK disk image manipulation (use <code>dsk</code> command in bndbuild or CLI)</li> </ul> <p>Author: Krusty/Benediction 2019</p>"},{"location":"locomotive/cmdline/","title":"Locomotive Command Line","text":"<p>Command Reference</p> <p>For current syntax: <code>locomotive --help</code></p> <p>BASIC file manipulation tool.</p> <p>Use <code>--help</code> for complete usage.</p>"},{"location":"locomotive/examples/","title":"Locomotive Examples","text":""},{"location":"locomotive/examples/#basic-conversion","title":"Basic Conversion","text":""},{"location":"locomotive/examples/#text-to-binary","title":"Text to Binary","text":"<p>Convert a text BASIC program to binary format for use on CPC:</p> <pre><code>locomotive encode -i mygame.txt -o mygame.bas\n</code></pre> <p>With Amsdos header: <pre><code>locomotive encode -i loader.txt -o LOADER.BAS --header\n</code></pre></p>"},{"location":"locomotive/examples/#binary-to-text","title":"Binary to Text","text":"<p>Convert a binary BASIC file to readable text:</p> <pre><code>locomotive decode -i MYGAME.BAS -o mygame.txt\n</code></pre> <p>View content directly (stdout): <pre><code>locomotive decode -i GAME.BAS\n</code></pre></p>"},{"location":"locomotive/examples/#development-workflow","title":"Development Workflow","text":""},{"location":"locomotive/examples/#version-control-friendly","title":"Version Control Friendly","text":"<p>Keep BASIC programs in text format for Git:</p> <pre><code># 1. Write BASIC in text editor: game.txt\ncat &gt; game.txt &lt;&lt; 'EOF'\n10 MODE 1\n20 PRINT \"HELLO WORLD\"\n30 GOTO 20\nEOF\n\n# 2. Convert to binary\nlocomotive encode -i game.txt -o game.bas\n\n# 3. Commit text version to Git\ngit add game.txt\ngit commit -m \"Initial game code\"\n</code></pre>"},{"location":"locomotive/examples/#roundtrip-test","title":"Roundtrip Test","text":"<p>Verify encode/decode preserves your code:</p> <pre><code># Original text\nlocomotive encode -i original.txt -o test.bas\n\n# Decode back\nlocomotive decode -i test.bas -o decoded.txt\n\n# Compare\ndiff original.txt decoded.txt\n</code></pre>"},{"location":"locomotive/examples/#batch-convert-to-text","title":"Batch Convert to Text","text":"<p>Convert all binary BASIC files to text for archiving:</p> <pre><code>#!/bin/bash\n# Convert all .bas files to .txt\n\nfor basfile in *.bas; do\n  txtfile=\"${basfile%.bas}.txt\"\n  echo \"Converting $basfile -&gt; $txtfile\"\n  locomotive decode -i \"$basfile\" -o \"$txtfile\"\ndone\n</code></pre>"},{"location":"locomotive/examples/#batch-convert-from-text","title":"Batch Convert from Text","text":"<p>Build binary BASIC files from text sources:</p> <pre><code>#!/bin/bash\n# Convert all .txt files to .bas\n\nfor txtfile in src/*.txt; do\n  basfile=\"build/$(basename \"${txtfile%.txt}.bas\")\"\n  echo \"Building $txtfile -&gt; $basfile\"\n  locomotive encode -i \"$txtfile\" -o \"$basfile\" --header\ndone\n</code></pre>"},{"location":"locomotive/examples/#integration-with-other-tools","title":"Integration with Other Tools","text":""},{"location":"locomotive/examples/#working-with-dsk-images","title":"Working with DSK Images","text":"<p>Combine with dsk tool for disk operations:</p> <pre><code># Extract BASIC from DSK, convert to text\ndsk extract games.dsk LOADER.BAS -o loader.bas\nlocomotive decode -i loader.bas -o loader.txt\n\n# Edit loader.txt in your editor...\n\n# Convert back and add to DSK\nlocomotive encode -i loader.txt -o LOADER.BAS --header\ndsk add games.dsk LOADER.BAS\n</code></pre>"},{"location":"locomotive/examples/#build-complete-game-disk","title":"Build Complete Game Disk","text":"<p>Script to build a game disk from text sources:</p> <pre><code>#!/bin/bash\n# build-disk.sh - Build game disk from source\n\n# Create empty disk\ndsk format game.dsk\n\n# Convert and add all BASIC files\nfor src in src/*.txt; do\n  base=$(basename \"$src\" .txt)\n  basfile=\"build/${base}.BAS\"\n\n  echo \"Processing $src...\"\n  locomotive encode -i \"$src\" -o \"$basfile\" --header\n  dsk add game.dsk \"$basfile\"\ndone\n\n# List disk contents\necho -e \"\\nDisk contents:\"\ndsk list game.dsk\n\necho \"Game disk built successfully!\"\n</code></pre>"},{"location":"locomotive/examples/#automated-build-system","title":"Automated Build System","text":"<p>Makefile for BASIC development:</p> <pre><code># Makefile for CPC BASIC project\n\nSRC_DIR = src\nBUILD_DIR = build\nDISK = game.dsk\n\nTXT_FILES = $(wildcard $(SRC_DIR)/*.txt)\nBAS_FILES = $(patsubst $(SRC_DIR)/%.txt,$(BUILD_DIR)/%.BAS,$(TXT_FILES))\n\n.PHONY: all disk clean\n\nall: $(BAS_FILES)\n\n$(BUILD_DIR)/%.BAS: $(SRC_DIR)/%.txt\n    @mkdir -p $(BUILD_DIR)\n    locomotive encode -i $&lt; -o $@ --header\n\ndisk: $(BAS_FILES)\n    dsk format $(DISK)\n    @for f in $(BAS_FILES); do \\\n        dsk add $(DISK) $$f; \\\n    done\n    @echo \"Disk built successfully\"\n    dsk list $(DISK)\n\nclean:\n    rm -rf $(BUILD_DIR) $(DISK)\n</code></pre> <p>Usage: <pre><code>make           # Convert all text to binary\nmake disk      # Build complete disk image\nmake clean     # Clean build artifacts\n</code></pre></p>"},{"location":"locomotive/examples/#code-analysis","title":"Code Analysis","text":""},{"location":"locomotive/examples/#quick-inspection","title":"Quick Inspection","text":"<p>View a BASIC file without creating output file:</p> <pre><code>locomotive decode -i MYSTERY.BAS\n</code></pre>"},{"location":"locomotive/examples/#search-for-patterns","title":"Search for Patterns","text":"<p>Find all programs that use specific commands:</p> <pre><code># Find all files that use GOSUB\nfor f in *.bas; do\n  if locomotive decode -i \"$f\" | grep -q \"GOSUB\"; then\n    echo \"$f uses GOSUB\"\n  fi\ndone\n</code></pre>"},{"location":"locomotive/examples/#extract-line-ranges","title":"Extract Line Ranges","text":"<p>Get specific lines from a BASIC program:</p> <pre><code># Show lines 100-200\nlocomotive decode -i game.bas | awk '/^100 /,/^200 /'\n</code></pre>"},{"location":"locomotive/examples/#count-lines","title":"Count Lines","text":"<pre><code>locomotive decode -i game.bas | wc -l\n</code></pre>"},{"location":"locomotive/examples/#documentation-export","title":"Documentation Export","text":""},{"location":"locomotive/examples/#generate-readme-from-basic","title":"Generate README from BASIC","text":"<p>Create a README showing your BASIC code:</p> <pre><code>cat &gt; README.md &lt;&lt; 'EOF'\n# My CPC Game\n\n## BASIC Source Code\n\n\\`\\`\\`basic\nEOF\n\nlocomotive decode -i game.bas &gt;&gt; README.md\n\ncat &gt;&gt; README.md &lt;&lt; 'EOF'\n\\`\\`\\`\nEOF\n</code></pre>"},{"location":"locomotive/examples/#side-by-side-comparison","title":"Side-by-Side Comparison","text":"<p>Compare two versions:</p> <pre><code># Create text versions\nlocomotive decode -i version1.bas -o v1.txt\nlocomotive decode -i version2.bas -o v2.txt\n\n# Compare\ndiff -y v1.txt v2.txt\n</code></pre>"},{"location":"locomotive/examples/#testing","title":"Testing","text":""},{"location":"locomotive/examples/#validate-conversion","title":"Validate Conversion","text":"<p>Test that your BASIC file converts correctly:</p> <pre><code>#!/bin/bash\n# test-basic.sh\n\nTESTFILE=\"test.bas\"\n\nif locomotive decode -i \"$TESTFILE\" -o /dev/null 2&gt;&amp;1; then\n  echo \"\u2713 Valid BASIC file\"\n  exit 0\nelse\n  echo \"\u2717 Invalid BASIC file\"\n  exit 1\nfi\n</code></pre>"},{"location":"locomotive/examples/#cicd-integration","title":"CI/CD Integration","text":"<p>GitHub Actions workflow:</p> <pre><code>name: Build BASIC\n\non: [push]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v2\n\n      - name: Install cpclib\n        run: |\n          wget https://github.com/cpcsdk/rust.cpclib/releases/latest/download/locomotive\n          chmod +x locomotive\n\n      - name: Build BASIC files\n        run: |\n          for txt in src/*.txt; do\n            bas=\"build/$(basename ${txt%.txt}.bas)\"\n            ./locomotive encode -i \"$txt\" -o \"$bas\"\n          done\n\n      - name: Upload artifacts\n        uses: actions/upload-artifact@v2\n        with:\n          name: basic-files\n          path: build/*.bas\n</code></pre>"},{"location":"locomotive/examples/#tips","title":"Tips","text":"<ul> <li>Use text format for source control - Binary BASIC files don't diff well in Git</li> <li>Add Amsdos headers - Use <code>--header</code> when creating files for disk images</li> <li>Validate before encoding - Check your line numbers are in order</li> <li>Use stdout for pipelines - Decode without <code>-o</code> for easy piping</li> <li>Batch operations - Process multiple files with shell scripts</li> <li>Keep backups - Always keep the text version of your code</li> </ul>"},{"location":"locomotive/examples/#common-patterns","title":"Common Patterns","text":""},{"location":"locomotive/examples/#edit-compile-test-loop","title":"Edit-Compile-Test Loop","text":"<pre><code># 1. Edit text file\nvim loader.txt\n\n# 2. Convert to binary\nlocomotive encode -i loader.txt -o LOADER.BAS --header\n\n# 3. Add to test disk\ndsk add test.dsk LOADER.BAS\n\n# 4. Test in emulator\n# ... test on CPC\n\n# Repeat...\n</code></pre>"},{"location":"locomotive/examples/#archive-binary-basic-files","title":"Archive Binary BASIC Files","text":"<pre><code># Convert entire collection to text for archiving\nmkdir -p archive\nfor bas in collection/*.bas; do\n  txt=\"archive/$(basename ${bas%.bas}.txt)\"\n  locomotive decode -i \"$bas\" -o \"$txt\"\ndone\n</code></pre>"},{"location":"locomotive/examples/#merge-multiple-programs","title":"Merge Multiple Programs","text":"<pre><code># Combine multiple BASIC programs (be careful with line numbers!)\n{\n  locomotive decode -i part1.bas\n  locomotive decode -i part2.bas\n  locomotive decode -i part3.bas\n} &gt; combined.txt\n\n# Encode merged version\nlocomotive encode -i combined.txt -o combined.bas\n</code></pre>"},{"location":"locomotive/format/","title":"CPC BASIC File Format","text":"<p>This document describes the Locomotive BASIC file format used by Amstrad CPC computers.</p>"},{"location":"locomotive/format/#overview","title":"Overview","text":"<p>Locomotive BASIC files can be stored in two formats:</p> <ol> <li>Text Format: Human-readable ASCII text</li> <li>Binary Format: Tokenized binary format (native CPC format)</li> </ol>"},{"location":"locomotive/format/#binary-format-structure","title":"Binary Format Structure","text":""},{"location":"locomotive/format/#file-header","title":"File Header","text":"<p>The binary format begins with a file header:</p> <ul> <li>Bytes 0-1: Length of the BASIC program (little-endian 16-bit)</li> <li>Byte 2: Start of BASIC content</li> </ul>"},{"location":"locomotive/format/#line-structure","title":"Line Structure","text":"<p>Each BASIC line in binary format has the following structure:</p> <ul> <li>Bytes 0-1: Line length (little-endian 16-bit)</li> <li>Bytes 2-3: Line number (little-endian 16-bit)</li> <li>Bytes 4+: Tokenized BASIC commands</li> <li>Final byte: 0x00 (line terminator)</li> </ul>"},{"location":"locomotive/format/#tokens","title":"Tokens","text":"<p>BASIC keywords are stored as single-byte tokens:</p> <ul> <li><code>0x80</code> - AFTER</li> <li><code>0x81</code> - AUTO</li> <li><code>0x82</code> - BORDER</li> <li>...</li> <li><code>0xBF</code> - PRINT</li> <li><code>0xC0</code> - RAD</li> <li>...</li> </ul> <p>Special tokens: - <code>0x00</code> - End of line - <code>0x01-0x1F</code> - Control characters - <code>0x20-0x7F</code> - ASCII characters - <code>0x80-0xFF</code> - BASIC keywords</p>"},{"location":"locomotive/format/#strings","title":"Strings","text":"<p>String literals in the binary format: - Start with opening quote: <code>0x22</code> (\") - Contain raw character bytes - End with closing quote: <code>0x22</code> (\")</p>"},{"location":"locomotive/format/#numbers","title":"Numbers","text":"<p>Numbers can be stored as: - Text representation (digits as ASCII) - Binary representation (special encoding for performance)</p>"},{"location":"locomotive/format/#text-format","title":"Text Format","text":"<p>The text format is straightforward: - One line per BASIC line - Line number followed by space - BASIC commands in uppercase - Strings in double quotes</p> <p>Example: <pre><code>10 MODE 1\n20 PRINT \"HELLO\"\n30 FOR I=1 TO 10\n40 PRINT I\n50 NEXT I\n</code></pre></p>"},{"location":"locomotive/format/#conversion-notes","title":"Conversion Notes","text":"<p>When converting between formats, locomotive handles:</p> <ul> <li>Tokenization: Keywords (PRINT, IF, etc.) \u2192 single byte tokens</li> <li>Detokenization: Tokens \u2192 readable keywords</li> <li>String handling: Proper quote management</li> <li>Line endings: CPC-style line terminators</li> <li>Whitespace: Preserved where significant</li> </ul>"},{"location":"locomotive/format/#special-cases","title":"Special Cases","text":""},{"location":"locomotive/format/#rem-comments","title":"REM (Comments)","text":"<p>REM statements are not fully tokenized - the comment text remains as-is after the REM token.</p>"},{"location":"locomotive/format/#data-statements","title":"DATA Statements","text":"<p>DATA contents are stored as text, not tokenized.</p>"},{"location":"locomotive/format/#line-numbers","title":"Line Numbers","text":"<ul> <li>Valid range: 1-65529</li> <li>Typically in increments of 10</li> <li>Must be in ascending order</li> </ul>"},{"location":"locomotive/format/#file-size-limits","title":"File Size Limits","text":"<ul> <li>Maximum program size: ~48 KB (depends on available CPC memory)</li> <li>Line length: Limited by CPC BASIC constraints</li> <li>Number of lines: Limited by memory</li> </ul>"},{"location":"locomotive/format/#compatibility","title":"Compatibility","text":"<p>The locomotive tool handles tokenized BASIC files compatible with: - Amstrad CPC 464, 664, 6128 - Locomotive BASIC 1.0 and 1.1 - Standard tokenized BASIC format (with or without Amsdos headers)</p> <p>Note: For DSK disk operations, use the dsk tool in combination with locomotive.</p>"},{"location":"locomotive/format/#see-also","title":"See Also","text":"<ul> <li>Command Line Reference</li> <li>Examples</li> <li>DSK Tool - For DSK operations (use <code>dsk</code> command in bndbuild or CLI)</li> <li>Amstrad CPC User Manual for BASIC syntax</li> </ul>"},{"location":"orgams/","title":"Orgams Native Assembler Integration","text":"<p>Orgams is a native Z80 assembler that runs directly on the Amstrad CPC. Unlike cross-assemblers that run on modern PCs, Orgams executes within a CPC emulator, providing an authentic development experience with the original Orgams IDE.</p>"},{"location":"orgams/#overview","title":"Overview","text":"<p>Orgams integration allows you to:</p> <ul> <li>Edit Z80 assembly source code using the native Orgams editor</li> <li>Assemble source files within an emulated CPC environment</li> <li>Test assembled programs immediately by jumping to them</li> <li>Save assembled binaries back to your host filesystem</li> </ul> <p>The integration uses emulator control to automate Orgams workflows, making native CPC development practical in modern build pipelines.</p>"},{"location":"orgams/#quick-start","title":"Quick Start","text":""},{"location":"orgams/#assemble-a-source-file","title":"Assemble a Source File","text":"<pre><code># Assemble an Orgams source file from a disc image\ncpclib-runner orgams --from demo.dsk --src MAIN.O --dst MAIN\n</code></pre>"},{"location":"orgams/#edit-with-orgams-editor","title":"Edit with Orgams Editor","text":"<pre><code># Launch the Orgams editor to modify source\ncpclib-runner orgams --from demo.dsk --src MAIN.O --edit\n</code></pre>"},{"location":"orgams/#assemble-and-execute","title":"Assemble and Execute","text":"<pre><code># Assemble and immediately jump to the program\ncpclib-runner orgams --from demo.dsk --src MAIN.O --jump\n</code></pre>"},{"location":"orgams/#key-features","title":"Key Features","text":""},{"location":"orgams/#integration-with-bndbuild","title":"Integration with BndBuild","text":"<p>Orgams is available as a standalone <code>orgams</code> binary but can also be used within BndBuild build scripts using the <code>orgams</code> command. See BndBuild Commands for integration details. Note: Orgams is a native assembler that runs on an emulated CPC.</p>"},{"location":"orgams/#key-features_1","title":"Key Features","text":""},{"location":"orgams/#native-cpc-assembly","title":"Native CPC Assembly","text":"<ul> <li>Runs actual Orgams assembler on emulated CPC</li> <li>Full compatibility with original Orgams source files</li> <li>Authentic development environment</li> </ul>"},{"location":"orgams/#albireo-support","title":"Albireo Support","text":"<ul> <li>Works with Albireo virtual filesystem</li> <li>Use folders instead of disc images</li> <li>Faster development iteration</li> </ul>"},{"location":"orgams/#format-conversion","title":"Format Conversion","text":"<ul> <li>Convert BASM/ASCII source to Orgams format</li> <li>Use <code>--basm2orgams</code> flag for conversion</li> <li>Bridge modern and native workflows</li> </ul>"},{"location":"orgams/#build-integration","title":"Build Integration","text":"<ul> <li>Seamless integration with bndbuild</li> <li>Automated assembly in build pipelines</li> <li>Combine with other cpclib tools</li> </ul>"},{"location":"orgams/#system-requirements","title":"System Requirements","text":"<ul> <li>Emulator: ACE-DL (default), WinAPE, or CPCEC</li> <li>ROM: Orgams ROM must be available in emulator</li> <li>Platform: Linux, macOS (Windows support limited)</li> </ul> <p>Windows Compatibility</p> <p>Orgams integration currently does not work properly under Windows due to emulator control limitations.</p>"},{"location":"orgams/#how-it-works","title":"How It Works","text":"<ol> <li>Source Loading: Your source file is made available via disc image or Albireo folder</li> <li>Emulator Launch: CPC emulator starts with Orgams ROM enabled</li> <li>Automation: Keyboard commands are sent to load and assemble</li> <li>Result Capture: Assembled binary is retrieved from emulator</li> <li>Cleanup: Emulator closes (unless <code>--keepemulator</code> specified)</li> </ol>"},{"location":"orgams/#use-cases","title":"Use Cases","text":""},{"location":"orgams/#legacy-project-maintenance","title":"Legacy Project Maintenance","text":"<p>Work with existing Orgams projects without converting to modern assemblers.</p>"},{"location":"orgams/#authentic-development","title":"Authentic Development","text":"<p>Experience CPC development as it was done in the 1980s/90s.</p>"},{"location":"orgams/#build-pipeline-integration","title":"Build Pipeline Integration","text":"<p>Incorporate native assembly into automated build workflows.</p>"},{"location":"orgams/#format-experimentation","title":"Format Experimentation","text":"<p>Compare Orgams output with modern cross-assemblers.</p>"},{"location":"orgams/#limitations","title":"Limitations","text":"<ul> <li>Speed: Emulation overhead makes assembly slower than cross-assemblers</li> <li>Platform: Limited Windows support</li> <li>Dependencies: Requires configured emulator with Orgams ROM</li> <li>Debugging: Limited debugging integration compared to modern tools</li> </ul>"},{"location":"orgams/#see-also","title":"See Also","text":"<ul> <li>Command Line Reference - Detailed options and usage</li> <li>Examples - Practical workflows and integration patterns</li> <li>Borgams Documentation - Convert Orgams binary format to ASCII</li> <li>CPC Runner Documentation - Emulator control details</li> </ul>"},{"location":"orgams/cmdline/","title":"Orgams Command Line Reference","text":"<p>The Orgams integration is accessed through the <code>orgams</code> subcommand of <code>cpclib-runner</code>.</p>"},{"location":"orgams/cmdline/#basic-syntax","title":"Basic Syntax","text":"<pre><code>cpclib-runner orgams --from &lt;DATA_SOURCE&gt; --src &lt;SRC&gt; [OPTIONS]\n</code></pre>"},{"location":"orgams/cmdline/#required-arguments","title":"Required Arguments","text":""},{"location":"orgams/cmdline/#-from-data_source-alias-f","title":"<code>--from &lt;DATA_SOURCE&gt;</code> (alias: <code>-f</code>)","text":"<p>Specifies where the source files are located.</p> <p>Options:</p> <ul> <li>Disc Image: Path to a DSK file (e.g., <code>project.dsk</code>)</li> <li>Albireo Folder: Path to a directory (e.g., <code>./cpcfolder</code>)</li> </ul> <p>Examples:</p> <pre><code># Use a disc image\ncpclib-runner orgams --from demo.dsk --src MAIN.O\n\n# Use Albireo folder (faster)\ncpclib-runner orgams --from ./cpcfiles --src MAIN.O\n</code></pre>"},{"location":"orgams/cmdline/#-src-src-alias-s","title":"<code>--src &lt;SRC&gt;</code> (alias: <code>-s</code>)","text":"<p>The filename to assemble or edit within the data source.</p> <p>Format:</p> <ul> <li>Must be a valid Amstrad CPC filename (8.3 format)</li> <li>Case-insensitive</li> <li>Extension typically <code>.O</code> for Orgams source files</li> </ul> <p>Examples:</p> <pre><code>--src MAIN.O      # Orgams source file\n--src SPRITE.O    # Another source file\n--src CODE        # File without extension\n</code></pre>"},{"location":"orgams/cmdline/#output-options","title":"Output Options","text":""},{"location":"orgams/cmdline/#-dst-dst-alias-d","title":"<code>--dst &lt;DST&gt;</code> (alias: <code>-d</code>)","text":"<p>Specify the output filename for the assembled binary.</p> <p>Default: Uses the filename provided by Orgams during assembly</p> <p>Examples:</p> <pre><code># Save as PROGRAM\ncpclib-runner orgams --from demo.dsk --src MAIN.O --dst PROGRAM\n\n# Default behavior (Orgams chooses name)\ncpclib-runner orgams --from demo.dsk --src MAIN.O\n</code></pre>"},{"location":"orgams/cmdline/#operation-modes","title":"Operation Modes","text":""},{"location":"orgams/cmdline/#-edit-alias-e","title":"<code>--edit</code> (alias: <code>-e</code>)","text":"<p>Launch the Orgams editor to modify the source file.</p> <p>Behavior:</p> <ul> <li>Opens Orgams editor in emulator</li> <li>Loads specified source file</li> <li>Emulator remains open for interactive editing</li> </ul> <p>Example:</p> <pre><code># Edit MAIN.O in Orgams editor\ncpclib-runner orgams --from demo.dsk --src MAIN.O --edit\n</code></pre>"},{"location":"orgams/cmdline/#-jump-alias-j","title":"<code>--jump</code> (alias: <code>-j</code>)","text":"<p>Assemble the source and immediately execute it (without saving).</p> <p>Behavior:</p> <ul> <li>Assembles the source file</li> <li>Jumps to the program entry point</li> <li>Does not save the binary to disc</li> <li>Useful for testing</li> </ul> <p>Example:</p> <pre><code># Assemble and run immediately\ncpclib-runner orgams --from demo.dsk --src MAIN.O --jump\n</code></pre>"},{"location":"orgams/cmdline/#default-mode-assemble-and-save","title":"Default Mode (Assemble and Save)","text":"<p>When neither <code>--edit</code> nor <code>--jump</code> is specified, Orgams assembles the source and saves the output.</p> <p>Example:</p> <pre><code># Assemble and save\ncpclib-runner orgams --from demo.dsk --src MAIN.O --dst OUTPUT\n</code></pre>"},{"location":"orgams/cmdline/#format-conversion","title":"Format Conversion","text":""},{"location":"orgams/cmdline/#-basm2orgams-alias-b","title":"<code>--basm2orgams</code> (alias: <code>-b</code>)","text":"<p>Convert a BASM/ASCII format Z80 source file to Orgams binary format.</p> <p>Use Case:</p> <ul> <li>Import modern assembly source into Orgams</li> <li>Convert cross-assembler code for native assembly</li> <li>Bridge BASM and Orgams workflows</li> </ul> <p>Example:</p> <pre><code># Convert BASM source to Orgams format\ncpclib-runner orgams --from demo.dsk --src TEXT.ASM --basm2orgams\n\n# Then assemble with Orgams\ncpclib-runner orgams --from demo.dsk --src TEXT.ASM\n</code></pre> <p>Conversion Limitations</p> <p>Not all BASM directives may be compatible with Orgams. Manual adjustment of the converted source may be required.</p>"},{"location":"orgams/cmdline/#emulator-options","title":"Emulator Options","text":"<p>Orgams integration uses the same emulator options as the main <code>cpclib-runner</code>. See CPC Runner documentation for details.</p>"},{"location":"orgams/cmdline/#common-emulator-flags","title":"Common Emulator Flags","text":"<pre><code># Specify emulator\n--emulator ace      # ACE-DL (default)\n--emulator winape   # WinAPE\n\n# Keep emulator open after operation\n--keepemulator      # Don't close emulator\n\n# Memory configuration\n--memory 64         # CPC 464 (64KB)\n--memory 128        # CPC 6128 (128KB)\n</code></pre>"},{"location":"orgams/cmdline/#complete-examples","title":"Complete Examples","text":""},{"location":"orgams/cmdline/#basic-assembly","title":"Basic Assembly","text":"<pre><code>cpclib-runner orgams \\\n  --from project.dsk \\\n  --src MAIN.O \\\n  --dst MAIN\n</code></pre>"},{"location":"orgams/cmdline/#edit-and-assemble-workflow","title":"Edit and Assemble Workflow","text":"<pre><code># Step 1: Edit source\ncpclib-runner orgams --from project.dsk --src MAIN.O --edit\n\n# Step 2: Assemble (after editing)\ncpclib-runner orgams --from project.dsk --src MAIN.O --dst MAIN\n</code></pre>"},{"location":"orgams/cmdline/#quick-test-cycle","title":"Quick Test Cycle","text":"<pre><code># Assemble and test immediately\ncpclib-runner orgams \\\n  --from project.dsk \\\n  --src DEMO.O \\\n  --jump \\\n  --keepemulator\n</code></pre>"},{"location":"orgams/cmdline/#albireo-workflow","title":"Albireo Workflow","text":"<pre><code># Using folder instead of disc (faster)\ncpclib-runner orgams \\\n  --from ./cpcfolder \\\n  --src CODE.O \\\n  --dst OUTPUT\n</code></pre>"},{"location":"orgams/cmdline/#import-external-source","title":"Import External Source","text":"<pre><code># Convert BASM source and assemble\ncpclib-runner orgams \\\n  --from project.dsk \\\n  --src IMPORTED.ASM \\\n  --basm2orgams\n\ncpclib-runner orgams \\\n  --from project.dsk \\\n  --src IMPORTED.ASM \\\n  --dst IMPORTED\n</code></pre>"},{"location":"orgams/cmdline/#exit-codes","title":"Exit Codes","text":"<ul> <li>0: Successful operation</li> <li>Non-zero: Error occurred (check stderr for details)</li> </ul>"},{"location":"orgams/cmdline/#environment-variables","title":"Environment Variables","text":""},{"location":"orgams/cmdline/#cpcip","title":"<code>CPCIP</code>","text":"<p>If set, used as default M4 address for <code>xfer</code> operations (not directly used by Orgams).</p>"},{"location":"orgams/cmdline/#see-also","title":"See Also","text":"<ul> <li>Orgams Overview - Introduction and features</li> <li>Examples - Practical usage scenarios</li> <li>CPC Runner Command Line - Additional emulator options</li> </ul>"},{"location":"orgams/examples/","title":"Orgams Usage Examples","text":"<p>Practical examples demonstrating Orgams integration in various workflows.</p>"},{"location":"orgams/examples/#basic-workflows","title":"Basic Workflows","text":""},{"location":"orgams/examples/#simple-assembly","title":"Simple Assembly","text":"<p>Assemble a single Orgams source file to a binary.</p> <pre><code># Assemble MAIN.O to MAIN\ncpclib-runner orgams --from demo.dsk --src MAIN.O --dst MAIN\n</code></pre> <p>Use Case: Convert Orgams source to executable binary.</p>"},{"location":"orgams/examples/#edit-and-assemble","title":"Edit and Assemble","text":"<p>Interactive workflow: edit source, then assemble.</p> <pre><code># Step 1: Open Orgams editor\ncpclib-runner orgams --from demo.dsk --src SPRITE.O --edit\n\n# Step 2: After editing, assemble\ncpclib-runner orgams --from demo.dsk --src SPRITE.O --dst SPRITE\n</code></pre> <p>Use Case: Modify existing Orgams source files.</p>"},{"location":"orgams/examples/#quick-test-cycle","title":"Quick Test Cycle","text":"<p>Assemble and immediately run without saving.</p> <pre><code># Assemble and jump to program\ncpclib-runner orgams --from demo.dsk --src TEST.O --jump --keepemulator\n</code></pre> <p>Use Case: Rapid prototyping and testing.</p>"},{"location":"orgams/examples/#albireo-workflows","title":"Albireo Workflows","text":""},{"location":"orgams/examples/#using-folders-instead-of-discs","title":"Using Folders Instead of Discs","text":"<p>Albireo provides faster access by using host folders.</p> <pre><code># Create folder structure\nmkdir cpcfolder\n# Place MAIN.O in cpcfolder/\n\n# Assemble using folder\ncpclib-runner orgams --from cpcfolder --src MAIN.O --dst MAIN\n</code></pre> <p>Advantages:</p> <ul> <li>Faster than disc image access</li> <li>Easier file management</li> <li>No disc image corruption risk</li> </ul>"},{"location":"orgams/examples/#multi-file-project","title":"Multi-File Project","text":"<p>Assemble multiple source files from an Albireo folder.</p> <pre><code># Project structure:\n# cpcfolder/\n#   \u251c\u2500\u2500 MAIN.O\n#   \u251c\u2500\u2500 SPRITES.O\n#   \u2514\u2500\u2500 MUSIC.O\n\n# Assemble each component\ncpclib-runner orgams --from cpcfolder --src MAIN.O --dst MAIN\ncpclib-runner orgams --from cpcfolder --src SPRITES.O --dst SPRITES\ncpclib-runner orgams --from cpcfolder --src MUSIC.O --dst MUSIC\n</code></pre> <p>Use Case: Modular project development.</p>"},{"location":"orgams/examples/#build-system-integration-bndbuild","title":"Build System Integration (bndbuild)","text":""},{"location":"orgams/examples/#basic-orgams-build-rule","title":"Basic Orgams Build Rule","text":"<p>Integrate Orgams assembly into a bndbuild project.</p> <p>build.bnd:</p> <pre><code>- tgt: program\n  dep: source/MAIN.O\n  cmd: orgams --from source.dsk --src MAIN.O --dst program\n</code></pre> <p>Usage:</p> <pre><code>bndbuild program\n</code></pre>"},{"location":"orgams/examples/#complete-orgams-build-file","title":"Complete Orgams Build File","text":"<p>Full example with editor integration and testing.</p> <p>build.bnd:</p> <pre><code>#!/usr/bin/env -S bndbuild -f\n\n{% set FROM=\"cpcfolder\" %}\n{% set SRC=\"DEMO.O\" %}\n{% set DST=\"DEMO\" %}\n\n# Build target: assemble source\n- tgt: build\n  dep: {{FROM}}/{{DST}}\n\n# Assemble source to binary\n- tgt: {{FROM}}/{{DST}}\n  dep: {{FROM}}/{{SRC}}\n  cmd: orgams --from {{FROM}} --src {{SRC}} --dst {{DST}}\n\n# Edit source in Orgams\n- tgt: edit\n  phony: true\n  cmd: orgams --from {{FROM}} --src {{SRC}} --edit\n\n# Test: assemble and run\n- tgt: test\n  phony: true\n  cmd: orgams --from {{FROM}} --src {{SRC}} --jump --keepemulator\n\n# Clean build outputs\n- tgt: clean\n  phony: true\n  cmd: -rm {{FROM}}/{{DST}}\n</code></pre> <p>Workflow:</p> <pre><code># Edit source\nbndbuild edit\n\n# Build binary\nbndbuild build\n\n# Quick test\nbndbuild test\n\n# Clean\nbndbuild clean\n</code></pre>"},{"location":"orgams/examples/#orgams-with-hardware-transfer","title":"Orgams with Hardware Transfer","text":"<p>Build and deploy to real CPC via M4 board.</p> <p>build.bnd:</p> <pre><code>{% set FROM=\"cpcfolder\" %}\n{% set SRC=\"PROD.O\" %}\n{% set DST=\"PROD\" %}\n\n# Build and deploy to M4\n- tgt: deploy\n  dep: {{FROM}}/{{DST}}\n  cmd: xfer 192.168.1.26 -y {{FROM}}/{{DST}}\n\n# Assemble\n- tgt: {{FROM}}/{{DST}}\n  dep: {{FROM}}/{{SRC}}\n  cmd: orgams --from {{FROM}} --src {{SRC}} --dst {{DST}}\n\n# Edit source\n- tgt: edit\n  phony: true\n  cmd: orgams --from {{FROM}} --src {{SRC}} --edit\n</code></pre> <p>Usage:</p> <pre><code># Edit \u2192 Build \u2192 Deploy to hardware\nbndbuild edit\nbndbuild deploy\n</code></pre>"},{"location":"orgams/examples/#format-conversion","title":"Format Conversion","text":""},{"location":"orgams/examples/#import-basm-source","title":"Import BASM Source","text":"<p>Convert ASCII assembly to Orgams format.</p> <pre><code># Step 1: Convert BASM source to Orgams format\ncpclib-runner orgams --from project.dsk --src CODE.ASM --basm2orgams\n\n# Step 2: Assemble with Orgams\ncpclib-runner orgams --from project.dsk --src CODE.ASM --dst CODE\n</code></pre> <p>Use Case: Import cross-assembler code into native Orgams workflow.</p>"},{"location":"orgams/examples/#extract-orgams-binary-to-ascii","title":"Extract Orgams Binary to ASCII","text":"<p>Use Borgams to convert compiled Orgams back to text.</p> <pre><code># Convert Orgams binary to ASCII\ncpclib-borgams --input COMPILED.O --output source.asm\n</code></pre> <p>Note: Borgams is currently work-in-progress. See Borgams documentation.</p>"},{"location":"orgams/examples/#advanced-scenarios","title":"Advanced Scenarios","text":""},{"location":"orgams/examples/#conditional-assembly-with-emulator-selection","title":"Conditional Assembly with Emulator Selection","text":"<p>Choose emulator based on platform.</p> <pre><code># Linux/macOS: use ACE\ncpclib-runner orgams --from demo.dsk --src MAIN.O --emulator ace\n\n# Windows: use WinAPE (if Orgams support improves)\ncpclib-runner orgams --from demo.dsk --src MAIN.O --emulator winape\n</code></pre>"},{"location":"orgams/examples/#multi-stage-build","title":"Multi-Stage Build","text":"<p>Combine Orgams with other tools.</p> <p>build.bnd:</p> <pre><code># Stage 1: Convert image assets\n- tgt: assets/SPRITE.BIN\n  dep: assets/sprite.png\n  cmd: img2cpc --mode 1 --input assets/sprite.png --output assets/SPRITE.BIN\n\n# Stage 2: Assemble with Orgams\n- tgt: build/MAIN\n  dep: \n    - source/MAIN.O\n    - assets/SPRITE.BIN\n  cmd: orgams --from build.dsk --src MAIN.O --dst MAIN\n\n# Stage 3: Create disc image\n- tgt: release.dsk\n  dep: build/MAIN\n  cmd: dsk release.dsk add --amsdos build/MAIN\n</code></pre>"},{"location":"orgams/examples/#debugging-and-troubleshooting","title":"Debugging and Troubleshooting","text":""},{"location":"orgams/examples/#keep-emulator-open-for-inspection","title":"Keep Emulator Open for Inspection","text":"<p>Prevent automatic closure to examine results.</p> <pre><code># Assembly fails? Keep emulator open to see errors\ncpclib-runner orgams \\\n  --from demo.dsk \\\n  --src BROKEN.O \\\n  --keepemulator\n</code></pre>"},{"location":"orgams/examples/#verbose-output","title":"Verbose Output","text":"<p>Enable debug logging (implementation-specific).</p> <pre><code># Check what commands are sent to the emulator\nRUST_LOG=debug cpclib-runner orgams --from demo.dsk --src MAIN.O\n</code></pre>"},{"location":"orgams/examples/#performance-tips","title":"Performance Tips","text":""},{"location":"orgams/examples/#use-albireo-for-faster-iteration","title":"Use Albireo for Faster Iteration","text":"<p>Folders are significantly faster than disc images.</p> <pre><code># SLOW: Disc image access\ncpclib-runner orgams --from large.dsk --src CODE.O\n\n# FAST: Folder access\ncpclib-runner orgams --from cpcfolder --src CODE.O\n</code></pre>"},{"location":"orgams/examples/#reuse-disc-images","title":"Reuse Disc Images","text":"<p>Keep source and output in the same disc to reduce I/O.</p> <pre><code># Both source and destination on same disc\ncpclib-runner orgams --from project.dsk --src SRC.O --dst OUTPUT\n</code></pre>"},{"location":"orgams/examples/#integration-examples","title":"Integration Examples","text":""},{"location":"orgams/examples/#makefile-integration","title":"Makefile Integration","text":"<pre><code>SRC = cpcfolder/MAIN.O\nDST = cpcfolder/MAIN\n\nbuild: $(DST)\n\n$(DST): $(SRC)\n    cpclib-runner orgams --from cpcfolder --src MAIN.O --dst MAIN\n\nedit:\n    cpclib-runner orgams --from cpcfolder --src MAIN.O --edit\n\ntest:\n    cpclib-runner orgams --from cpcfolder --src MAIN.O --jump\n\nclean:\n    rm -f $(DST)\n\n.PHONY: edit test clean\n</code></pre>"},{"location":"orgams/examples/#shell-script-automation","title":"Shell Script Automation","text":"<pre><code>#!/bin/bash\n# build_orgams.sh\n\nset -e\n\nFROM=\"cpcfolder\"\nSRC=\"DEMO.O\"\nDST=\"DEMO\"\n\necho \"Assembling $SRC...\"\ncpclib-runner orgams --from \"$FROM\" --src \"$SRC\" --dst \"$DST\"\n\necho \"Assembly complete: $DST\"\nls -lh \"$FROM/$DST\"\n</code></pre>"},{"location":"orgams/examples/#see-also","title":"See Also","text":"<ul> <li>Orgams Overview - Introduction and features</li> <li>Command Line Reference - Detailed option documentation</li> <li>BNDBUILD Examples - More build system patterns</li> <li>CPC Runner Examples - Emulator automation patterns</li> </ul>"},{"location":"runner/","title":"CPC Runner - Emulator-Agnostic Launcher","text":"<p>Command Reference</p> <p>For current usage: <code>bndbuild --help cpc</code> Complete documentation: CLI Help Reference</p> <p>The CPC runner provides a unified interface to launch Amstrad CPC programs across multiple emulators without changing your workflow.</p>"},{"location":"runner/#overview","title":"Overview","text":"<p>Instead of learning different command-line syntaxes for each emulator, use a single consistent interface: - Automatically downloads and manages emulator binaries - Supports multiple emulators: ACE, WinAPE, CPCEC, AMSpiriT, SugarboxV2 - Handles disk images, snapshots, and Albireo folders - Works seamlessly in build scripts</p>"},{"location":"runner/#quick-start","title":"Quick Start","text":"<p>Run a snapshot: <pre><code>bndbuild --direct -- cpc run --snapshot demo.sna\n</code></pre></p> <p>Run with a disk: <pre><code>bndbuild --direct -- cpc run -a game.dsk -e ace\n</code></pre></p>"},{"location":"runner/#supported-emulators","title":"Supported Emulators","text":""},{"location":"runner/#integration-with-bndbuild","title":"Integration with BndBuild","text":"<p>CPC Runner is available as a standalone <code>cpcrunner</code> binary but can also be used within BndBuild build scripts using the <code>cpc</code>, <code>emu</code>, <code>emuctrl</code>, or <code>emucontrol</code> command aliases. See BndBuild Commands for integration details.</p>"},{"location":"runner/#supported-emulators_1","title":"Supported Emulators","text":"<ul> <li>ACE (default) - Cross-platform, feature-rich</li> <li>WinAPE - Windows, accurate emulation</li> <li>CPCEC - Cross-platform, high compatibility</li> <li>AMSpiriT - Windows, hardware-accurate</li> <li>SugarboxV2 - Cross-platform, modern</li> </ul>"},{"location":"runner/#common-use-cases","title":"Common Use Cases","text":""},{"location":"runner/#launch-with-disk-image","title":"Launch with Disk Image","text":"<pre><code>bndbuild --direct -- cpc run -a mydisk.dsk\n</code></pre>"},{"location":"runner/#choose-specific-emulator","title":"Choose Specific Emulator","text":"<pre><code>bndbuild --direct -- cpc run --snapshot game.sna -e winape\n</code></pre>"},{"location":"runner/#set-memory-configuration","title":"Set Memory Configuration","text":"<pre><code>bndbuild --direct -- cpc run -a disk.dsk -m 128\n</code></pre>"},{"location":"runner/#keep-emulator-open","title":"Keep Emulator Open","text":"<pre><code>bndbuild --direct -- cpc run -a disk.dsk -k\n</code></pre>"},{"location":"runner/#integration-with-bndbuild_1","title":"Integration with bndbuild","text":"<p>In your <code>bndbuild.yml</code>:</p> <pre><code>- tgt: run\n  cmd: cpc run --snapshot demo.sna\n  phony: true\n</code></pre>"},{"location":"runner/#see-also","title":"See Also","text":"<ul> <li>Command Line Reference</li> <li>Examples</li> <li>BNDBUILD - Build system integration</li> </ul>"},{"location":"runner/cmdline/","title":"CPC Runner Command Line Reference","text":"<p>Latest Help</p> <p>For the most current options: <code>bndbuild --help cpc</code></p>"},{"location":"runner/cmdline/#usage","title":"Usage","text":"<pre><code>bndbuild --direct -- cpc &lt;COMMAND&gt; [OPTIONS]\n</code></pre>"},{"location":"runner/cmdline/#commands","title":"Commands","text":""},{"location":"runner/cmdline/#run","title":"<code>run</code>","text":"<p>Launch an emulator with the specified configuration.</p>"},{"location":"runner/cmdline/#orgams","title":"<code>orgams</code>","text":"<p>Special mode for Orgams assembler integration.</p>"},{"location":"runner/cmdline/#common-options","title":"Common Options","text":""},{"location":"runner/cmdline/#-a-drivea-disca","title":"<code>-a, --drivea &lt;DISCA&gt;</code>","text":"<p>Disc image to mount in drive A.</p> <p>Supports: <code>.dsk</code>, <code>.edsk</code> formats.</p>"},{"location":"runner/cmdline/#-b-driveb-discb","title":"<code>-b, --driveb &lt;DISCB&gt;</code>","text":"<p>Disc image to mount in drive B.</p>"},{"location":"runner/cmdline/#-snapshot-snapshot","title":"<code>--snapshot &lt;SNAPSHOT&gt;</code>","text":"<p>Snapshot file to load and run (<code>.sna</code> format).</p>"},{"location":"runner/cmdline/#-e-emulator-emulator","title":"<code>-e, --emulator &lt;EMULATOR&gt;</code>","text":"<p>Choose which emulator to use.</p> <p>Default: <code>ace</code></p> <p>Available emulators: - <code>ace</code> - ACE emulator (cross-platform) - <code>winape</code> - WinAPE (Windows) - <code>cpcec</code> - CPCEC (cross-platform) - <code>amspirit</code> - AMSpiriT (Windows) - <code>sugarbox</code> - SugarboxV2 (cross-platform)</p>"},{"location":"runner/cmdline/#-m-memory-memory","title":"<code>-m, --memory &lt;MEMORY&gt;</code>","text":"<p>Set CPC memory configuration (in KB).</p> <p>Possible values: <code>64</code>, <code>128</code>, <code>192</code>, <code>256</code>, <code>320</code>, <code>576</code>, <code>1088</code>, <code>2112</code></p>"},{"location":"runner/cmdline/#-k-keepemulator","title":"<code>-k, --keepemulator</code>","text":"<p>Keep the emulator window open after execution completes.</p> <p>Useful for: - Interactive testing - Debugging - Manual exploration</p>"},{"location":"runner/cmdline/#-c-clear-cache","title":"<code>-c, --clear-cache</code>","text":"<p>Clear the emulator download cache.</p> <p>Use when: - Emulator download is corrupted - Forcing a fresh download - Troubleshooting emulator issues</p>"},{"location":"runner/cmdline/#-d-debug-debug","title":"<code>-d, --debug &lt;DEBUG&gt;</code>","text":"<p>Load debug symbols file (RASM-compatible format).</p> <p>Currently supported by ACE emulator.</p>"},{"location":"runner/cmdline/#-r-auto-run-file-auto_run_file","title":"<code>-r, --auto-run-file &lt;AUTO_RUN_FILE&gt;</code>","text":"<p>Automatically run the specified file from disk.</p>"},{"location":"runner/cmdline/#-albireo-folder","title":"<code>--albireo &lt;FOLDER&gt;</code>","text":"<p>Mount a folder as Albireo virtual filesystem (ACE only).</p> <p>Warning</p> <p>This completely replaces the existing Albireo content.</p>"},{"location":"runner/cmdline/#-disable-rom-disable_rom","title":"<code>--disable-rom &lt;DISABLE_ROM&gt;</code>","text":"<p>Disable specific ROMs.</p> <p>Possible values: - <code>orgams</code> - Disable Orgams ROM - <code>unidos</code> - Disable UnidOS ROM</p>"},{"location":"runner/cmdline/#examples","title":"Examples","text":"<p>See Examples for practical usage scenarios.</p>"},{"location":"runner/examples/","title":"CPC Runner Examples","text":""},{"location":"runner/examples/#basic-usage","title":"Basic Usage","text":""},{"location":"runner/examples/#run-a-snapshot","title":"Run a Snapshot","text":"<pre><code>bndbuild --direct -- cpc run --snapshot demo.sna\n</code></pre>"},{"location":"runner/examples/#run-with-disk-image","title":"Run with Disk Image","text":"<pre><code>bndbuild --direct -- cpc run -a game.dsk\n</code></pre>"},{"location":"runner/examples/#run-with-two-disks","title":"Run with Two Disks","text":"<pre><code>bndbuild --direct -- cpc run -a disk1.dsk -b disk2.dsk\n</code></pre>"},{"location":"runner/examples/#choosing-emulators","title":"Choosing Emulators","text":""},{"location":"runner/examples/#use-winape-windows","title":"Use WinAPE (Windows)","text":"<pre><code>bndbuild --direct -- cpc run -a game.dsk -e winape\n</code></pre>"},{"location":"runner/examples/#use-ace-default","title":"Use ACE (Default)","text":"<pre><code>bndbuild --direct -- cpc run -a game.dsk -e ace\n</code></pre>"},{"location":"runner/examples/#use-cpcec","title":"Use CPCEC","text":"<pre><code>bndbuild --direct -- cpc run --snapshot demo.sna -e cpcec\n</code></pre>"},{"location":"runner/examples/#memory-configuration","title":"Memory Configuration","text":""},{"location":"runner/examples/#128kb-cpc","title":"128KB CPC","text":"<pre><code>bndbuild --direct -- cpc run -a game.dsk -m 128\n</code></pre>"},{"location":"runner/examples/#64kb-cpc-464","title":"64KB CPC 464","text":"<pre><code>bndbuild --direct -- cpc run -a game.dsk -m 64\n</code></pre>"},{"location":"runner/examples/#development-workflow","title":"Development Workflow","text":""},{"location":"runner/examples/#keep-emulator-open-for-testing","title":"Keep Emulator Open for Testing","text":"<pre><code>bndbuild --direct -- cpc run -a test.dsk -k\n</code></pre>"},{"location":"runner/examples/#load-debug-symbols","title":"Load Debug Symbols","text":"<pre><code>bndbuild --direct -- cpc run -a demo.dsk -d demo.sym -e ace\n</code></pre>"},{"location":"runner/examples/#auto-run-specific-file","title":"Auto-run Specific File","text":"<pre><code>bndbuild --direct -- cpc run -a disk.dsk -r DEMO.BIN\n</code></pre>"},{"location":"runner/examples/#albireo-virtual-filesystem-ace","title":"Albireo Virtual Filesystem (ACE)","text":""},{"location":"runner/examples/#mount-local-folder","title":"Mount Local Folder","text":"<pre><code>bndbuild --direct -- cpc run --albireo ./files/ -e ace\n</code></pre> <p>Files in the <code>./files/</code> folder will be accessible from the CPC.</p>"},{"location":"runner/examples/#integration-examples","title":"Integration Examples","text":""},{"location":"runner/examples/#in-bndbuildyml-test-task","title":"In bndbuild.yml - Test Task","text":"<pre><code>- tgt: test\n  dep: demo.sna\n  cmd: cpc run --snapshot demo.sna -k\n  phony: true\n</code></pre>"},{"location":"runner/examples/#run-with-specific-memory","title":"Run with Specific Memory","text":"<pre><code>- tgt: run128\n  dep: game.dsk\n  cmd: cpc run -a game.dsk -m 128 -k\n  phony: true\n</code></pre>"},{"location":"runner/examples/#multi-disk-demo","title":"Multi-disk Demo","text":"<pre><code>- tgt: run-demo\n  dep: [demo1.dsk, demo2.dsk]\n  cmd: cpc run -a demo1.dsk -b demo2.dsk -e ace\n  phony: true\n</code></pre>"},{"location":"runner/examples/#troubleshooting","title":"Troubleshooting","text":""},{"location":"runner/examples/#clear-emulator-cache","title":"Clear Emulator Cache","text":"<pre><code>bndbuild --direct -- cpc run -c\n</code></pre>"},{"location":"runner/examples/#force-ace-download","title":"Force ACE Download","text":"<pre><code># Clear cache then run\nbndbuild --direct -- cpc run -c -a game.dsk -e ace\n</code></pre>"},{"location":"runner/examples/#advanced-scenarios","title":"Advanced Scenarios","text":""},{"location":"runner/examples/#disable-orgams-rom","title":"Disable Orgams ROM","text":"<pre><code>bndbuild --direct -- cpc run -a disk.dsk --disable-rom orgams\n</code></pre>"},{"location":"runner/examples/#development-cycle","title":"Development Cycle","text":"<pre><code># Build, then run with debugging\nbndbuild build &amp;&amp; bndbuild --direct -- cpc run -a output.dsk -d output.sym -k\n</code></pre>"},{"location":"runner/examples/#cross-emulator-testing","title":"Cross-emulator Testing","text":"<pre><code># Test on multiple emulators\nfor emu in ace winape cpcec; do\n  bndbuild --direct -- cpc run -a demo.dsk -e $emu\ndone\n</code></pre>"},{"location":"snapshot/","title":"Snapshot Tool","text":"<p>The <code>snapshot</code> tool is a command-line utility for creating, inspecting, and manipulating Amstrad CPC snapshot (SNA) files.</p>"},{"location":"snapshot/#installation","title":"Installation","text":"<p>The snapshot tool is built as part of the cpclib toolchain:</p> <pre><code>cargo install cpclib-snacli\n</code></pre>"},{"location":"snapshot/#overview","title":"Overview","text":"<p>SNA (Snapshot) files preserve the complete state of an Amstrad CPC at a specific moment, including:</p> <ul> <li>CPU registers (Z80 state)</li> <li>Memory contents (RAM and ROM)</li> <li>Gate Array configuration (screen mode, colors, ROM selection)</li> <li>CRTC (Cathode Ray Tube Controller) registers</li> </ul> <p>The snapshot tool allows you to:</p> <ul> <li>Create snapshots from raw memory dumps</li> <li>Inspect snapshot contents</li> <li>Modify snapshot properties</li> <li>Convert between different snapshot formats</li> </ul>"},{"location":"snapshot/#quick-start","title":"Quick Start","text":"<p>Create a snapshot with a memory image:</p> <pre><code>snapshot -l code.bin 0x4000 -- output.sna\n</code></pre> <p>Inspect a snapshot:</p> <pre><code>snapshot --info -i game.sna\n</code></pre>"},{"location":"snapshot/#documentation-sections","title":"Documentation Sections","text":""},{"location":"snapshot/#integration-with-bndbuild","title":"Integration with BndBuild","text":"<p>Snapshot is available as a standalone <code>snapshot</code> binary but can also be used within BndBuild build scripts using the <code>sna</code> or <code>snapshot</code> command aliases. See BndBuild Commands for integration details.</p>"},{"location":"snapshot/#documentation-sections_1","title":"Documentation Sections","text":"<ul> <li>Command-Line Reference - Complete CLI documentation</li> <li>Examples - Common use cases and recipes</li> </ul>"},{"location":"snapshot/#sna-file-format","title":"SNA File Format","text":"<p>The standard Amstrad CPC snapshot format stores:</p> <ul> <li>64KB or 128KB of RAM depending on CPC model</li> <li>Complete Z80 register state</li> <li>Gate Array and CRTC configuration</li> <li>Optional chunks for extended information</li> </ul>"},{"location":"snapshot/#related-tools","title":"Related Tools","text":"<ul> <li>img2cpc - Convert images and save directly to SNA files</li> <li>cpclib-disc - Create DSK files that can be loaded in snapshots</li> </ul>"},{"location":"snapshot/cmdline/","title":"Snapshot Command Line","text":"<p>Command Reference</p> <p>For current syntax: <code>snapshot --help</code></p> <p>Manipulate Amstrad CPC snapshot (.SNA) files.</p> <p>Use <code>snapshot --help</code> for complete usage.</p>"},{"location":"snapshot/examples/","title":"Snapshot Examples","text":"<p>Command Reference</p> <p>For current syntax: <code>snapshot --help</code> Complete reference: CLI Help Reference</p>"},{"location":"snapshot/examples/#basic-usage","title":"Basic Usage","text":"<p>Manipulate Amstrad CPC snapshot (.SNA) files.</p> <p>For all options: <code>snapshot --help</code></p>"},{"location":"xfertool/","title":"XferTool - M4 Board Management Tool","text":"<p>XferTool is a command-line utility for managing files and operations on the M4 Board, an SD card interface for Amstrad CPC computers. It allows uploading files, executing programs, browsing directories, and controlling the M4 and CPC.</p>"},{"location":"xfertool/#features","title":"Features","text":"<ul> <li>Upload files to M4 Board SD card</li> <li>Execute files (binaries, snapshots) on CPC</li> <li>Browse M4 file system (ls, pwd, cd)</li> <li>Reboot M4 Board or CPC</li> <li>Automatic snapshot format conversion (V3 \u2192 V2)</li> <li>Interactive session mode</li> </ul>"},{"location":"xfertool/#what-is-m4-board","title":"What is M4 Board?","text":"<p>The M4 Board is an SD card interface for Amstrad CPC computers that allows: - Loading programs from SD card - Storing files on removable media - Network connectivity for file transfers - Enhanced CPC capabilities</p>"},{"location":"xfertool/#quick-start","title":"Quick Start","text":"<pre><code># Upload a file to M4\ncpclib-xfertool -p game.dsk\n\n# Upload and run a snapshot\ncpclib-xfertool -y game.sna\n\n# Execute a file on CPC\ncpclib-xfertool -x loader.bin\n\n# Browse M4 files\ncpclib-xfertool --ls\n</code></pre>"},{"location":"xfertool/#see-also","title":"See Also","text":""},{"location":"xfertool/#integration-with-bndbuild","title":"Integration with BndBuild","text":"<p>XferTool is available as a standalone <code>cpclib-xfertool</code> binary but can also be used within BndBuild build scripts using the <code>xfer</code>, <code>cpcwifi</code>, or <code>m4</code> command aliases. See BndBuild Commands for integration details.</p>"},{"location":"xfertool/#see-also_1","title":"See Also","text":"<ul> <li>Command Line Reference - Detailed documentation of all options</li> <li>Examples - Usage examples and workflows</li> <li>M4 Board documentation</li> </ul>"},{"location":"xfertool/cmdline/","title":"XferTool Command Line","text":"<p>Command Reference</p> <p>For current syntax: <code>cpclib-xfertool --help</code> Complete reference: CLI Help Reference</p>"},{"location":"xfertool/cmdline/#synopsis","title":"Synopsis","text":"<p>Use <code>cpclib-xfertool --help</code> for complete command list and options.</p>"},{"location":"xfertool/examples/","title":"XferTool Examples","text":"<p>Command Reference</p> <p>For current syntax: <code>cpclib-xfertool --help</code> Complete reference: CLI Help Reference</p>"},{"location":"xfertool/examples/#basic-usage","title":"Basic Usage","text":"<p>XferTool transfers files to/from Amstrad CPC via M4 WiFi.</p>"},{"location":"xfertool/examples/#upload-file","title":"Upload File","text":"<pre><code>cpclib-xfertool -p game.sna\n</code></pre>"},{"location":"xfertool/examples/#upload-and-run","title":"Upload and Run","text":"<pre><code>cpclib-xfertool -y game.sna\n</code></pre>"},{"location":"xfertool/examples/#list-files","title":"List Files","text":"<pre><code>cpclib-xfertool --ls\n</code></pre>"},{"location":"xfertool/examples/#reset-cpc","title":"Reset CPC","text":"<pre><code>cpclib-xfertool -s\n</code></pre> <p>For all options: <code>cpclib-xfertool --help</code></p>"}]}